(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{11:function(e,t,a){e.exports=a(20)},16:function(e,t,a){},17:function(e,t,a){},20:function(e,t,a){"use strict";a.r(t);var n=a(2),i=a.n(n),r=a(8),o=a.n(r),s=(a(16),a(3)),d=a(4),h=(a(17),a(9)),c=a.n(h),w=a(0),l=(a(18),a(19),a(10)),m=a(6),p=a(5),u=function(e,t,a,n){return{Xb:e+a*Math.sin(n/63.6619772367581),Yb:t+a*Math.cos(n/63.6619772367581)}},f=function(e,t,a,n){var i=Math.abs(a-e),r=Math.abs(n-t),o=Math.sqrt(Math.pow(i,2)+Math.pow(r,2));return Number(o.toFixed(4))},g=function(e,t,a){if(0==a.length)return 0;var n=(f(0,e,0,-50)/(100/99)).toFixed(4)-0,i=(f(0,t,0,50)/(100/99)).toFixed(4)-0,r=Math.floor(n),o=Math.floor(i),s=n-r,d=i-o;if(0==s&&0==d){var h=100*o+r;return Number(a[h][2].toFixed(4))}if(s<=1-d){if(!a[h=100*o+r]||!a[h+1])return 0;var c=a[h][2]-a[h+1][2],w=Math.sqrt(Math.pow(c/150-0,2)+Math.pow(100/99,2)),l=s+d,m=Math.sqrt(Math.pow(d*(100/99),2)+Math.pow(d*(100/99),2)),p=w*l,u=Math.atan(Math.abs((c/150-0)/(100/99))),g=p*Math.sin(u);if(c<0)var v=a[h][2]/150-0+g;else v=a[h][2]/150-0-g;if(!a[h]||!a[h+100])return 0;var M=a[h][2]-a[h+100][2],b=Math.sqrt(Math.pow(M/150-0,2)+Math.pow(100/99,2)),y=d+s,x=Math.sqrt(Math.pow(s*(100/99),2)+Math.pow(s*(100/99),2)),S=b*y,E=Math.atan(Math.abs((M/150-0)/(100/99))),O=S*Math.sin(E);if(M<0)var F=a[h][2]/150-0+O;else F=a[h][2]/150-0-O;var j=m/(x+m),I=Math.abs(v-F)*j;if(v-F<0)var R=v+I;else R=v-I}else{if(!a[h=100*(o+1)+r+1]||!a[h-1])return 0;c=a[h][2]-a[h-1][2],w=Math.sqrt(Math.pow(c/150-0,2)+Math.pow(100/99,2)),l=1-s+(1-d),m=Math.sqrt(Math.pow(100/99*(1-d),2)+Math.pow(100/99*(1-d),2)),p=w*l,u=Math.atan(Math.abs((c/150-0)/(100/99))),g=p*Math.sin(u);if(c<0)v=a[h][2]/150-0+g;else v=a[h][2]/150-0-g;if(!a[h]||!a[h-100])return 0;M=a[h][2]-a[h-100][2],b=Math.sqrt(Math.pow(M/150-0,2)+Math.pow(100/99,2)),y=1-d+(1-s),x=Math.sqrt(Math.pow(100/99*(1-s),2)+Math.pow(100/99*(1-s),2)),S=b*y,E=Math.atan(Math.abs((M/150-0)/(100/99))),O=S*Math.sin(E);if(M<0)F=a[h][2]/150-0+O;else F=a[h][2]/150-0-O;j=m/(x+m),I=Math.abs(v-F)*j;if(v-F<0)R=v+I;else R=v-I}return Number(R.toFixed(4))};function v(e,t,a,n,i,r,o,d,h,c,v){o.FBXLoader=m.a,o.GLTFLoader=p.a;var M=new w.h,b=(new w.kb,new w.Cb,document.getElementById("three-map"));document.getElementById("axes-helper");a=new w.mb;new w.mb;(n=new w.Hb({antialias:!0,alpha:!0})).setPixelRatio(window.devicePixelRatio),n.setClearColor(0,0),n.setSize(b.clientWidth,b.clientHeight),b.appendChild(n.domElement),(e=new w.ab(60,b.clientWidth/b.clientHeight,1,1e4)).position.set(80,80,80),e.up.set(0,0,1),(t=new l.a(e)).enableDamping=!0,t.dampingFactor=.05,t.screenSpacePanning=!1,t.minDistance=1,t.maxDistance=1e3,t.maxPolarAngle=Math.PI/2,t.rotateSpeed=.8,t.panSpeed=.8,t.zoomSpeed=.8,function(e){for(var t=e.getAttribute("position"),a=t.array,n=2,i=0;n<a.length;n+=3,i++)a[n]=0;t.needsUpdate=!0,e.computeVertexNormals()}(j=new w.bb(100,100,99,99)),(I=new w.R({wireframe:!0,color:"#222",side:w.l})).flatShading=!0;var y=new w.O(j,I);y.position.set(0,0,0),y.castShadow=!0,y.receiveShadow=!0,a.add(y);var x=new w.s(1e4,1e3);x.geometry.rotateX(Math.PI/2),a.add(x);var S=new w.a(4210752,1);a.add(S);var E=new w.u(16777215,16777215,1);E.color.setHSL(.6,.5,.75),E.groundColor.setHSL(.095,.5,.5),E.position.set(0,0,50),a.add(E);var O=new w.k(16777215,1);window.dirLight=O,O.position.set(1,-1,1),O.position.multiplyScalar(50),O.name="dirlight",a.add(O),O.castShadow=!0,O.shadowMapWidth=O.shadowMapHeight=2048;var F=300;O.shadowCameraLeft=-F,O.shadowCameraRight=F,O.shadowCameraTop=F,O.shadowCameraBottom=-F,O.shadowCameraFar=3500,O.shadowBias=-1e-4,O.shadowDarkness=.35;var j=new w.sb(.5,32,32),I=new w.P({color:"red"});i=new w.O(j,I);j=new w.sb(150,32,32);(new w.xb).crossOrigin="";j=new w.sb(150,32,32),I=new w.P({opacity:0,transparent:!0,alphaTest:.05,side:w.l});var R=new w.O(j,I);function W(){e.aspect=b.clientWidth/b.clientHeight,e.updateProjectionMatrix(),n.setSize(b.clientWidth,b.clientHeight)}return R.rotation.set(Math.PI/2,0,0),a.add(R),function i(){requestAnimationFrame(i),t.update(),function(){for(var t=M.getDelta(),i=0;i<window.mergin_mode.mixers.length;++i)window.mergin_mode.mixers[i].update(t);window.mergin_mode.modelLayer.map((function(e){var a=Object(s.a)(Object(s.a)({},e),{},{mesh:e.mesh.children[0]}),n=a.mesh.position,i=n.x,r=n.y,o=n.z,d=a.runtimeInfo,h=d.animating,l=d.activeRow,m=window.mergin_mode.vectors.data.filter((function(e){return e.id==a.vectorId}))[0].array[0][l],p=m[0],v=m[1],M=(m[2],m[3]),b=m[4];if(h&&"undefined"!==typeof i&&"undefined"!==typeof r&&"undefined"!==typeof o){var y=window.mergin_mode.plane.dem,x=function(e,t,a,n,i,r){var o=u(e,t,1.75*i,n),s=g(o.Xb,o.Yb,r);return{x:o.Xb,y:o.Yb,z:s}}(Number(i.toFixed(4)),Number(r.toFixed(4)),Number(o.toFixed(4)),M,t,y),S=x.x,E=x.y,O=x.z,F=f(p,v,i,r);if(F===1/0&&(F=0),F<b)a.mesh.position.set(S,E,O);else{var j=window.mergin_mode.vectors.data.filter((function(e){return e.id==a.vectorId}))[0].array[0][l+1];if(j){c(a.id,{animating:!0,activeRow:l+1});var I=new w.Db(0,0,1);a.mesh.rotateOnWorldAxis(I,-(400-m[3]+j[3])/63.6619772367581)}else{window.mergin_mode.vectors.data.filter((function(e){return e.id==a.vectorId}))[0].array[0][0];c(a.id,{animating:!1,activeRow:0})}}}})),n.render(a,e)}()}(),window.addEventListener("resize",W,!1),{camera:e,controls:t,scene:a,renderer:n,pointer:i,partials:{plane:y,pointer:i,sky:R,gridHelper:x},loaders:o,onWindowResize:W}}p.a.prototype.load2=function(e,t){var a=this,n=e[0],i=new FileReader;i.onload=function(e){2!==e.target.readyState&&0!==e.target.status||a.parse(e.target.result||e.target.responseText,"",t)},i.readAsArrayBuffer(n)},m.a.prototype.load2=function(e,t){var a=this,n=e[0],i=new FileReader;i.onload=function(e){if(2===e.target.readyState||0===e.target.status){var n=a.parse(e.target.result||e.target.responseText);t&&t(n)}},i.readAsArrayBuffer(n)},window.mergin_mode={modelLayer:[],vectors:[],plane:{},sky:{},mixers:[]};var M=function(){var e=Object(n.useRef)(null),t=Object(n.useState)(null),a=Object(d.a)(t,2),r=a[0],o=a[1],h=Object(n.useState)(1),w=Object(d.a)(h,2),l=w[0],m=w[1],p=Object(n.useState)({mixers:[],camera:{},controls:{},scene:{},renderer:{},pointer:{},partials:{},loaders:{},onWindowResize:function(){}}),u=Object(d.a)(p,2),f=u[0];return u[1],Object(n.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:{width:window.innerWidth,height:window.innerHeight},audio:!1}).then((function(e){var t=e.getTracks()[0].getSettings();o(Object(s.a)({},t)),window.addEventListener("resize",(function(){window.innerWidth/window.innerHeight<t.aspectRatio?m(window.innerWidth/t.width):m(window.innerHeight/t.height)})),window.dispatchEvent(new Event("resize"));f.mixers;var a=f.camera,n=f.controls,i=f.scene,r=f.renderer,d=f.pointer,h=(f.partials,f.loaders);document.getElementById("three-map"),v(a,n,i,r,d,0,h)}))}),[]),r?i.a.createElement("div",{className:"App"},i.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%"}},i.a.createElement(c.a,{height:r.height,width:r.width,ref:e,videoConstraints:{facingMode:"environment"},audio:!1,style:{zIndex:-1,transform:"scale(".concat(l,")")}}),i.a.createElement("div",{id:"three-map",style:{position:"absolute",width:"".concat(r.width,"px"),height:"".concat(r.height,"px"),transform:"scale(".concat(l,")")}}))):i.a.createElement("div",null,"Loading...")};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[11,1,2]]]);
//# sourceMappingURL=main.e8668a87.chunk.js.map