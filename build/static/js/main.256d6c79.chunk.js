(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{102:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),r=n(8),o=n.n(r),c=(n(86),n(87),n(88),n(28)),s=n.n(c),d=n(42),l=n(50),u=n(27),m=n(43),p=n(1),w=n(63),v=n(64),h=n(53),f=n(52);Math.PI;function g(e,t,n,i,a,r,o,c,s,d){o.FBXLoader=h.a,o.GLTFLoader=f.a;new p.h;var l=document.getElementById("three-map");n=new p.mb;var u=document.getElementsByTagName("video")[0],g=new p.Hb(u);g.minFilter=p.E,g.magFilter=p.E,g.format=p.jb,n.background=g,(i=new p.Ib({antialias:!0,alpha:!0})).setPixelRatio(window.devicePixelRatio),i.setClearColor(0,0),i.setSize(l.clientWidth,l.clientHeight),l.appendChild(i.domElement),(e=new p.ab(60,l.clientWidth/l.clientHeight,1,1e4)).position.set(50,17,50),(t=function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t}()?new v.a(e):new w.a(e,i.domElement)).enableDamping=!0,t.dampingFactor=.05,t.screenSpacePanning=!1,t.minDistance=1,t.maxDistance=1e3,t.rotateSpeed=.8,t.panSpeed=.8,t.zoomSpeed=.8;var b=new p.bb(100,100,99,99);!function(e){for(var t=e.getAttribute("position"),n=t.array,i=2,a=0;i<n.length;i+=3,a++)n[i]=0;t.needsUpdate=!0,e.computeVertexNormals()}(b);var y=new p.R({wireframe:!0,color:"#222",side:p.l});y.flatShading=!0;var E=new p.O(b,y);E.position.set(0,0,0),E.castShadow=!1,E.receiveShadow=!1,E.geometry.rotateX(Math.PI/2),n.add(E);var x=new p.s(1e4,1e3);n.add(x);var k=new p.a(4210752,1);n.add(k);var j=new p.u(16777215,16777215,1);j.color.setHSL(.6,.5,.75),j.groundColor.setHSL(.095,.5,.5),j.position.set(0,0,50),n.add(j);var _=new p.k(16777215,1);window.dirLight=_,_.position.set(1,-1,1),_.position.multiplyScalar(50),_.name="dirlight",n.add(_),_.castShadow=!1,a=new p.O(new p.sb(.5,32,32),new p.P({color:"red"}));var O=new p.O(new p.sb(150,32,32),new p.P({opacity:0,transparent:!0,alphaTest:.05,side:p.l}));O.rotation.set(Math.PI/2,0,0),n.add(O);var S=new p.kb,L=new p.Cb,T=function e(t){return!(!t||!window.mergin_mode.world)&&(-1!==window.mergin_mode.world.map((function(e){return e.id})).indexOf(t.uuid)?t:e(t.parent))};function D(t){window.mergin_mode.selected.object&&(window.mergin_mode.selected.object.traverse((function(e){e.isMesh&&(e.material=window.mergin_mode.selected.material[e.uuid])})),window.mergin_mode.selected.object=null,window.mergin_mode.selected.material=null);var a=i.domElement.getBoundingClientRect();L.x=((t.clientX||t.changedTouches[0].clientX)-a.left)/a.width*2-1,L.y=-((t.clientY||t.changedTouches[0].clientY)-a.top)/a.height*2+1,S.setFromCamera(L,e);var r,o,c=S.intersectObjects(n.children,!0),s=Object(m.a)(c);try{for(s.s();!(o=s.n()).done;){var l=o.value;if(r=T(null===l||void 0===l?void 0:l.object))break}}catch(w){s.e(w)}finally{s.f()}if(!r)return d(null),!1;var u=new p.R({color:"#b34f0b",side:p.l});window.mergin_mode.selected.object=r,window.mergin_mode.selected.material={},r.traverse((function(e){e.isMesh&&(window.mergin_mode.selected.material[e.uuid]=e.material,e.material=u)})),d(r.uuid)}function C(){e.aspect=l.clientWidth/l.clientHeight,e.updateProjectionMatrix(),i.setSize(l.clientWidth,l.clientHeight)}return function a(){setTimeout((function(){var r;requestAnimationFrame(a),!1!==(null===(r=window.mergin_mode.scene)||void 0===r?void 0:r.visible)&&(t.update(),i.render(n,e))}),60)}(),window.addEventListener("resize",C,!1),document.getElementById("three-map").addEventListener("click",D),document.getElementById("three-map").addEventListener("touchend",D,!1),{plane:E,camera:e,controls:t,scene:n,renderer:i,pointer:a,partials:{plane:E,pointer:a,sky:O,gridHelper:x},loaders:o,onWindowResize:C}}f.a.prototype.load2=function(e,t){var n=this,i=e[0],a=new FileReader;a.onload=function(e){2!==e.target.readyState&&0!==e.target.status||n.parse(e.target.result||e.target.responseText,"",t)},a.readAsArrayBuffer(i)},h.a.prototype.load2=function(e,t){var n=this,i=e[0],a=new FileReader;a.onload=function(e){if(2===e.target.readyState||0===e.target.status){var i=n.parse(e.target.result||e.target.responseText);t&&t(i)}},a.readAsArrayBuffer(i)};var b=n(17),y=(n(103),n(54)),E=n(65),x=function(e,t,n,i,a){var r=e[0],o=(r.name,r.size,r.url),c=window.mergin_mode,s=(c.scene,new c.loaders.GLTFLoader),d=new E.a;return s.setDRACOLoader(d),new Promise((function(e,n){s.load(o,(function(n){var i;(i=n.scene.position).set.apply(i,Object(y.a)(t)),e({referenceIndex:a,uuid:n.scene.uuid,object:n.scene})}),(function(){}),(function(e){n(e)}))}))},k=[{type:"model",url:"/white-tower.gltf",position:[0,0,0],rotation:[0,0,0],scale:[.2,.2,.2],description:'<iframe \n          style="\n            width: 100%;\n            height: 100%;\n            border:none;"\n          src="https://en.wikipedia.org/wiki/White_Tower_of_Thessaloniki"></iframe>'},{type:"model",url:"/tree-green.fbx",position:[0,0,20],rotation:[0,0,0],scale:[1,1,1],description:'<iframe \n          style="\n            width: 100%;\n            height: 100%;\n            border:none;"\n          src="https://en.wikipedia.org/wiki/Tree"></iframe>'}],j={gltf:x,glb:x,fbx:function(e,t,n,i,a){var r=e[0],o=(r.name,r.size,r.url),c=window.mergin_mode,s=(c.scene,new c.loaders.FBXLoader);return new Promise((function(e,n){s.load(o,(function(n){var i;n.traverse((function(e){e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0)})),(i=n.position).set.apply(i,Object(y.a)(t)),e({referenceIndex:a,uuid:n.uuid,object:n})}),(function(){}),(function(e){n(e)}))}))}},_=Object(d.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=function(e){return e.split(/[#?]/)[0].split(".").pop().trim()},function(e){var n=[];window.mergin_mode.world=[];var i,a=Object(m.a)(e.entries());try{for(a.s();!(i=a.n()).done;){var r=Object(b.a)(i.value,2),o=r[0],c=r[1];"model"===c.type&&(n.push(j[t(c.url)]([{url:c.url}],c.position,c.rotation,c.scale,o)),window.mergin_mode.world.push(c))}}catch(s){a.e(s)}finally{a.f()}return Promise.all(n).then((function(e){e.forEach((function(e){window.mergin_mode.world[e.referenceIndex].id=e.uuid,window.mergin_mode.scene.add(e.object)}))})).catch((function(e){console.error(e)}))}(k);case 3:case"end":return e.stop()}}),e)}))),O=Object(u.b)((function(e){return{api:e.api}}),(function(e){return{setDescriptiveData:function(t){return e({type:"SET_DESCRIPTIVE_DATA",descriptiveData:t})}}}))((function(e){return Object(i.useEffect)((function(){var t;if(!(null===(t=navigator.mediaDevices)||void 0===t?void 0:t.getUserMedia))return!1;navigator.mediaDevices.getUserMedia({video:{width:1280,height:720,facingMode:"environment"}}).then((function(e){var t=document.getElementById("video");t.srcObject=e,t.play()}));var n=window.mergin_mode,i=(n.mixers,n.camera),a=n.controls,r=n.scene,o=n.renderer,c=n.pointer,u=(n.partials,n.loaders),m=(document.getElementById("three-map"),g(i,a,r,o,c,0,u,0,0,(function(t){var n=t?window.mergin_mode.world.filter((function(e){return e.id==t}))[0].description:null;window["descriptive-data-container"].classList.add("transition"),window["descriptive-data-container"].style.height=n?"33%":"0%",setTimeout((function(){window["descriptive-data-container"].classList.remove("transition")}),1e3),e.setDescriptiveData(n)})));window.mergin_mode=Object(l.a)(Object(l.a)({},window.mergin_mode),m),Object(d.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_(e.context);case 2:case"end":return t.stop()}}),t)})))()}),[]),a.a.createElement("div",{id:"world"},a.a.createElement("video",{id:"video",style:{display:"none"},autoPlay:!0,playsInline:!0}),a.a.createElement("div",{id:"three-map",style:{position:"absolute",width:"100%",height:"100%"}}))})),S=n(4),L=n(131),T=n(142),D=n(140),C=n(139),I=n(141),z=function(e){var t=Object(L.a)((function(e){return{root:Object(S.a)({pointerEvents:"none",height:380,transform:"translateZ(0px)",flexGrow:1,flex:1,zIndex:10,width:"100%"},"height","100%"),speedDial:{position:"absolute",bottom:e.spacing(2),right:e.spacing(2),"& .MuiSpeedDialAction-staticTooltip .MuiSpeedDialAction-staticTooltipLabel":{whiteSpace:"nowrap"},"& .MuiButtonBase-root.MuiFab-root.MuiSpeedDial-fab.MuiFab-primary":{width:48,height:48,"& .MuiFab-label":{display:"initial"},"&:focus":{outline:"none"}}}}}))(),n=a.a.useState(!1),i=Object(b.a)(n,2),r=i[0],o=i[1],c=function(){o(!1)};return a.a.createElement("div",{className:t.root},a.a.createElement(T.a,{open:r}),a.a.createElement(D.a,{ariaLabel:"Action Tooltip",className:t.speedDial,icon:a.a.createElement(I.a,null),onClose:c,onOpen:function(){o(!0)},open:r},e.actions.map((function(e){return a.a.createElement(C.a,{key:e.name,icon:e.icon,tooltipTitle:e.name,tooltipOpen:!0,onClick:c})}))))},F=n(138),M=Object(L.a)((function(e){return{paper:{position:"absolute",fontFamily:"Ubuntu",width:"98%",height:"98%",backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3),borderRadius:20,display:"flex",flexFlow:"column"}}})),P=function(e){var t=M(),n=a.a.useState(!1),i=Object(b.a)(n,2),r=(i[0],i[1],a.a.createElement("div",{className:t.paper},e.data));return a.a.createElement(F.a,{open:!0,onClose:e.onClose,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},r)},R=(n(94),n(69)),A=n.n(R),H=n(136),Y=n(67),B=n.n(Y),N=function(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:25}},a.a.createElement("i",{style:{fontSize:70},className:"fas fa-qrcode"}),a.a.createElement("h2",{style:{marginLeft:24,fontWeight:900,textTransform:"uppercase",color:"#606059",letterSpacing:5},id:"simple-modal-title"},"QR Code Scanner")),a.a.createElement("p",{id:"simple-modal-description",style:{flex:1}},a.a.createElement("div",{style:{height:"calc(100% - 30px)",position:"relative"}},a.a.createElement("div",{className:"scan-tip"},a.a.createElement(B.a,{delay:300,onError:function(e){console.error(e)},onScan:function(e){if(e){var t=JSON.parse(e);window.mergin_mode.camera.position.set(t.x,t.y,t.z),window.mergin_mode.controls.alphaOffset=t.heading/180*Math.PI,window.mergin_mode.controls.update()}},style:{width:"100%"}}))),a.a.createElement("div",{style:{textAlign:"center"}},a.a.createElement(H.a,{style:{fontSize:"18px",color:"#313129",fontWeight:600},onClick:e.onClose},"Close"))))},W=function(e,t,n){return function(i){t.current.style.height="100%";var a=function(n){e.current.classList.add("transition"),.33==(e.current.offsetHeight/window.innerHeight).toFixed(2)?e.current.style.height="0%":e.current.style.height="33%",window.removeEventListener("mousemove",r),window.removeEventListener("touchmove",r),window.removeEventListener("mouseup",o),window.removeEventListener("touchend",o),setTimeout((function(){e.current.classList.remove("transition"),t.current.style.height="48px"}),500)};n.current={height:null,movementY:null,previousTouchY:null,previousHeight:e.current.offsetHeight};var r=function(t){n.current.moved=!0,"undefined"===typeof t.movementY?(n.current.movementY=t.touches[0].pageY-(n.current.previousTouchY||t.touches[0].pageY),n.current.previousTouchY=t.touches[0].pageY):n.current.movementY=t.movementY,n.current.height=e.current.offsetHeight-n.current.movementY,e.current.style.height="".concat(n.current.height,"px")};window.addEventListener("mousemove",r),window.addEventListener("touchmove",r);var o=function i(){if(!n.current.moved)return a();e.current.classList.add("transition");var o=n.current.previousHeight-e.current.offsetHeight,c=(e.current.offsetHeight/window.innerHeight).toFixed(2);Number(c)<=.33?n.current.height=o>=0?"0%":"33%":n.current.height=o>=0?"33%":"100%",e.current.style.height="".concat(n.current.height),setTimeout((function(){e.current.classList.remove("transition"),t.current.style.height="48px"}),500),window.removeEventListener("mousemove",r),window.removeEventListener("touchmove",r),window.removeEventListener("mouseup",i),window.removeEventListener("touchend",i)};window.addEventListener("mouseup",o),window.addEventListener("touchend",o)}},q=Object(u.b)((function(e){return{descriptiveData:e.api.descriptiveData}}),(function(e){return{}}))((function(e){var t=Object(i.useRef)(),n=Object(i.useRef)(),r=Object(i.useState)(null),o=Object(b.a)(r,2),c=o[0],s=o[1],d=Object(i.useRef)({height:null,movementY:null,previousTouchY:null,moved:!1});return a.a.createElement("div",{id:"controls"},a.a.createElement("img",{id:"logo",width:120,height:87.9375,src:"/logo-transparent.png"}),a.a.createElement("div",{id:"actions-menu"},a.a.createElement(z,{actions:[{icon:a.a.createElement("div",{onClick:function(){return s(a.a.createElement(N,{onClose:function(){return s(null)}}))}},a.a.createElement("i",{style:{fontSize:18},className:"fas fa-qrcode"})),name:"QR Scan"},{icon:a.a.createElement(A.a,{onClick:function(){document.fullscreenElement?document.exitFullscreen():window.document.body.requestFullscreen().catch((function(e){alert("Error attempting to enable full-screen mode: ".concat(e.message," (").concat(e.name,")"))}))}}),name:"Full Screen"}]}),a.a.createElement("div",{id:"descriptive-data-container",ref:function(e){return n.current=e}},a.a.createElement(H.a,{id:"slider-helper",onMouseDown:W(n,t,d),onTouchStart:W(n,t,d),ref:function(e){return t.current=e}}),a.a.createElement("div",{id:"slider"}),e.descriptiveData?a.a.createElement("div",{id:"descriptive-data",dangerouslySetInnerHTML:{__html:e.descriptiveData}}):a.a.createElement("div",{id:"descriptive-data",style:{overflowY:"auto"}},a.a.createElement("i",{className:"mm-icons far fa-comment-dots"}),a.a.createElement("p",null,"Please select an object to reveal descriptive data"))),c&&a.a.createElement(P,{data:c,onClose:function(){s(null)}})))})),X=n(72),U=n(137),V=Object(X.a)({palette:{primary:{main:"#b34f0b"},secondary:{main:"#323228"}}});var G=function(){return a.a.createElement(U.a,{theme:V},a.a.createElement("div",{className:"App"},a.a.createElement(O,{context:k}),a.a.createElement(q,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var J=n(23),Q=n(70),Z=n(71),$={currentAction:"immerse",descriptiveData:null},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DESCRIPTIVE_DATA":var n=t.descriptiveData;return Object.assign({},e,{descriptiveData:n});default:return e}};window.mergin_mode={modelLayer:[],vectors:[],plane:{},sky:{},mixers:[],camera:{},controls:{},scene:{},renderer:{},pointer:{},partials:{},loaders:{},selected:{object:null,material:null},onWindowResize:function(){}};var ee=Object(J.c)({api:K}),te=document.getElementById("root"),ne=Object(Q.createLogger)({}),ie=Object(J.d)(ee,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),Object(J.a)(Z.a,ne));o.a.render(a.a.createElement(u.a,{store:ie},a.a.createElement(G,null)),te),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},81:function(e,t,n){e.exports=n(102)},86:function(e,t,n){},88:function(e,t,n){},94:function(e,t,n){"use strict";(function(e){n(17),n(0),n(106),e.browser&&/iPad|iPhone|iPod/.test(navigator.userAgent)}).call(this,n(95))}},[[81,1,2]]]);
//# sourceMappingURL=main.256d6c79.chunk.js.map