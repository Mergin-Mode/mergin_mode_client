{"version":3,"sources":["helpers/ThemeliodiProblimata.js","components/_layout/VRButton.js","helpers/createWorld.js","helpers/CalculateDeltaPosition.js","actions/index.js","components/world/index.js","components/_layout/ActionButton.js","components/_layout/Modal.js","helpers/loaders.js","testFiles/worldOne.js","helpers/readWorldData.js","components/_layout/WorldItem.js","components/_layout/QRModal.js","helpers/listeners.js","components/controls/index.js","components/App.js","serviceWorker.js","reducers/api.js","reducers/index.js","index.js","components/_layout/SideBar.js"],"names":["ThemeliodesProblima_1","Xa","Ya","Sab","Gab","Xb","Math","sin","Yb","cos","ThemeliodesProblima_2","absDX","abs","absDY","sqrt","pow","DX","DY","theta","atan","toFixed","CalculateZ","point","targetReference","offset","origin","THREE","x","y","z","intersectObjects","children","VRButton","renderer","button","showWebXRNotFound","style","textDecoration","pointerEvents","onclick","navigator","xr","isSessionSupported","then","supported","currentSession","onSessionStarted","session","addEventListener","onSessionEnded","setSession","removeEventListener","textContent","requestSession","optionalFeatures","end","showEnterVR","message","document","createElement","href","window","isSecureContext","innerHTML","left","width","mobileCheck","PI","a","check","userAgent","vendor","opera","test","substr","createWorld","camera","controls","scene","pointer","partials","loaders","rendererContainer","mixer","selectModel","FBXLoader","GLTFLoader","clock","host","getElementById","video","getElementsByTagName","texture","minFilter","magFilter","format","antialias","enabled","setPixelRatio","devicePixelRatio","setSize","clientWidth","clientHeight","sortObjects","appendChild","domElement","mergin_mode","realities","virtual","setClearColor","background","undefined","position","set","augmented","mixed","DeviceOrientationControls","OrbitControls","enableDamping","dampingFactor","screenSpacePanning","minDistance","maxDistance","rotateSpeed","panSpeed","zoomSpeed","geometry","g","pos","getAttribute","pa","array","j","i","length","needsUpdate","computeVertexNormals","generateTerrain","material","wireframe","color","side","flatShading","plane","castShadow","receiveShadow","rotateX","gridHelper","add","light","channel","sky","opacity","transparent","alphaTest","raycaster","mouse","getParentElement","object","world","map","obj","id","indexOf","uuid","parent","onWindowResize","aspect","updateProjectionMatrix","setAnimationLoop","update","render","delta","getDelta","forEach","worldModel","actions","runtimeInfo","selected","selectedRuntimeInfo","model","onLoad","animations","transormation","timeDelta","Number","action","onSelect","rotate","rotation","currentAnimation","animationIndex","duration","pathIndex","AnimationMixer","clipAction","filter","animation","name","setDuration","play","currentPath","path","speed","start","newPosition","ground","posXY","newZ","CalculateTransformation","objectHelper","onMove","listeners","mouseMoved","onUp","e","event","remove","rect","getBoundingClientRect","clientX","changedTouches","clientY","top","height","setFromCamera","intersects","record","selectable","onMouseClick","vrh","mrh","prototype","load2","files","callback","scope","this","file","reader","FileReader","onload","target","readyState","status","parse","result","responseText","readAsArrayBuffer","connect","state","api","dispatch","setDescriptiveData","context","type","descriptiveData","props","useEffect","mediaDevices","getUserMedia","facingMode","response","srcObject","mixers","newWorld","o","description","classList","setTimeout","display","autoPlay","playsInline","classes","makeStyles","theme","root","transform","flexGrow","flex","zIndex","speedDial","bottom","spacing","right","whiteSpace","outline","useStyles","React","useState","open","setOpen","handleClose","className","Backdrop","SpeedDial","ariaLabel","icon","SpeedDialIcon","onClose","onOpen","SpeedDialAction","key","tooltipTitle","tooltipOpen","onClick","paper","fontFamily","backgroundColor","palette","border","boxShadow","shadows","padding","borderRadius","flexFlow","body","data","Modal","aria-labelledby","aria-describedby","loadGLTFModel","scale","referenceIndex","blending","url","size","loader","dracoLoader","DRACOLoader","setDRACOLoader","Promise","resolve","reject","load","gltf","renderOrder","traverse","child","isMesh","content","refId","visible","process","Infinity","lookAt","speedUnit","meta","authors","firstName","lastName","thumbnail","coordinates","glb","fbx","get_url_extension","split","pop","trim","loadings","entries","index","push","all","models","catch","console","error","readWorldData","worldData","WorldItem","setState","Fragment","items","item","log","src","alignItems","justifyContent","marginBottom","fontSize","marginLeft","fontWeight","textTransform","letterSpacing","delay","onError","err","onScan","textAlign","Button","DescriptiveDataListener","containerRef","sliderHelperRef","fheight","current","sliderOnClick","offsetHeight","innerHeight","resize","mouseup","movementY","previousTouchY","previousHeight","moved","touches","pageY","diff","currentHeight","useRef","modalData","setModalData","ActionButton","QRModal","fullscreenElement","exitFullscreen","requestFullscreen","alert","ref","elem","onMouseDown","onTouchStart","dangerouslySetInnerHTML","__html","overflowY","createMuiTheme","primary","main","secondary","App","ThemeProvider","Boolean","location","hostname","match","initialState","currentAction","Object","assign","modelLayer","vectors","rootReducer","combineReducers","rootElement","store","createLogger","createStore","reducer","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","serviceWorker","ready","registration","unregister","browser"],"mappings":"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","file":"static/js/main.f3e02b9d.chunk.js","sourcesContent":["import * as THREE from \"three\";\nconst rad2Grad = 63.6619772367581; // 1 rad ~= 63 grads\n\nexport const ThemeliodesProblima_1 = (Xa, Ya, Sab, Gab) => {\n  const Xb = Xa + Sab * Math.sin(Gab / rad2Grad);\n  const Yb = Ya + Sab * Math.cos(Gab / rad2Grad);\n  return { Xb: Xb, Yb: Yb };\n};\n\nexport const calculateSab = (Xa, Ya, Xb, Yb) => {\n  const absDX = Math.abs(Xb - Xa);\n  const absDY = Math.abs(Yb - Ya);\n  const Sab = Math.sqrt(Math.pow(absDX, 2) + Math.pow(absDY, 2));\n  return Number(Sab.toFixed(4));\n};\n\nexport const ThemeliodesProblima_2 = (Xa, Ya, Xb, Yb) => {\n  const absDX = Math.abs(Xb - Xa);\n  const absDY = Math.abs(Yb - Ya);\n  const Sab = Math.sqrt(Math.pow(absDX, 2) + Math.pow(absDY, 2));\n\n  const DX = Xb - Xa;\n  const DY = Yb - Ya;\n  const theta = Math.atan(absDX / absDY) * rad2Grad; //http://www.translatorscafe.com/cafe/EN/units-converter/angle/2-3/radian-grad/\n  let Gab;\n  if (DX > 0 && DY > 0) {\n    Gab = theta;\n  } else if (DX > 0 && DY < 0) {\n    Gab = 200 - theta;\n  } else if (DX < 0 && DY < 0) {\n    Gab = 200 + theta;\n  } else if (DX < 0 && DY > 0) {\n    Gab = 400 - theta;\n  } else if (DX === 0 && DY > 0) {\n    Gab = 0;\n  } else if (DX === 0 && DY < 0) {\n    Gab = 200;\n  } else if (DX > 0 && DY === 0) {\n    Gab = 100;\n  } else if (DX < 0 && DY === 0) {\n    Gab = 300;\n  } else if (DX === 0 && DY === 0) {\n    Gab = 0;\n  }\n\n  return { Gab: Gab.toFixed(4), Sab: Sab.toFixed(4) };\n};\n\nexport const CalculateZ = (point, targetReference, offset) => {\n  const origin = new THREE.Vector3(point.x, point.y + offset, point.z);\n\n  const raycaster = new THREE.Raycaster(origin, new THREE.Vector3(0, -1, 0));\n  const intersects = raycaster.intersectObjects(targetReference.children, true);\n  const newY = ((intersects[0] || {}).point || {}).y;\n  // if (Math.abs(Math.abs(point.y) - Math.abs(newY)) > 0.3) {\n  //   debugger;\n  // }\n  return newY || 0;\n};\n","/**\n * @author mrdoob / http://mrdoob.com\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nconst VRButton = {\n  createButton: function(renderer, button) {\n    // if (options && options.referenceSpaceType) {\n    //   renderer.xr.setReferenceSpaceType(options.referenceSpaceType);\n    // }\n\n    function showEnterVR(/*device*/) {\n      let currentSession = null;\n\n      function onSessionStarted(session) {\n        session.addEventListener(\"end\", onSessionEnded);\n\n        renderer.xr.setSession(session);\n        // button.textContent = \"EXIT VR\";\n\n        currentSession = session;\n      }\n\n      function onSessionEnded(/*event*/) {\n        currentSession.removeEventListener(\"end\", onSessionEnded);\n\n        button.textContent = \"ENTER VR\";\n\n        currentSession = null;\n      }\n\n      //\n\n      // button.style.display = \"\";\n\n      // button.style.cursor = \"pointer\";\n      // button.style.left = \"calc(50% - 50px)\";\n      // button.style.width = \"100px\";\n\n      // button.textContent = \"ENTER VR\";\n\n      // button.onmouseenter = function() {\n      //   // button.style.opacity = \"1.0\";\n      // };\n\n      // button.onmouseleave = function() {\n      //   // button.style.opacity = \"0.5\";\n      // };\n\n      button.onclick = function() {\n        if (currentSession === null) {\n          // WebXR's requestReferenceSpace only works if the corresponding feature\n          // was requested at session creation time. For simplicity, just ask for\n          // the interesting ones as optional features, but be aware that the\n          // requestReferenceSpace call will fail if it turns out to be unavailable.\n          // ('local' is always available for immersive sessions and doesn't need to\n          // be requested separately.)\n\n          const sessionInit = {\n            optionalFeatures: [\"local-floor\", \"bounded-floor\"]\n          };\n          navigator.xr\n            .requestSession(\"immersive-vr\", sessionInit)\n            .then(onSessionStarted);\n        } else {\n          currentSession.end();\n        }\n      };\n    }\n\n    function disableButton() {\n      button.style.textDecoration = \"line-through \";\n      button.style.pointerEvents = \"none\";\n      // button.style.cursor = \"auto\";\n      // button.style.left = \"calc(50% - 75px)\";\n      // button.style.width = \"150px\";\n\n      // button.onmouseenter = null;\n      // button.onmouseleave = null;\n\n      button.onclick = null;\n    }\n\n    function showWebXRNotFound() {\n      disableButton();\n\n      button.style.textDecoration = \"line-through\";\n      button.style.pointerEvents = \"none\";\n      // button.textContent = \"VR NOT SUPPORTED\";\n    }\n\n    function stylizeElement(element) {\n      // element.style.position = \"absolute\";\n      // element.style.bottom = \"20px\";\n      // element.style.padding = \"12px 6px\";\n      // element.style.border = \"1px solid #fff\";\n      // element.style.borderRadius = \"4px\";\n      // element.style.background = \"rgba(0,0,0,0.1)\";\n      // element.style.color = \"#fff\";\n      // element.style.font = \"normal 13px sans-serif\";\n      // element.style.textAlign = \"center\";\n      // element.style.opacity = \"0.5\";\n      // element.style.outline = \"none\";\n      // element.style.zIndex = \"999\";\n    }\n\n    if (\"xr\" in navigator) {\n      // button.style.display = \"none\";\n\n      // stylizeElement(button);\n\n      navigator.xr.isSessionSupported(\"immersive-vr\").then(function(supported) {\n        supported ? showEnterVR() : showWebXRNotFound();\n      });\n\n      return button;\n    } else {\n      const message = document.createElement(\"a\");\n      message.href = \"https://immersiveweb.dev/\";\n\n      if (window.isSecureContext === false) {\n        message.innerHTML = \"WEBXR NEEDS HTTPS\"; // TODO Improve message\n      } else {\n        message.innerHTML = \"WEBXR NOT AVAILABLE\";\n      }\n\n      message.style.left = \"calc(50% - 90px)\";\n      message.style.width = \"180px\";\n      message.style.textDecoration = \"none\";\n\n      stylizeElement(message);\n\n      return message;\n    }\n  }\n};\n\nexport { VRButton };\n","import * as THREE from \"three\";\n// import { TrackballControls } from 'three/examples/jsm/controls/TrackballControls.js';\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls.js\";\nimport { DeviceOrientationControls } from \"three/examples/jsm/controls/DeviceOrientationControls.js\";\nimport { FBXLoader } from \"three/examples/jsm/loaders/FBXLoader.js\";\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader.js\";\nimport { CalculateTransformation } from \"./CalculateDeltaPosition\";\nimport { calculateSab } from \"./ThemeliodiProblimata\";\n\nimport { VRButton } from \"../components/_layout/VRButton.js\";\n// var modelName = \"models/gltf/\" + model.name + \".glb\";\nconst degtorad = Math.PI / 180; // Degree-to-Radian conversion\n\nconst mobileCheck = function() {\n  let check = false;\n  (function(a) {\n    if (\n      /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(\n        a\n      ) ||\n      /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(\n        a.substr(0, 4)\n      )\n    )\n      check = true;\n  })(navigator.userAgent || navigator.vendor || window.opera);\n  return check;\n};\n\nGLTFLoader.prototype.load2 = function(files, callback) {\n  const scope = this;\n  const file = files[0];\n\n  const reader = new FileReader();\n\n  reader.onload = function(event) {\n    if (event.target.readyState === 2 || event.target.status === 0) {\n      scope.parse(\n        event.target.result || event.target.responseText,\n        \"\",\n        callback\n      );\n    } else {\n    }\n  };\n  reader.readAsArrayBuffer(file);\n};\nFBXLoader.prototype.load2 = function(files, callback) {\n  const scope = this;\n  const file = files[0];\n\n  const reader = new FileReader();\n\n  reader.onload = function(event) {\n    if (event.target.readyState === 2 || event.target.status === 0) {\n      const geometry = scope.parse(\n        event.target.result || event.target.responseText\n      );\n\n      if (callback) callback(geometry);\n    } else {\n      // scope.dispatchEvent({type: 'error', message: 'Couldn\\'t load URL [' + url + ']', response: event.target.readyState});\n    }\n  };\n\n  reader.readAsArrayBuffer(file);\n};\n\nexport default function createWorld(\n  camera,\n  controls,\n  scene,\n  renderer,\n  pointer,\n  partials,\n  loaders,\n  rendererContainer,\n  mixer,\n  selectModel\n) {\n  loaders.FBXLoader = FBXLoader;\n  loaders.GLTFLoader = GLTFLoader;\n  const clock = new THREE.Clock();\n\n  const host = document.getElementById(\"three-map\");\n\n  const generateTerrain = (g /*,m, e*/) => {\n    const pos = g.getAttribute(\"position\");\n    const pa = pos.array;\n\n    for (let j = 2, i = 0; j < pa.length; j += 3, i++) {\n      pa[j] = 0;\n    }\n    pos.needsUpdate = true;\n    g.computeVertexNormals();\n  };\n\n  scene = new THREE.Scene();\n\n  const video = document.getElementsByTagName(\"video\")[0];\n  const texture = new THREE.VideoTexture(video);\n  texture.minFilter = THREE.LinearFilter;\n  texture.magFilter = THREE.LinearFilter;\n  texture.format = THREE.RGBFormat;\n\n  renderer = new THREE.WebGLRenderer({ antialias: true });\n  renderer.xr.enabled = true;\n  renderer.setPixelRatio(window.devicePixelRatio);\n  renderer.setSize(host.clientWidth, host.clientHeight);\n  renderer.sortObjects = false;\n\n  host.appendChild(renderer.domElement);\n  camera = new THREE.PerspectiveCamera(\n    60,\n    host.clientWidth / host.clientHeight,\n    1,\n    10000\n  );\n  window.mergin_mode.realities = {\n    virtual: () => {\n      renderer.setClearColor(\"#4285f4\", 1);\n      //remove mixed objects\n      // window.mergin_mode.world\n      scene.background = undefined;\n      if (!mobileCheck()) {\n        scene.position.set(0, 0, 0);\n        camera.position.set(-15.08, 1.7, 52.64);\n      } else {\n        scene.position.set(+15.08, -1.7, -52.64);\n        camera.position.set(0, 0, 0);\n      }\n    },\n    augmented: () => {\n      scene.background = texture;\n      renderer.setClearColor(0x000000, 0);\n      scene.position.set(+15.08, -1.7, -52.64);\n      camera.position.set(0, 0, 0);\n    },\n    mixed: () => {\n      scene.background = texture;\n      renderer.setClearColor(0x000000, 0);\n      scene.position.set(+15.08, -1.7, -52.64);\n      camera.position.set(0, 0, 0);\n    }\n  };\n  window.mergin_mode.realities.virtual();\n  // camera.up.set(0, 0, 1);\n  if (mobileCheck()) {\n    controls = new DeviceOrientationControls(camera);\n  } else {\n    controls = new OrbitControls(camera, renderer.domElement);\n  }\n  controls.enableDamping = false; // an animation loop is required when either damping or auto-rotation are enabled\n  controls.dampingFactor = 0.05;\n  controls.screenSpacePanning = false;\n  controls.minDistance = 1;\n  controls.maxDistance = 1000;\n  // controls.maxPolarAngle = Math.PI / 2;\n  controls.rotateSpeed = 0.8;\n  controls.panSpeed = 0.8;\n  controls.zoomSpeed = 0.8;\n\n  // world\n  const geometry = new THREE.PlaneBufferGeometry(100, 100, 99, 99);\n\n  generateTerrain(geometry);\n\n  const material = new THREE.MeshPhongMaterial({\n    wireframe: true,\n    color: \"#222\",\n    side: THREE.DoubleSide\n  });\n\n  material.flatShading = true;\n\n  const plane = new THREE.Mesh(geometry, material);\n  plane.position.set(0, 0, 0);\n  plane.castShadow = false;\n  plane.receiveShadow = false;\n  plane.geometry.rotateX(Math.PI / 2);\n\n  // scene.add(plane);\n\n  const gridHelper = new THREE.GridHelper(10000, 1000);\n  // gridHelper.geometry.rotateX(Math.PI / 2);\n\n  scene.add(gridHelper);\n  const light = new THREE.AmbientLight(0xffffff, 2); // soft white light\n  light.channel = 123;\n  scene.add(light);\n\n  // const hemiLight = new THREE.HemisphereLight(0xffffff, 0xffffff, 1);\n  // hemiLight.color.setHSL(0.6, 0.5, 0.75);\n  // hemiLight.groundColor.setHSL(0.095, 0.5, 0.5);\n  // hemiLight.position.set(0, 0, 50);\n  // scene.add(hemiLight);\n\n  // const dirLight = new THREE.DirectionalLight(0xffffff, 1);\n  // window.dirLight = dirLight;\n  // dirLight.position.set(1, -1, 1);\n  // dirLight.position.multiplyScalar(50);\n  // dirLight.name = \"dirlight\";\n  // dirLight.shadowCameraVisible = true;\n\n  // scene.add(dirLight);\n\n  // dirLight.castShadow = false;\n\n  pointer = new THREE.Mesh(\n    new THREE.SphereGeometry(0.5, 32, 32),\n    new THREE.MeshBasicMaterial({ color: \"red\" })\n  );\n\n  const sky = new THREE.Mesh(\n    new THREE.SphereGeometry(150, 32, 32),\n    new THREE.MeshBasicMaterial({\n      opacity: 0,\n      transparent: true,\n      alphaTest: 0.05,\n      side: THREE.DoubleSide\n    })\n  );\n  // sky.rotation.set(Math.PI / 2, 0, 0);\n  scene.add(sky);\n\n  const raycaster = new THREE.Raycaster();\n  const mouse = new THREE.Vector2();\n  const getParentElement = object => {\n    if (!object || !window.mergin_mode.world) {\n      return false;\n    }\n    const allIds = window.mergin_mode.world.map(obj => obj.id);\n    if (allIds.indexOf(object.uuid) !== -1) {\n      return object;\n    }\n    return getParentElement(object.parent);\n  };\n  const moved = false;\n\n  function onMouseClick(event) {\n    if (window.mergin_mode.listeners.mouseMoved) return true;\n\n    if (window.mergin_mode.selected.object) {\n      scene.remove(window.mergin_mode.selected.objectHelper);\n      // window.mergin_mode.selected.object.traverse(child => {\n      //   if (child.isMesh) {\n      //     child.material.color.setHex(\n      //       window.mergin_mode.selected.material[child.uuid]\n      //     );\n      //     // child.material = window.mergin_mode.selected.material[child.uuid];\n      //   }\n      // });\n      window.mergin_mode.selected.object = null;\n      window.mergin_mode.selected.material = null;\n    }\n    const rect = renderer.domElement.getBoundingClientRect();\n    mouse.x =\n      (((event.clientX || event.changedTouches[0].clientX) - rect.left) /\n        rect.width) *\n        2 -\n      1;\n    mouse.y =\n      -(\n        ((event.clientY || event.changedTouches[0].clientY) - rect.top) /\n        rect.height\n      ) *\n        2 +\n      1;\n\n    raycaster.setFromCamera(mouse, camera);\n    const intersects = raycaster.intersectObjects(scene.children, true);\n    let obj;\n    for (const record of intersects) {\n      obj = getParentElement(record?.object);\n      if (obj) {\n        //check if obj is selectable\n        const referenceObj = window.mergin_mode.world.filter(\n          model => model.id == obj.uuid\n        )[0];\n        if (referenceObj.selectable !== false) {\n          break;\n        }\n      }\n    }\n\n    if (!obj) {\n      selectModel(null);\n      return false;\n    }\n    const material = new THREE.MeshPhongMaterial({\n      color: \"#b34f0b\",\n      side: THREE.DoubleSide\n    });\n\n    window.mergin_mode.selected.object = obj;\n\n    window.mergin_mode.selected.objectHelper = new THREE.BoxHelper(obj);\n    window.mergin_mode.selected.objectHelper.material.color.set(0xffffff);\n    scene.add(window.mergin_mode.selected.objectHelper);\n\n    // obj.traverse(child => {\n    //   if (child.isMesh) {\n    //     window.mergin_mode.selected.material[\n    //       child.uuid\n    //     ] = child.material.color.getHex();\n\n    //     child.material.color.setHex(0xff0000);\n    //   }\n    // });\n    scene.add(window.mergin_mode.selected.objectHelper);\n    const model = window.mergin_mode.world.filter(\n      model => model.id == obj.uuid\n    )[0];\n    const runtimeInfo = model.selectedRuntimeInfo;\n\n    if (runtimeInfo) {\n      runtimeInfo.animationIndex = 0;\n      runtimeInfo.pathIndex = 0;\n      runtimeInfo.duration = 0;\n      const mixer = new THREE.AnimationMixer(obj);\n      mixer\n        .clipAction(\n          obj.animations.filter(animation => {\n            return (\n              animation.name ==\n              model.actions.onSelect.animations[\n                model.selectedRuntimeInfo.animationIndex\n              ].name\n            );\n          })[0]\n        )\n        .setDuration(1)\n        .play();\n      runtimeInfo.mixer = mixer;\n    }\n\n    selectModel(obj.uuid);\n  }\n\n  function onWindowResize() {\n    camera.aspect = host.clientWidth / host.clientHeight;\n    camera.updateProjectionMatrix();\n    renderer.setSize(host.clientWidth, host.clientHeight);\n  }\n\n  function animate() {\n    // requestAnimationFrame(animate);\n    renderer.setAnimationLoop(function() {\n      // if (controls.autoRotate) {\n      controls.update(); // only required if controls.enableDamping = true, or if controls.autoRotate = true\n      // }\n      render();\n    });\n  }\n  animate();\n\n  function render() {\n    renderer.render(scene, camera);\n    if (!window.mergin_mode.world) {\n      return true;\n    }\n    const delta = clock.getDelta();\n    window.mergin_mode.world.forEach(worldModel => {\n      if (worldModel.actions) {\n        const runtimeInfo =\n          window.mergin_mode.selected.object?.uuid == worldModel.id\n            ? worldModel.selectedRuntimeInfo\n            : worldModel.runtimeInfo;\n        if (runtimeInfo) {\n          runtimeInfo.mixer.update(delta);\n        }\n      }\n    });\n\n    window.mergin_mode.world.forEach(model => {\n      if (model.actions?.onLoad?.animations && model.object) {\n        const transormation = CalculateTransformation(delta, model);\n        if (transormation) {\n          if (transormation.position) {\n            model.object.position.set(...transormation.position);\n          }\n          if (transormation.rotation) {\n            model.object.rotation.set(...transormation.rotation);\n          }\n        }\n      }\n    });\n    if (window.mergin_mode.selected.object) {\n      window.mergin_mode.selected.objectHelper.update();\n      // window.mergin_mode.selected.objectHelper.position.set(\n      //   window.mergin_mode.selected.object.position\n      // );\n    }\n  }\n\n  window.addEventListener(\"resize\", onWindowResize, false);\n\n  document.getElementById(\"three-map\").addEventListener(\"mousedown\", () => {\n    const onMove = () => {\n      window.mergin_mode.listeners.mouseMoved = true;\n    };\n\n    const onUp = e => {\n      if (!window.mergin_mode.listeners.mouseMoved) {\n        onMouseClick(e);\n      }\n      window.mergin_mode.listeners.mouseMoved = false;\n      document.getElementById(\"three-map\").removeEventListener(\"mouseup\", onUp);\n      document\n        .getElementById(\"three-map\")\n        .removeEventListener(\"mousemove\", onMove);\n    };\n\n    document.getElementById(\"three-map\").addEventListener(\"mousemove\", onMove);\n    document.getElementById(\"three-map\").addEventListener(\"mouseup\", onUp);\n  });\n\n  // document.getElementById(\"three-map\").partials = {\n  //   plane,\n  //   pointer,\n  //   sky,\n  //   gridHelper\n  // };\n  VRButton.createButton(renderer, window.vrh);\n  VRButton.createButton(renderer, window.mrh);\n\n  // document.getElementById(\"three-map\").addEventListener(\"mousedown\", event => {\n  //   if (event.which !== 1) return false;\n  //   const mouse = new THREE.Vector2();\n  //   const raycaster = new THREE.Raycaster();\n  //   const rect = renderer.domElement.getBoundingClientRect();\n  //   mouse.x =\n  //     (((event.clientX || event.changedTouches[0].clientX) - rect.left) /\n  //       rect.width) *\n  //       2 -\n  //     1;\n  //   mouse.y =\n  //     -(\n  //       ((event.clientY || event.changedTouches[0].clientY) - rect.top) /\n  //       rect.height\n  //     ) *\n  //       2 +\n  //     1;\n\n  //   raycaster.setFromCamera(mouse, camera);\n  //   const intersects = raycaster.intersectObjects(scene.children, true);\n  //   window.positions = window.positions || [];\n  //   window.positions.push([\n  //     intersects[0].point.x.toFixed(2) - 0,\n  //     intersects[0].point.y.toFixed(2) - 0,\n  //     intersects[0].point.z.toFixed(2) - 0\n  //   ]);\n  // });\n  return {\n    plane,\n    camera,\n    controls,\n    scene,\n    renderer,\n    pointer,\n    partials,\n    loaders,\n    onWindowResize\n  };\n}\n","import {\n  ThemeliodesProblima_1,\n  ThemeliodesProblima_2,\n  CalculateZ\n} from \"./ThemeliodiProblimata\";\nimport { AnimationMixer } from \"three\";\nimport { posZ } from \"./computeZ\";\n\nconst gradToRad = 63.661977236758;\nexport const CalculateTransformation = (timeDelta, model) => {\n  const Xa = Number(model.object.position.x.toFixed(4));\n  const Ya = Number(model.object.position.z.toFixed(4));\n  const action =\n    window.mergin_mode.selected.object?.uuid == model.id\n      ? model.actions.onSelect\n      : model.actions.onLoad;\n  const runtimeInfo =\n    window.mergin_mode.selected.object?.uuid == model.id\n      ? model.selectedRuntimeInfo\n      : model.runtimeInfo;\n\n  //if action is onSelect target camera\n  if (model.actions.onSelect === action) {\n    const Gab = Number(\n      ThemeliodesProblima_2(\n        model.object.position.x,\n        model.object.position.z,\n        window.mergin_mode.camera.position.x,\n        window.mergin_mode.camera.position.z\n      ).Gab\n    );\n    const rotate = Gab ? Gab / gradToRad : 0;\n    model.object.rotation.set(\n      model.rotation[0],\n      model.rotation[1] + rotate,\n      model.rotation[2]\n    );\n  }\n  const currentAnimation = action.animations[runtimeInfo.animationIndex];\n\n  runtimeInfo.duration += timeDelta;\n  if (currentAnimation.duration) {\n    if (runtimeInfo.duration >= currentAnimation.duration / 1000) {\n      //check if animation has other path to animate\n      runtimeInfo.duration = 0;\n      if (action.animations.length - 1 > runtimeInfo.animationIndex) {\n        runtimeInfo.animationIndex++;\n        runtimeInfo.pathIndex = 0;\n        const mixer = new AnimationMixer(model.object);\n        mixer\n          .clipAction(\n            model.object.animations.filter(animation => {\n              return (\n                animation.name ==\n                action.animations[runtimeInfo.animationIndex].name\n              );\n            })[0]\n          )\n          .setDuration(1)\n          .play();\n        runtimeInfo.mixer = mixer;\n      }\n      // restart animation\n      else {\n        runtimeInfo.animationIndex = 0;\n        runtimeInfo.pathIndex = 0;\n        const mixer = new AnimationMixer(model.object);\n        mixer\n          .clipAction(\n            model.object.animations.filter(animation => {\n              return (\n                animation.name ==\n                action.animations[runtimeInfo.animationIndex].name\n              );\n            })[0]\n          )\n          .setDuration(1)\n          .play();\n        runtimeInfo.mixer = mixer;\n      }\n    }\n    return false;\n  }\n\n  const currentPath = currentAnimation.path[runtimeInfo.pathIndex];\n  const Xb = Number(currentPath[0].toFixed(4));\n  const Yb = Number(currentPath[2].toFixed(4));\n\n  const Sab = ((timeDelta * currentAnimation.speed) / 60 / 60) * 1000; //distance in meters per second (50km/h)\n  const start = currentAnimation.path[runtimeInfo.pathIndex - 1]\n    ? currentAnimation.path[runtimeInfo.pathIndex - 1]\n    : currentAnimation.path[runtimeInfo.pathIndex];\n  const Gab = Number(ThemeliodesProblima_2(start[0], start[2], Xb, Yb).Gab);\n  if (\n    (Gab <= 100 && Xa >= Xb && Ya >= Yb) ||\n    (Gab > 100 && Gab <= 200 && Xa >= Xb && Ya <= Yb) ||\n    (Gab > 200 && Gab <= 300 && Xa <= Xb && Ya <= Yb) ||\n    (Gab > 300 && Xa <= Xb && Ya >= Yb)\n  ) {\n    //check if animation has other path to animate\n    if (currentAnimation.path.length - 1 > runtimeInfo.pathIndex) {\n      runtimeInfo.pathIndex++;\n      runtimeInfo.duration = 0;\n    }\n    //check if model has other animations\n    else if (action.animations.length - 1 > runtimeInfo.animationIndex) {\n      runtimeInfo.animationIndex++;\n      runtimeInfo.pathIndex = 0;\n      runtimeInfo.duration = 0;\n      const mixer = new AnimationMixer(model.object);\n      mixer\n        .clipAction(\n          model.object.animations.filter(animation => {\n            return (\n              animation.name ==\n              action.animations[runtimeInfo.animationIndex].name\n            );\n          })[0]\n        )\n        .setDuration(1)\n        .play();\n      runtimeInfo.mixer = mixer;\n    }\n    // restart animation\n    else {\n      runtimeInfo.animationIndex = 0;\n      runtimeInfo.pathIndex = 0;\n      runtimeInfo.duration = 0;\n      const mixer = new AnimationMixer(model.object);\n      mixer\n        .clipAction(\n          model.object.animations.filter(animation => {\n            return (\n              animation.name ==\n              action.animations[runtimeInfo.animationIndex].name\n            );\n          })[0]\n        )\n        .setDuration(1)\n        .play();\n      runtimeInfo.mixer = mixer;\n    }\n\n    const newPosition = action.animations[runtimeInfo.animationIndex].path[\n      runtimeInfo.pathIndex - 1\n    ]\n      ? action.animations[runtimeInfo.animationIndex].path[\n          runtimeInfo.pathIndex - 1\n        ]\n      : action.animations[runtimeInfo.animationIndex].path[\n          runtimeInfo.pathIndex\n        ];\n    const newZ = CalculateZ(\n      { x: newPosition[0], z: newPosition[1], y: newPosition[2] },\n      window.mergin_mode.world.filter(model => model.ground == true)[0].object,\n      3\n    );\n    // const rotate = Gab ? Gab / gradToRad : 0;\n    return {\n      position: newPosition\n    };\n    return false;\n  }\n\n  const posXY = ThemeliodesProblima_1(Xa, Ya, Sab, Gab);\n  const newZ = CalculateZ(\n    { x: posXY.Xb, z: posXY.Yb, y: model.object.position.y },\n    window.mergin_mode.world.filter(model => model.ground == true)[0].object,\n    3\n  );\n\n  // if (Math.abs(newZ) - Math.abs(model.object.position.y) > 0.3) {\n  //   console.log(newZ.toFixed(2));\n  //   debugger;\n  // }\n  const rotate = Gab ? Gab / gradToRad : 0;\n  return {\n    position: [posXY.Xb, newZ, posXY.Yb],\n    rotation: [model.rotation[0], model.rotation[1] + rotate, model.rotation[2]]\n  };\n};\n\nexport const CalculateDeltaRotation = (\n  Xa,\n  Ya,\n  Za,\n  Xb,\n  Yb,\n  Zb,\n  Gab,\n  Sab,\n  rotX,\n  rotY\n) => {\n  const DZ = Zb - Za;\n  const XYkathetis = ThemeliodesProblima_1(Xb, Yb, Sab, Gab + 100);\n  const Xkathetis = XYkathetis.Xb;\n  const Ykathetis = XYkathetis.Yb;\n  const Zkathetis = posZ(Xkathetis, Ykathetis);\n  const DZkathetis = Zb - Zkathetis;\n\n  let RotationX = 0;\n  let RotationY = 0;\n\n  if (DZ < 0 || DZ > 0) {\n    RotationX = Math.atan(DZ / Sab);\n    RotationY = Math.atan(DZkathetis / Sab);\n  }\n\n  const DRotationX = rotX - RotationX;\n  const DRotationY = rotY - RotationY;\n\n  return {\n    x: Number(DRotationX),\n    y: Number(DRotationY)\n  };\n};\n","export const SET_POSITION = \"SET_POSITION\";\nexport const SET_CURRENT_ACTION = \"SET_CURRENT_ACTION\";\nexport const SET_MODAL_DATA = \"SET_MODAL_DATA\";\nexport const SET_DESCRIPTIVE_DATA = \"SET_DESCRIPTIVE_DATA\";\n\nexport const setDescriptiveData = descriptiveData => ({\n  type: \"SET_DESCRIPTIVE_DATA\",\n  descriptiveData\n});\n","import React, { useRef, useState, useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport createWorld from \"../../helpers/createWorld\";\nimport { setDescriptiveData } from \"../../actions\";\nconst World = props => {\n  useEffect(() => {\n    if (!navigator.mediaDevices?.getUserMedia) {\n      return false;\n    }\n    const constraints = {\n      video: { width: 1280, height: 720, facingMode: \"environment\" }\n    };\n    navigator.mediaDevices.getUserMedia(constraints).then(response => {\n      const video = document.getElementById(\"video\");\n      video.srcObject = response;\n      video.play();\n    });\n\n    const {\n      mixers,\n      camera,\n      controls,\n      scene,\n      renderer,\n      pointer,\n      partials,\n      loaders\n    } = window.mergin_mode;\n    const rendererContainer = document.getElementById(\"three-map\");\n    const newWorld = createWorld(\n      camera,\n      controls,\n      scene,\n      renderer,\n      pointer,\n      partials,\n      loaders,\n      rendererContainer,\n      mixers,\n      uuid => {\n        const descriptiveData = uuid\n          ? window.mergin_mode.world.filter(o => o.id == uuid)[0].description\n          : null;\n        window[\"descriptive-data-container\"].classList.add(\"transition\");\n\n        if (!descriptiveData) {\n          window[\"descriptive-data-container\"].style.height = \"0%\";\n        } else {\n          window[\"descriptive-data-container\"].style.height = \"33%\";\n        }\n        setTimeout(() => {\n          window[\"descriptive-data-container\"].classList.remove(\"transition\");\n        }, 1000);\n        props.setDescriptiveData(descriptiveData);\n      }\n    );\n    window.mergin_mode = { ...window.mergin_mode, ...newWorld };\n  }, []);\n\n  return (\n    <div id=\"world\">\n      <video\n        id=\"video\"\n        style={{ display: \"none\" }}\n        autoPlay\n        playsInline\n      ></video>\n      <div\n        id=\"three-map\"\n        style={{\n          position: \"absolute\",\n          width: `100%`,\n          height: `100%`\n        }}\n      ></div>\n    </div>\n  );\n};\n\nconst mapStateToProps = state => {\n  return {\n    api: state.api\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    setDescriptiveData: context => dispatch(setDescriptiveData(context))\n  };\n};\n\nWorld.propTypes = {};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(World);\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Button from \"@material-ui/core/Button\";\nimport Backdrop from \"@material-ui/core/Backdrop\";\nimport SpeedDial from \"@material-ui/lab/SpeedDial\";\nimport SpeedDialAction from \"@material-ui/lab/SpeedDialAction\";\nimport SpeedDialIcon from \"@material-ui/lab/SpeedDialIcon\";\n\nexport default props => {\n  const useStyles = makeStyles(theme => ({\n    root: {\n      pointerEvents: \"none\",\n      height: 380,\n      transform: \"translateZ(0px)\",\n      flexGrow: 1,\n      flex: 1,\n      zIndex: 10,\n      width: \"100%\",\n      height: \"100%\"\n    },\n    speedDial: {\n      position: \"absolute\",\n      bottom: theme.spacing(2),\n      right: theme.spacing(2),\n      \"& .MuiSpeedDialAction-staticTooltip .MuiSpeedDialAction-staticTooltipLabel\": {\n        whiteSpace: \"nowrap\"\n      },\n      \"& .MuiButtonBase-root.MuiFab-root.MuiSpeedDial-fab.MuiFab-primary\": {\n        width: 48,\n        height: 48,\n        \"& .MuiFab-label\": {\n          display: \"initial\"\n        },\n        \"&:focus\": {\n          outline: \"none\"\n        }\n      }\n    }\n  }));\n\n  const classes = useStyles();\n  const [open, setOpen] = React.useState(false);\n\n  const handleOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  return (\n    <div className={classes.root}>\n      <Backdrop open={open} />\n      <SpeedDial\n        ariaLabel=\"Action Tooltip\"\n        className={classes.speedDial}\n        icon={<SpeedDialIcon />}\n        onClose={handleClose}\n        onOpen={handleOpen}\n        open={open}\n      >\n        {props.actions.map(action => (\n          <SpeedDialAction\n            key={action.name}\n            icon={action.icon}\n            tooltipTitle={action.name}\n            tooltipOpen\n            onClick={handleClose}\n          />\n        ))}\n      </SpeedDial>\n    </div>\n  );\n};\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Modal from \"@material-ui/core/Modal\";\n\nconst useStyles = makeStyles(theme => ({\n  paper: {\n    position: \"absolute\",\n    fontFamily: \"Ubuntu\",\n    width: \"98%\",\n    height: \"98%\",\n    backgroundColor: theme.palette.background.paper,\n    border: \"2px solid #000\",\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n    borderRadius: 20,\n    display: \"flex\",\n    flexFlow: \"column\"\n  }\n}));\n\nexport default props => {\n  const classes = useStyles();\n  const [open, setOpen] = React.useState(false);\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const body = <div className={classes.paper}>{props.data}</div>;\n\n  return (\n    <Modal\n      open={true}\n      onClose={props.onClose}\n      aria-labelledby=\"simple-modal-title\"\n      aria-describedby=\"simple-modal-description\"\n    >\n      {body}\n    </Modal>\n  );\n};\n","import * as THREE from \"three\";\nimport { DRACOLoader } from \"three/examples/jsm/loaders/DRACOLoader.js\";\nexport const loadGLTFModel = (\n  file,\n  position,\n  rotation,\n  scale,\n  referenceIndex,\n  blending\n) => {\n  const { name, size, url } = file[0];\n  const { scene, loaders } = window.mergin_mode;\n\n  const loader = new loaders.GLTFLoader();\n  const dracoLoader = new DRACOLoader();\n  loader.setDRACOLoader(dracoLoader);\n  return new Promise((resolve, reject) => {\n    loader.load(\n      url,\n      gltf => {\n        gltf.scene.position.set(...position);\n        gltf.scene.scale.set(...scale);\n        gltf.scene.rotation.set(...rotation);\n        gltf.scene.animations = gltf.animations;\n        let material;\n        if (blending) {\n          material = new THREE.MeshPhongMaterial({\n            color: 0x000000, // red (can also use a CSS color string here)\n            blending: THREE[blending]\n          });\n          gltf.scene.renderOrder = 999;\n        }\n\n        gltf.scene.traverse(child => {\n          if (child.isMesh) {\n            child.castShadow = true;\n            child.receiveShadow = true;\n\n            if (blending) {\n              child.material = material;\n              // child.material.blending = THREE[blending];\n              child.renderOrder = 999;\n              // child.material.depthWrite = false;\n            }\n          }\n        });\n        resolve({ referenceIndex, uuid: gltf.scene.uuid, object: gltf.scene });\n      },\n      () => {},\n      e => {\n        reject(e);\n      }\n    );\n  });\n};\nexport const loadFBXModel = (\n  file,\n  position,\n  rotation,\n  scale,\n  referenceIndex,\n  blending\n) => {\n  const { name, size, url } = file[0];\n  const { scene, loaders } = window.mergin_mode;\n  const loader = new loaders.FBXLoader();\n  return new Promise((resolve, reject) => {\n    loader.load(\n      url,\n      object => {\n        object.traverse(child => {\n          if (child.isMesh) {\n            child.castShadow = true;\n            child.receiveShadow = true;\n            if (blending) {\n              child.material.blending = THREE[blending];\n              child.material.needsUpdate = true;\n            }\n          }\n        });\n        object.position.set(...position);\n        object.scale.set(...scale);\n        object.rotation.set(...rotation);\n        resolve({ referenceIndex, uuid: object.uuid, object });\n      },\n      () => {},\n      e => {\n        reject(e);\n      }\n    );\n  });\n};\n","export default {\n  id: \"006cb9aE-F316\",\n  name: \"White Tower Of Thessaloniki\",\n  description: \"A simple overview of the area near the tower of thessaloniki.\",\n  content: [\n    {\n      refId: \"white_tower\",\n      type: \"model\",\n      url: process.env.PUBLIC_URL + \"/white-tower.gltf\",\n      position: [0, 0, 0],\n      rotation: [0, 0, 0],\n      scale: [1.1, 1.1, 1.1],\n      visible: false,\n      actions: [],\n      description: `<iframe\n          style=\"\n            width: 100%;\n            height: 100%;\n            border:none;\"\n          src=\"${process.env.PUBLIC_URL}/templates/white-tower.html\"></iframe>`\n    },\n    // {\n    //   type: \"model\",\n    //   url: process.env.PUBLIC_URL + \"/tree-green.fbx\",\n    //   position: [0, 0, 20],\n    //   rotation: [0, 0, 0],\n    //   scale: [0.1, 0.1, 0.1],\n    //   description: `<iframe\n    //         style=\"\n    //           width: 100%;\n    //           height: 100%;\n    //           border:none;\"\n    //         src=\"https://en.wikipedia.org/wiki/Tree\"></iframe>`\n    // },\n    {\n      type: \"model\",\n      ground: true,\n      selectable: false,\n      url: process.env.PUBLIC_URL + \"/white-tower-area.gltf\",\n      position: [0, 0, 0],\n      rotation: [0, 0, 0],\n      scale: [1, 1, 1],\n      description: ``\n    },\n    {\n      type: \"model\",\n      url: process.env.PUBLIC_URL + \"/Soldier.glb\",\n      position: [0, 0.4, 20],\n      rotation: [0, Math.PI, 0],\n      scale: [0.8, 0.8, 0.8],\n      actions: {\n        onLoad: {\n          animations: [\n            {\n              name: \"Idle\",\n              duration: 5000,\n              path: [[-23.45, 0.12, 25.13]]\n            }\n          ]\n        },\n        onSelect: {\n          animations: [\n            {\n              name: \"Idle\",\n              duration: Infinity,\n              path: [[30, 0, 30]],\n              lookAt: \"camera\"\n            }\n          ]\n        }\n      },\n      description: `<iframe\n          style=\"\n            width: 100%;\n            height: 100%;\n            border:none;\"\n          src=\"${process.env.PUBLIC_URL}/templates/soldier.html\"></iframe>`\n    },\n    {\n      type: \"model\",\n      url: process.env.PUBLIC_URL + \"/Soldier.glb\",\n      position: [-23.45, 0.12, 25.13],\n      rotation: [0, Math.PI, 0],\n      scale: [0.8, 0.8, 0.8],\n      actions: {\n        onLoad: {\n          animations: [\n            {\n              name: \"Idle\",\n              duration: 5000,\n              path: [[-23.45, 0.12, 25.13]]\n            },\n            {\n              name: \"Walk\",\n              path: [\n                [-23.45, 0.12, 25.13],\n                [-5.08, -0.28, 32.64],\n                [18.89, -0.45, 28.14],\n                [31.23, -0.27, 8.53],\n                [32.32, 0.49, -15.25],\n                [13.63, 0.99, -36.69],\n                [-9.23, 1.41, -27.81],\n                [-20.42, 1.41, -19.05],\n                [-27.09, 1.36, -9.68],\n                [-32.47, 1.28, 0.26],\n                [-30.55, 1.16, 6.46],\n                [-26.03, 0.26, 21.47],\n                [-23.45, 0.12, 25.13]\n              ],\n              speed: 5,\n              speedUnit: \"km/h\"\n            },\n            {\n              name: \"Run\",\n              path: [\n                [-23.45, 0.12, 25.13],\n                [-5.08, -0.28, 32.64],\n                [18.89, -0.45, 28.14],\n                [31.23, -0.27, 8.53],\n                [32.32, 0.49, -15.25],\n                [13.63, 0.99, -36.69],\n                [-9.23, 1.41, -27.81],\n                [-20.42, 1.41, -19.05],\n                [-27.09, 1.36, -9.68],\n                [-32.47, 1.28, 0.26],\n                [-30.55, 1.16, 6.46],\n                [-26.03, 0.26, 21.47],\n                [-23.45, 0.12, 25.13]\n              ],\n              speed: 10,\n              speedUnit: \"km/h\"\n            }\n          ]\n        },\n        onSelect: {\n          animations: [\n            {\n              name: \"Idle\",\n              duration: Infinity,\n              path: [[30, 0, 30]],\n              lookAt: \"camera\"\n            }\n          ]\n        }\n      },\n      description: `<iframe\n          style=\"\n            width: 100%;\n            height: 100%;\n            border:none;\"\n          src=\"${process.env.PUBLIC_URL}/templates/soldier.html\"></iframe>`\n    }\n  ],\n  meta: {\n    authors: [\n      { firstName: \"Konstantinos\", lastName: \"Evanggelidis\" },\n      { firstName: \"Theofilos\", lastName: \"Papadopoulos\" }\n    ],\n    thumbnail: `${process.env.PUBLIC_URL}/worldOne-Thumbnail.png`,\n    coordinates: []\n  }\n};\n","import { fromLonLat } from \"ol/proj.js\";\nimport { loadGLTFModel, loadFBXModel } from \"../helpers/loaders\";\nimport worldData from \"../testFiles/worldOne.js\";\nimport * as THREE from \"three\";\n\nconst loader = {\n  gltf: loadGLTFModel,\n  glb: loadGLTFModel,\n  fbx: loadFBXModel\n};\nexport default async (context, selectModel) => {\n  // const towerlocationConvert = fromLonLat([40.626374, 22.948324, 15.25]);\n  // const treelocationConvert = fromLonLat([40.62626, 22.947929, 15.25]);\n  // const userConvert = fromLonLat([40.626288, 22.947957, 15.25]);\n\n  function get_url_extension(url) {\n    return url\n      .split(/[#?]/)[0]\n      .split(\".\")\n      .pop()\n      .trim();\n  }\n  const readWorldData = data => {\n    //initialize interactions\n    const { renderer, scene, camera } = window.mergin_mode;\n\n    const loadings = [];\n    window.mergin_mode.world = [];\n    for (const [index, record] of data.entries()) {\n      if (record.type === \"model\") {\n        loadings.push(\n          loader[get_url_extension(record.url)](\n            [{ url: record.url }],\n            record.position,\n            record.rotation,\n            record.scale,\n            index,\n            record.blending\n          )\n        );\n        window.mergin_mode.world.push(record);\n      }\n    }\n    return Promise.all(loadings)\n      .then(models => {\n        models.forEach(model => {\n          window.mergin_mode.world[model.referenceIndex].id = model.uuid;\n          window.mergin_mode.world[model.referenceIndex].object = model.object;\n          window.mergin_mode.scene.add(model.object);\n          // if (window.mergin_mode.world[model.referenceIndex].visible == false) {\n          //   model.object.visible = false;\n          // }\n          model.object.traverse(child => {\n            if (child.isMesh) {\n              if (\n                window.mergin_mode.world[model.referenceIndex].visible == false\n              ) {\n                child.material.opacity = 0;\n                child.material.transparent = true;\n              }\n              //hide model visibility is set to false\n\n              child.material.flatShading = false;\n              child.geometry.computeVertexNormals();\n              // child.material = window.mergin_mode.selected.material[child.uuid];\n            }\n          });\n          //check for animations and create the mixers\n          const actions =\n            window.mergin_mode.world[model.referenceIndex].actions || {};\n          if ((actions.onLoad || {}).animations) {\n            const mixer = new THREE.AnimationMixer(model.object);\n            mixer\n              .clipAction(\n                window.mergin_mode.world[\n                  model.referenceIndex\n                ].object.animations.filter(animation => {\n                  return animation.name == actions.onLoad.animations[0].name;\n                })[0]\n              )\n              .setDuration(1)\n              .play();\n            window.mergin_mode.world[model.referenceIndex].runtimeInfo = {\n              animationIndex: 0,\n              pathIndex: 0,\n              duration: 0,\n              mixer\n            };\n          }\n          if ((actions.onSelect || {}).animations) {\n            const mixer = new THREE.AnimationMixer(model.object);\n            mixer\n              .clipAction(\n                window.mergin_mode.world[\n                  model.referenceIndex\n                ].object.animations.filter(animation => {\n                  return animation.name == actions.onSelect.animations[0].name;\n                })[0]\n              )\n              .setDuration(1)\n              .play();\n            window.mergin_mode.world[\n              model.referenceIndex\n            ].selectedRuntimeInfo = {\n              animationIndex: 0,\n              pathIndex: 0,\n              duration: 0,\n              mixer\n            };\n          }\n        });\n      })\n      .catch(e => {\n        console.error(e);\n      });\n  };\n  readWorldData(worldData.content);\n};\n","import React from \"react\";\nimport Drawer from \"@material-ui/core/Drawer\";\nimport readWorldData from \"../../helpers/readWorldData\";\n\nexport default function WorldItem(props) {\n  const [state, setState] = React.useState(true);\n\n  return (\n    <React.Fragment>\n      {props.items.map(item => {\n        return (\n          <div\n            key={item.id}\n            style={{ pointerEvents: state }}\n            className=\"world-item\"\n            onClick={() => {\n              if (state) {\n                console.log(\"in\");\n                setState(false);\n                (async function() {\n                  await readWorldData();\n                })();\n              }\n            }}\n          >\n            {item.meta.thumbnail && <img src={item.meta.thumbnail} />}\n            <label>{item.name}</label>\n            <p>{item.description}</p>\n          </div>\n        );\n      })}\n    </React.Fragment>\n  );\n}\n","import React, { useRef, useState, useEffect } from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport QrReader from \"react-qr-reader\";\nimport readWorldData from \"../../helpers/readWorldData\";\n\nexport default props => {\n  const [state, setState] = React.useState(true);\n\n  const handleScan = data => {\n    console.log(data);\n    if (data) {\n      if (state) {\n        console.log(\"in\");\n        setState(false);\n        (async function() {\n          await readWorldData();\n          props.onClose();\n        })();\n      }\n      // const d = JSON.parse(data);\n      // window.mergin_mode.camera.position.set(d.x, d.y, d.z);\n      // window.mergin_mode.controls.alphaOffset = (d.heading / 180) * Math.PI;\n      // window.mergin_mode.controls.update();\n    }\n  };\n  const handleScanError = err => {\n    console.error(err);\n  };\n  return (\n    <React.Fragment>\n      <div\n        style={{\n          display: \"flex\",\n          alignItems: \"center\",\n          justifyContent: \"center\",\n          marginBottom: 25\n        }}\n      >\n        <i style={{ fontSize: 70 }} className=\"fas fa-qrcode\"></i>\n        <h2\n          style={{\n            marginLeft: 24,\n            fontWeight: 900,\n            textTransform: \"uppercase\",\n            color: \"#606059\",\n            letterSpacing: 5\n          }}\n          id=\"simple-modal-title\"\n        >\n          QR Code Scanner\n        </h2>\n      </div>\n      <p id=\"simple-modal-description\" style={{ flex: 1 }}>\n        <div style={{ height: \"calc(100% - 30px)\", position: \"relative\" }}>\n          <div className=\"scan-tip\">\n            <QrReader\n              delay={300}\n              onError={handleScanError}\n              onScan={handleScan}\n              style={{ width: \"100%\" }}\n            />\n          </div>\n        </div>\n        <div\n          style={{\n            textAlign: \"center\"\n          }}\n        >\n          <Button\n            style={{\n              fontSize: \"18px\",\n              // background: \"#2f72e8\",\n              color: \"#313129\",\n              fontWeight: 600\n            }}\n            onClick={props.onClose}\n          >\n            Close\n          </Button>\n        </div>\n      </p>\n    </React.Fragment>\n  );\n};\n","export const DescriptiveDataListener = (\n  containerRef,\n  sliderHelperRef,\n  fheight\n) => e => {\n  sliderHelperRef.current.style.height = \"100%\";\n\n  const sliderOnClick = e => {\n    containerRef.current.classList.add(\"transition\");\n    if (\n      (containerRef.current.offsetHeight / window.innerHeight).toFixed(2) ==\n      0.33\n    ) {\n      containerRef.current.style.height = \"0%\";\n    } else {\n      containerRef.current.style.height = \"33%\";\n    }\n    window.removeEventListener(\"mousemove\", resize);\n    window.removeEventListener(\"touchmove\", resize);\n\n    window.removeEventListener(\"mouseup\", mouseup);\n    window.removeEventListener(\"touchend\", mouseup);\n    setTimeout(() => {\n      containerRef.current.classList.remove(\"transition\");\n      sliderHelperRef.current.style.height = \"48px\";\n    }, 500);\n  };\n  fheight.current = {\n    height: null,\n    movementY: null,\n    previousTouchY: null,\n    previousHeight: containerRef.current.offsetHeight\n  };\n  const resize = e => {\n    fheight.current.moved = true;\n    if (typeof e.movementY === \"undefined\") {\n      fheight.current.movementY =\n        e.touches[0].pageY -\n        (fheight.current.previousTouchY || e.touches[0].pageY);\n      fheight.current.previousTouchY = e.touches[0].pageY;\n    } else {\n      fheight.current.movementY = e.movementY;\n    }\n    fheight.current.height =\n      containerRef.current.offsetHeight - fheight.current.movementY;\n    containerRef.current.style.height = `${fheight.current.height}px`;\n  };\n\n  window.addEventListener(\"mousemove\", resize);\n  window.addEventListener(\"touchmove\", resize);\n  const mouseup = () => {\n    if (!fheight.current.moved) {\n      return sliderOnClick();\n    }\n    containerRef.current.classList.add(\"transition\");\n    const diff =\n      fheight.current.previousHeight - containerRef.current.offsetHeight;\n    const currentHeight = (\n      containerRef.current.offsetHeight / window.innerHeight\n    ).toFixed(2);\n\n    if (Number(currentHeight) <= 0.33) {\n      if (diff >= 0) {\n        fheight.current.height = \"0%\";\n      } else {\n        fheight.current.height = \"33%\";\n      }\n    } else {\n      if (diff >= 0) {\n        fheight.current.height = \"33%\";\n      } else {\n        fheight.current.height = \"100%\";\n      }\n    }\n    containerRef.current.style.height = `${fheight.current.height}`;\n\n    setTimeout(() => {\n      containerRef.current.classList.remove(\"transition\");\n      sliderHelperRef.current.style.height = \"48px\";\n    }, 500);\n\n    window.removeEventListener(\"mousemove\", resize);\n    window.removeEventListener(\"touchmove\", resize);\n\n    window.removeEventListener(\"mouseup\", mouseup);\n    window.removeEventListener(\"touchend\", mouseup);\n  };\n  window.addEventListener(\"mouseup\", mouseup);\n  window.addEventListener(\"touchend\", mouseup);\n};\n","import React, { useRef, useState, useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport ActionButton from \"../_layout/ActionButton\";\nimport Modal from \"../_layout/Modal\";\nimport WorldItem from \"../_layout/WorldItem\";\nimport SideBar from \"../_layout/SideBar\";\nimport FullscreenIcon from \"@material-ui/icons/Fullscreen\";\nimport StreetviewIcon from \"@material-ui/icons/Streetview\";\nimport CropFreeIcon from \"@material-ui/icons/CropFree\";\nimport QRModal from \"../_layout/QRModal\";\nimport Button from \"@material-ui/core/Button\";\nimport { DescriptiveDataListener } from \"../../helpers/listeners\";\n\nimport worldData from \"../../testFiles/worldOne.js\";\nconst Controls = props => {\n  const sliderHelperRef = useRef();\n  const containerRef = useRef();\n  const [modalData, setModalData] = useState(null);\n  const fheight = useRef({\n    height: null,\n    movementY: null,\n    previousTouchY: null,\n    moved: false\n  });\n\n  const toggleFullscreen = () => {\n    if (!document.fullscreenElement) {\n      window.document.body.requestFullscreen().catch(err => {\n        alert(\n          `Error attempting to enable full-screen mode: ${err.message} (${err.name})`\n        );\n      });\n    } else {\n      document.exitFullscreen();\n    }\n  };\n\n  return (\n    <div id=\"controls\">\n      <img\n        id=\"logo\"\n        width={120}\n        height={(120 * 469) / 640}\n        src={process.env.PUBLIC_URL + \"/logo-transparent.png\"}\n      />\n\n      <div id=\"actions-menu\">\n        <ActionButton\n          actions={[\n            {\n              icon: (\n                <div\n                  onClick={() =>\n                    setModalData(<QRModal onClose={() => setModalData(null)} />)\n                  }\n                >\n                  <i style={{ fontSize: 18 }} className=\"fas fa-qrcode\"></i>\n                </div>\n              ),\n              name: \"QR Scan\"\n            },\n            {\n              icon: <CropFreeIcon onClick={() => toggleFullscreen()} />,\n              name: \"Full Screen\"\n            },\n            {\n              icon: (\n                <span\n                  onClick={() => {\n                    window.mergin_mode.realities.virtual();\n                  }}\n                >\n                  VR\n                </span>\n              ),\n              name: \"Virtual Reality\"\n            },\n            {\n              icon: (\n                <span\n                  onClick={() => {\n                    window.mergin_mode.realities.mixed();\n                  }}\n                >\n                  MR\n                </span>\n              ),\n              name: \"Mixed Reality\"\n            },\n            {\n              icon: (\n                <span\n                  onClick={() => {\n                    window.mergin_mode.realities.mixed();\n                  }}\n                  id=\"vrh\"\n                >\n                  VRH\n                </span>\n              ),\n              name: \"VR Headset\"\n            },\n            {\n              icon: (\n                <span\n                  onClick={() => {\n                    window.mergin_mode.realities.mixed();\n                  }}\n                  id=\"mrh\"\n                >\n                  MRH\n                </span>\n              ),\n              name: \"MR Headset\"\n            }\n          ]}\n        />\n        <div id=\"available-worlds\">\n          <WorldItem items={[worldData]} />\n        </div>\n\n        <div\n          id=\"descriptive-data-container\"\n          ref={elem => (containerRef.current = elem)}\n        >\n          <Button\n            id=\"slider-helper\"\n            onMouseDown={DescriptiveDataListener(\n              containerRef,\n              sliderHelperRef,\n              fheight\n            )}\n            onTouchStart={DescriptiveDataListener(\n              containerRef,\n              sliderHelperRef,\n              fheight\n            )}\n            ref={elem => (sliderHelperRef.current = elem)}\n          ></Button>\n          <div id=\"slider\"></div>\n          {props.descriptiveData ? (\n            <div\n              id=\"descriptive-data\"\n              dangerouslySetInnerHTML={{ __html: props.descriptiveData }}\n            ></div>\n          ) : (\n            <div id=\"descriptive-data\" style={{ overflowY: \"auto\" }}>\n              <i className=\"mm-icons far fa-comment-dots\"></i>\n              <p>Please select an object to reveal descriptive data</p>\n            </div>\n          )}\n        </div>\n        {modalData && (\n          <Modal\n            data={modalData}\n            onClose={() => {\n              setModalData(null);\n            }}\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nconst mapStateToProps = state => {\n  return {\n    descriptiveData: state.api.descriptiveData\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {};\n};\n\nControls.propTypes = {};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Controls);\n","import React, { useRef, useState, useEffect } from \"react\";\nimport \"./App.css\";\nimport World from \"./world\";\nimport Controls from \"./controls\";\nimport createWorld from \"../helpers/createWorld.js\";\nimport world from \"../testFiles/worldOne\";\n\nimport { createMuiTheme, ThemeProvider } from \"@material-ui/core/styles\";\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: \"#b34f0b\"\n    },\n    secondary: {\n      main: \"#323228\"\n    }\n  }\n});\n\nfunction App() {\n  // const [position, setPosition] = useState({ latitude: 0, longitude: 0 });\n  // const [action, setAction] = useState(\"immerse\");\n  // const [modalData, setModalData] = useState(null);\n  // const [sideBarData, setSideBarData] = useState(null);\n  // const mainRef = useRef(null);\n  // const appRef = useRef(null);\n  // const pos = useRef(position);\n  // const qrScanner = useRef({});\n\n  // useEffect(() => {\n\n  //   // navigator.geolocation.getCurrentPosition(\n  //   //   function success(position) {\n  //   //     const latitude = position.coords.latitude;\n  //   //     const longitude = position.coords.longitude;\n  //   //     pos.current = { latitude, longitude };\n  //   //     setPosition(pos.current);\n  //   //   },\n  //   //   () => {}\n  //   // );\n\n  // }, []);\n\n  // useEffect(() => {\n  //   const check = action === \"immerse\";\n  //   window.mergin_mode.scene.visible = check;\n  //   window.mergin_mode.scene.needsUpdate = true;\n  //   mainRef.current.style.display = check ? \"block\" : \"none\";\n  // }, [action]);\n  return (\n    <ThemeProvider theme={theme}>\n      <div className=\"App\">\n        <World context={world.content} />\n        <Controls />\n      </div>\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import { SET_DESCRIPTIVE_DATA } from \"../actions\";\nconst initialState = {\n  currentAction: \"immerse\",\n  descriptiveData: null\n};\nconst api = (state = initialState, action) => {\n  switch (action.type) {\n    case SET_DESCRIPTIVE_DATA:\n      const { descriptiveData } = action;\n      return Object.assign({}, state, { descriptiveData });\n    default: {\n      return state;\n    }\n  }\n};\n\nexport default api;\n","import { combineReducers } from \"redux\";\nimport api from \"./api\";\n\nwindow.mergin_mode = {\n  modelLayer: [],\n  vectors: [],\n  plane: {},\n  sky: {},\n  mixers: [],\n  camera: {},\n  controls: {},\n  scene: {},\n  renderer: {},\n  pointer: {},\n  partials: {},\n  loaders: {},\n  selected: {\n    object: null,\n    material: null\n  },\n  listeners: {\n    mouseMoved: false\n  },\n  onWindowResize: () => {}\n};\n\nconst rootReducer = combineReducers({\n  api\n});\n\nexport default rootReducer;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport \"bootstrap/dist/css/bootstrap.css\";\nimport App from \"./components/App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport { Provider } from \"react-redux\";\nimport { applyMiddleware, createStore } from \"redux\";\nimport { createLogger } from \"redux-logger\";\nimport thunkMiddleware from \"redux-thunk\";\n\nimport reducer from \"./reducers\";\n// import { fromLonLat } from \"ol/proj.js\";\n// const towerlocationConvert = fromLonLat([40.626374, 22.948324, 15.25]);\n// const treelocationConvert = fromLonLat([40.62626, 22.947929, 15.25]);\n// const userConvert = fromLonLat([40.626288, 22.947957, 15.25]);\n//\nconst rootElement = document.getElementById(\"root\");\n\nconst loggerMiddleware = createLogger({\n  // ...options\n});\n\nconst store = createStore(\n  reducer,\n  window.__REDUX_DEVTOOLS_EXTENSION__ &&\n    window.__REDUX_DEVTOOLS_EXTENSION__() /*,\n  applyMiddleware(thunkMiddleware, loggerMiddleware)*/\n);\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  rootElement\n);\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import React from \"react\";\nimport Drawer from \"@material-ui/core/Drawer\";\nconst iOS = process.browser && /iPad|iPhone|iPod/.test(navigator.userAgent);\n\nexport default function SideBar(props) {\n  const [open, setOpen] = React.useState(true);\n\n  return (\n    <div>\n      <React.Fragment key={props.anchor}>\n        <Drawer\n          disablebackdropyransition={(!iOS).toString()}\n          disablediscovery={iOS.toString()}\n          variant=\"persistent\"\n          anchor={props.anchor}\n          open={open}\n          onClose={() => setOpen(false)}\n        >\n          {props.context}\n        </Drawer>\n      </React.Fragment>\n    </div>\n  );\n}\n"],"sourceRoot":""}