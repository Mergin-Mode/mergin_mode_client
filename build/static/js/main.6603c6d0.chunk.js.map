{"version":3,"sources":["helpers/ThemeliodiProblimata.js","helpers/CalculateDeltaPosition.js","components/_layout/VRButton.js","helpers/createWorld.js","actions/index.js","components/world/index.js","helpers/listeners.js","components/_layout/ActionButton.js","components/_layout/Modal.js","helpers/loaders.js","helpers/readWorldData.js","components/_layout/WorldItem.js","components/_layout/QRModal.js","components/controls/index.js","components/App.js","serviceWorker.js","reducers/api.js","testFiles/worldOne.js","testFiles/worldTwo.js","testFiles/worldThree.js","reducers/index.js","index.js"],"names":["ThemeliodesProblima_1","Xa","Ya","Sab","Gab","Xb","Math","sin","Yb","cos","ThemeliodesProblima_2","absDX","abs","absDY","sqrt","pow","DX","DY","theta","atan","Number","toFixed","origin","THREE","direcition","raycaster","CalculateTransformation","timeDelta","model","object","position","x","z","action","window","mergin_mode","selected","uuid","id","actions","onSelect","onLoad","runtimeInfo","selectedRuntimeInfo","camera","rotate","rotation","set","currentAnimation","animations","animationIndex","duration","lastUpdate","length","pathIndex","mixer","stopAllAction","clipAction","children","filter","animation","name","setDuration","singleLoopDuration","play","currentPath","path","center","speed","start","TotalSab","reduce","a","b","i","newZ","point","targetReference","offset","posXY","dynamicHeight","y","world","currentWorldId","ground","intersectObjects","Zdif","percentage","VRButton","renderer","button","type","showWebXRNotFound","style","textDecoration","pointerEvents","onclick","navigator","xr","isSessionSupported","then","supported","currentSession","onSessionStarted","session","addEventListener","onSessionEnded","setSession","removeEventListener","textContent","requestSession","optionalFeatures","end","showEnterVR","message","document","createElement","href","isSecureContext","innerHTML","left","width","mobileCheck","PI","check","userAgent","vendor","opera","test","substr","createWorld","controls","scene","pointer","partials","loaders","rendererContainer","selectModel","FBXLoader","GLTFLoader","clock","host","getElementById","video","getElementsByTagName","texture","minFilter","magFilter","format","enabled","physicallyCorrectLights","gammaOutput","setPixelRatio","devicePixelRatio","setSize","clientWidth","clientHeight","sortObjects","appendChild","domElement","setFocalLength","realities","virtual","setClearColor","background","undefined","augmented","mixed","DeviceOrientationControls","OrbitControls","enableDamping","dampingFactor","screenSpacePanning","minDistance","maxDistance","rotateSpeed","panSpeed","zoomSpeed","geometry","g","pos","getAttribute","pa","array","j","needsUpdate","computeVertexNormals","generateTerrain","material","wireframe","color","side","flatShading","plane","castShadow","receiveShadow","rotateX","light","channel","add","dirLight","shadowCameraVisible","dirLight1","sky","opacity","transparent","alphaTest","mouse","getParentElement","map","obj","indexOf","parent","onWindowResize","aspect","updateProjectionMatrix","setAnimationLoop","update","TWEEN","render","delta","getDelta","forEach","worldModel","transormation","smoothRotation","Tween","to","easing","Easing","Quadratic","InOut","objectHelper","event","listeners","mouseMoved","remove","rect","getBoundingClientRect","clientX","changedTouches","clientY","top","height","setFromCamera","intersects","record","selectable","e","console","error","vrh","mrh","prototype","load2","files","callback","scope","this","file","reader","FileReader","onload","target","readyState","status","parse","result","responseText","readAsArrayBuffer","connect","state","api","dispatch","setDescriptiveData","context","descriptiveData","props","useEffect","mediaDevices","getUserMedia","facingMode","response","srcObject","mixers","newWorld","o","description","classList","setTimeout","display","autoPlay","playsInline","DescriptiveDataListener","containerRef","sliderHelperRef","fheight","current","sliderOnClick","offsetHeight","innerHeight","resize","mouseup","movementY","previousTouchY","previousHeight","moved","touches","pageY","diff","currentHeight","classes","makeStyles","theme","root","transform","flexGrow","flex","zIndex","speedDial","bottom","spacing","right","whiteSpace","outline","useStyles","React","useState","open","setOpen","handleClose","className","Backdrop","SpeedDial","ariaLabel","icon","SpeedDialIcon","onClose","onOpen","SpeedDialAction","key","tooltipTitle","tooltipOpen","onClick","paper","fontFamily","backgroundColor","palette","border","boxShadow","shadows","padding","borderRadius","flexFlow","body","data","Modal","aria-labelledby","aria-describedby","loadGLTFModel","referenceIndex","scale","scaleDifferenceXY","scaleDifferenceZ","url","blending","loader","dracoLoader","DRACOLoader","setDRACOLoader","Promise","resolve","reject","load","gltf","group","traverse","child","isMesh","frustumCulled","Array","new_mesh","InstancedGroupMesh","p","rot","axisX","axisY","axisZ","rotateOnWorldAxis","random","randomXY","randomZ","sca","updateMatrix","setMatrixAt","matrix","renderOrder","glb","fbx","worldId","get_url_extension","split","pop","trim","fromLonLat","meta","coordinates","content","loadings","entries","index","push","all","models","visible","anim","theAnimation","catch","readWorldData","worlds","w","WorldItem","selectedId","setState","Fragment","item","hasOwnProperty","thumbnail","src","sty","objectFit","QRModal","handleScan","d","JSON","dir","sph","getWorldDirection","setFromVector3","heading","radToDeg","alphaOffset","alignItems","justifyContent","marginBottom","fontSize","marginLeft","fontWeight","textTransform","letterSpacing","delay","onError","err","onScan","textAlign","onChange","observationId","value","Button","observationPoints","op","pointId","stringify","direction","useRef","geolocation","calibration","modalData","setModalData","infoState","setInfoState","showInfo","setShowInfo","worldActions","options","latitude","longitude","enableHighAccuracy","timeout","maximumAge","watchPosition","coords","newPos","cameraX","cameraZ","cameraY","distance","alert","clearWatch","warn","code","setInterval","cx","cy","cz","locomotionMode","setLocomotionMode","move","moveInterval","eventOrLoopOrSomething","addScaledVector","ActionButton","fullscreenElement","exitFullscreen","requestFullscreen","Box","gap","cursor","size","baseColor","stickColor","clearInterval","stop","ref","elem","onMouseDown","onTouchStart","run","dangerouslySetInnerHTML","__html","overflowY","createMuiTheme","primary","main","secondary","App","ThemeProvider","Boolean","location","hostname","match","initialState","currentAction","Object","assign","fov","refId","process","speedUnit","Infinity","lookAt","authors","firstName","lastName","modelLayer","vectors","worldDataOne","worldDataTwo","worldDataThree","rootReducer","combineReducers","rootElement","store","createLogger","createStore","reducer","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.6603c6d0.chunk.js","sourcesContent":["import * as THREE from \"three\";\nconst rad2Grad = 63.6619772367581; // 1 rad ~= 63 grads\n\nexport const ThemeliodesProblima_1 = (Xa, Ya, Sab, Gab) => {\n  const Xb = Xa + Sab * Math.sin(Gab / rad2Grad);\n  const Yb = Ya + Sab * Math.cos(Gab / rad2Grad);\n  return { Xb: Xb, Yb: Yb };\n};\n\nexport const calculateSab = (Xa, Ya, Xb, Yb) => {\n  const absDX = Math.abs(Xb - Xa);\n  const absDY = Math.abs(Yb - Ya);\n  const Sab = Math.sqrt(Math.pow(absDX, 2) + Math.pow(absDY, 2));\n  return Number(Sab.toFixed(4));\n};\n\nexport const ThemeliodesProblima_2 = (Xa, Ya, Xb, Yb) => {\n  const absDX = Math.abs(Xb - Xa);\n  const absDY = Math.abs(Yb - Ya);\n  const Sab = Math.sqrt(Math.pow(absDX, 2) + Math.pow(absDY, 2));\n\n  const DX = Xb - Xa;\n  const DY = Yb - Ya;\n  const theta = Math.atan(absDX / absDY) * rad2Grad; //http://www.translatorscafe.com/cafe/EN/units-converter/angle/2-3/radian-grad/\n  let Gab;\n  if (DX > 0 && DY > 0) {\n    Gab = theta;\n  } else if (DX > 0 && DY < 0) {\n    Gab = 200 - theta;\n  } else if (DX < 0 && DY < 0) {\n    Gab = 200 + theta;\n  } else if (DX < 0 && DY > 0) {\n    Gab = 400 - theta;\n  } else if (DX === 0 && DY > 0) {\n    Gab = 0;\n  } else if (DX === 0 && DY < 0) {\n    Gab = 200;\n  } else if (DX > 0 && DY === 0) {\n    Gab = 100;\n  } else if (DX < 0 && DY === 0) {\n    Gab = 300;\n  } else if (DX === 0 && DY === 0) {\n    Gab = 0;\n  }\n  return { Gab: Number(Gab.toFixed(4)), Sab: Number(Sab.toFixed(4)) };\n};\nconst origin = new THREE.Vector3();\nconst direcition = new THREE.Vector3(0, -1, 0);\nconst raycaster = new THREE.Raycaster();\n\nexport const CalculateZ = (point, targetReference, offset) => {\n  origin.set(point.x, point.y + offset, point.z);\n  raycaster.set(origin, direcition);\n  const intersects = raycaster.intersectObjects(targetReference.children, true);\n  const newY = ((intersects[0] || {}).point || {}).y;\n  // if (Math.abs(Math.abs(point.y) - Math.abs(newY)) > 0.3) {\n  //   debugger;\n  // }\n  return newY || 0;\n};\n","import {\n  ThemeliodesProblima_1,\n  ThemeliodesProblima_2,\n  CalculateZ\n} from \"./ThemeliodiProblimata\";\n// import { AnimationMixer } from \"three\";\nimport { posZ } from \"./computeZ\";\n\nconst gradToRad = 63.661977236758;\nexport const CalculateTransformation = (timeDelta, model) => {\n  const Xa = Number(model.object.position.x.toFixed(4));\n  const Ya = Number(model.object.position.z.toFixed(4));\n  const action =\n    window.mergin_mode.selected.object?.uuid == model.id\n      ? model.actions.onSelect\n      : model.actions.onLoad;\n  const runtimeInfo =\n    window.mergin_mode.selected.object?.uuid == model.id\n      ? model.selectedRuntimeInfo\n      : model.runtimeInfo;\n\n  //if action is onSelect target camera\n  if (model.actions.onSelect === action) {\n    const Gab = Number(\n      ThemeliodesProblima_2(\n        model.object.position.x,\n        model.object.position.z,\n        window.mergin_mode.camera.position.x,\n        window.mergin_mode.camera.position.z\n      ).Gab\n    );\n    const rotate = Gab ? Gab / gradToRad : 0;\n    model.object.rotation.set(\n      model.rotation[0],\n      model.rotation[1] + rotate,\n      model.rotation[2]\n    );\n  }\n\n  const currentAnimation = action.animations[runtimeInfo.animationIndex];\n\n  runtimeInfo.duration += timeDelta;\n  runtimeInfo.lastUpdate += timeDelta;\n  if (currentAnimation.duration) {\n    if (runtimeInfo.duration >= currentAnimation.duration / 1000) {\n      //check if animation has other path to animate\n      runtimeInfo.duration = 0;\n      runtimeInfo.lastUpdate = 0;\n      if (action.animations.length - 1 > runtimeInfo.animationIndex) {\n        runtimeInfo.animationIndex++;\n        runtimeInfo.pathIndex = 0;\n        const mixer = runtimeInfo.mixer;\n        mixer.stopAllAction();\n\n        mixer\n          .clipAction(\n            model.object.children[0].animations.filter(animation => {\n              return (\n                animation.name ==\n                action.animations[runtimeInfo.animationIndex].name\n              );\n            })[0]\n          )\n          .setDuration((currentAnimation.singleLoopDuration || 1000) / 1000)\n          .play();\n      }\n      // restart animation\n      else {\n        runtimeInfo.animationIndex = 0;\n        runtimeInfo.pathIndex = 0;\n        const mixer = runtimeInfo.mixer;\n        mixer.stopAllAction();\n        mixer\n          .clipAction(\n            model.object.children[0].animations.filter(animation => {\n              return (\n                animation.name ==\n                action.animations[runtimeInfo.animationIndex].name\n              );\n            })[0]\n          )\n          .setDuration((currentAnimation.singleLoopDuration || 1000) / 1000)\n          .play();\n        // runtimeInfo.mixer = mixer;\n      }\n    }\n    return false;\n  }\n\n  const currentPath = currentAnimation.path[runtimeInfo.pathIndex];\n  const Xb = Number((currentPath[0] - window.mergin_mode.center[0]).toFixed(4));\n  const Yb = Number((currentPath[2] - window.mergin_mode.center[2]).toFixed(4));\n\n  const Sab = ((timeDelta * currentAnimation.speed) / 60 / 60) * 1000; //distance in meters per second (50km/h)\n  const start = currentAnimation.path[runtimeInfo.pathIndex - 1]\n    ? currentAnimation.path[runtimeInfo.pathIndex - 1]\n    : currentAnimation.path[runtimeInfo.pathIndex];\n  const { Gab, Sab: TotalSab } = ThemeliodesProblima_2(\n    start[0] - window.mergin_mode.center[0],\n    start[2] - window.mergin_mode.center[2],\n    Xb,\n    Yb\n  );\n  if (\n    (Gab <= 100 && Xa >= Xb && Ya >= Yb) ||\n    (Gab > 100 && Gab <= 200 && Xa >= Xb && Ya <= Yb) ||\n    (Gab > 200 && Gab <= 300 && Xa <= Xb && Ya <= Yb) ||\n    (Gab > 300 && Xa <= Xb && Ya >= Yb)\n  ) {\n    //check if animation has other path to animate\n    if (currentAnimation.path.length - 1 > runtimeInfo.pathIndex) {\n      runtimeInfo.pathIndex++;\n      runtimeInfo.duration = 0;\n      runtimeInfo.lastUpdate = 0;\n    }\n    //check if model has other animations\n    else if (action.animations.length - 1 > runtimeInfo.animationIndex) {\n      runtimeInfo.animationIndex++;\n      runtimeInfo.pathIndex = 0;\n      runtimeInfo.duration = 0;\n      runtimeInfo.lastUpdate = 0;\n      const mixer = runtimeInfo.mixer;\n      mixer.stopAllAction();\n\n      mixer\n        .clipAction(\n          model.object.children[0].animations.filter(animation => {\n            return (\n              animation.name ==\n              action.animations[runtimeInfo.animationIndex].name\n            );\n          })[0]\n        )\n        .setDuration((currentAnimation.singleLoopDuration || 1000) / 1000)\n\n        .play();\n      // runtimeInfo.mixer = mixer;\n    }\n    // restart animation\n    else {\n      runtimeInfo.animationIndex = 0;\n      runtimeInfo.pathIndex = 0;\n      runtimeInfo.duration = 0;\n      runtimeInfo.lastUpdate = 0;\n      const mixer = runtimeInfo.mixer;\n      mixer.stopAllAction();\n      mixer\n        .clipAction(\n          model.object.children[0].animations.filter(animation => {\n            return (\n              animation.name ==\n              action.animations[runtimeInfo.animationIndex].name\n            );\n          })[0]\n        )\n        .setDuration((currentAnimation.singleLoopDuration || 1000) / 1000)\n\n        .play();\n      // runtimeInfo.mixer = mixer;\n    }\n\n    const newPosition = action.animations[runtimeInfo.animationIndex].path[\n      runtimeInfo.pathIndex - 1\n    ]\n      ? action.animations[runtimeInfo.animationIndex].path[\n          runtimeInfo.pathIndex - 1\n        ]\n      : action.animations[runtimeInfo.animationIndex].path[\n          runtimeInfo.pathIndex\n        ];\n    // const rotate = Gab ? Gab / gradToRad : 0;\n    return {\n      position: newPosition.reduce(\n        (a, b, i) => [...a, b - window.mergin_mode.center[i]],\n        []\n      )\n    };\n  }\n\n  const posXY = ThemeliodesProblima_1(Xa, Ya, Sab, Gab);\n  let newZ;\n  if (currentAnimation.dynamicHeight) {\n    runtimeInfo.lastUpdate = 0;\n    newZ = CalculateZ(\n      { x: posXY.Xb, z: posXY.Yb, y: model.object.position.y },\n      window.mergin_mode.world[window.mergin_mode.currentWorldId].filter(\n        model => model.ground == true\n      )[0].object,\n      3\n    );\n  } else {\n    const nextPath = currentAnimation.path[runtimeInfo.pathIndex];\n    const Zdif = nextPath[1] - start[1];\n    const currentSab = ThemeliodesProblima_2(\n      start[0] - window.mergin_mode.center[0],\n      start[2] - window.mergin_mode.center[2],\n      model.object.position.x,\n      model.object.position.z\n    ).Sab;\n    const percentage = currentSab / TotalSab;\n    // newZ = model.object.position.y;\n    newZ = start[1] - window.mergin_mode.center[1] + Zdif * percentage;\n  }\n\n  // if (Math.abs(newZ) - Math.abs(model.object.position.y) > 0.3) {\n  //   console.log(newZ.toFixed(2));\n  //   debugger;\n  // }\n  const rotate = Gab ? Gab / gradToRad : 0;\n  return {\n    position: [posXY.Xb, newZ, posXY.Yb],\n    rotation: [model.rotation[0], model.rotation[1] + rotate, model.rotation[2]]\n  };\n};\n\nexport const CalculateDeltaRotation = (\n  Xa,\n  Ya,\n  Za,\n  Xb,\n  Yb,\n  Zb,\n  Gab,\n  Sab,\n  rotX,\n  rotY\n) => {\n  const DZ = Zb - Za;\n  const XYkathetis = ThemeliodesProblima_1(Xb, Yb, Sab, Gab + 100);\n  const Xkathetis = XYkathetis.Xb;\n  const Ykathetis = XYkathetis.Yb;\n  const Zkathetis = posZ(Xkathetis, Ykathetis);\n  const DZkathetis = Zb - Zkathetis;\n\n  let RotationX = 0;\n  let RotationY = 0;\n\n  if (DZ < 0 || DZ > 0) {\n    RotationX = Math.atan(DZ / Sab);\n    RotationY = Math.atan(DZkathetis / Sab);\n  }\n\n  const DRotationX = rotX - RotationX;\n  const DRotationY = rotY - RotationY;\n\n  return {\n    x: Number(DRotationX),\n    y: Number(DRotationY)\n  };\n};\n","/**\n * @author mrdoob / http://mrdoob.com\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nconst VRButton = {\n  createButton: function(renderer, button, type) {\n    // if (options && options.referenceSpaceType) {\n    //   renderer.xr.setReferenceSpaceType(options.referenceSpaceType);\n    // }\n    function showEnterVR(/*device*/) {\n      let currentSession = null;\n\n      function onSessionStarted(session) {\n        session.addEventListener(\"end\", onSessionEnded);\n\n        renderer.xr.setSession(session);\n        // button.textContent = \"EXIT VR\";\n\n        currentSession = session;\n      }\n\n      function onSessionEnded(/*event*/) {\n        currentSession.removeEventListener(\"end\", onSessionEnded);\n\n        button.textContent = \"ENTER VR\";\n\n        currentSession = null;\n      }\n\n      //\n\n      // button.style.display = \"\";\n\n      // button.style.cursor = \"pointer\";\n      // button.style.left = \"calc(50% - 50px)\";\n      // button.style.width = \"100px\";\n\n      // button.textContent = \"ENTER VR\";\n\n      // button.onmouseenter = function() {\n      //   // button.style.opacity = \"1.0\";\n      // };\n\n      // button.onmouseleave = function() {\n      //   // button.style.opacity = \"0.5\";\n      // };\n\n      button.onclick = function() {\n        if (currentSession === null) {\n          // WebXR's requestReferenceSpace only works if the corresponding feature\n          // was requested at session creation time. For simplicity, just ask for\n          // the interesting ones as optional features, but be aware that the\n          // requestReferenceSpace call will fail if it turns out to be unavailable.\n          // ('local' is always available for immersive sessions and doesn't need to\n          // be requested separately.)\n\n          const sessionInit = {\n            optionalFeatures: [\"local-floor\", \"bounded-floor\"],\n          };\n          navigator.xr.requestSession(type, sessionInit).then(onSessionStarted);\n        } else {\n          currentSession.end();\n        }\n      };\n    }\n\n    function disableButton() {\n      button.style.textDecoration = \"line-through \";\n      button.style.pointerEvents = \"none\";\n      // button.style.cursor = \"auto\";\n      // button.style.left = \"calc(50% - 75px)\";\n      // button.style.width = \"150px\";\n\n      // button.onmouseenter = null;\n      // button.onmouseleave = null;\n\n      button.onclick = null;\n    }\n\n    function showWebXRNotFound() {\n      disableButton();\n\n      button.style.textDecoration = \"line-through\";\n      button.style.pointerEvents = \"none\";\n      // button.textContent = \"VR NOT SUPPORTED\";\n    }\n\n    function stylizeElement(element) {\n      // element.style.position = \"absolute\";\n      // element.style.bottom = \"20px\";\n      // element.style.padding = \"12px 6px\";\n      // element.style.border = \"1px solid #fff\";\n      // element.style.borderRadius = \"4px\";\n      // element.style.background = \"rgba(0,0,0,0.1)\";\n      // element.style.color = \"#fff\";\n      // element.style.font = \"normal 13px sans-serif\";\n      // element.style.textAlign = \"center\";\n      // element.style.opacity = \"0.5\";\n      // element.style.outline = \"none\";\n      // element.style.zIndex = \"999\";\n    }\n\n    if (\"xr\" in navigator) {\n      // button.style.display = \"none\";\n\n      // stylizeElement(button);\n\n      navigator.xr.isSessionSupported(\"immersive-vr\").then(function(supported) {\n        supported ? showEnterVR() : showWebXRNotFound();\n      });\n\n      return button;\n    } else {\n      const message = document.createElement(\"a\");\n      message.href = \"https://immersiveweb.dev/\";\n\n      if (window.isSecureContext === false) {\n        message.innerHTML = \"WEBXR NEEDS HTTPS\"; // TODO Improve message\n      } else {\n        message.innerHTML = \"WEBXR NOT AVAILABLE\";\n      }\n\n      message.style.left = \"calc(50% - 90px)\";\n      message.style.width = \"180px\";\n      message.style.textDecoration = \"none\";\n\n      stylizeElement(message);\n\n      return message;\n    }\n  },\n};\n\nexport { VRButton };\n","import * as THREE from \"three\";\n// import { TrackballControls } from 'three/examples/jsm/controls/TrackballControls.js';\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls.js\";\nimport { DeviceOrientationControls } from \"three/examples/jsm/controls/DeviceOrientationControls.js\";\nimport { FBXLoader } from \"three/examples/jsm/loaders/FBXLoader.js\";\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader.js\";\nimport { CalculateTransformation } from \"./CalculateDeltaPosition\";\nimport { calculateSab } from \"./ThemeliodiProblimata\";\nimport TWEEN from \"@tweenjs/tween.js\";\nimport { VRButton } from \"../components/_layout/VRButton.js\";\n\n// var modelName = \"models/gltf/\" + model.name + \".glb\";\nconst degtorad = Math.PI / 180; // Degree-to-Radian conversion\nconst mobileCheck = function() {\n  let check = false;\n  (function(a) {\n    if (\n      /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(\n        a\n      ) ||\n      /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(\n        a.substr(0, 4)\n      )\n    )\n      check = true;\n  })(navigator.userAgent || navigator.vendor || window.opera);\n  return check;\n};\nconst isMobile = mobileCheck();\nGLTFLoader.prototype.load2 = function(files, callback) {\n  const scope = this;\n  const file = files[0];\n\n  const reader = new FileReader();\n\n  reader.onload = function(event) {\n    if (event.target.readyState === 2 || event.target.status === 0) {\n      scope.parse(\n        event.target.result || event.target.responseText,\n        \"\",\n        callback\n      );\n    } else {\n    }\n  };\n  reader.readAsArrayBuffer(file);\n};\nFBXLoader.prototype.load2 = function(files, callback) {\n  const scope = this;\n  const file = files[0];\n\n  const reader = new FileReader();\n\n  reader.onload = function(event) {\n    if (event.target.readyState === 2 || event.target.status === 0) {\n      const geometry = scope.parse(\n        event.target.result || event.target.responseText\n      );\n\n      if (callback) callback(geometry);\n    } else {\n      // scope.dispatchEvent({type: 'error', message: 'Couldn\\'t load URL [' + url + ']', response: event.target.readyState});\n    }\n  };\n\n  reader.readAsArrayBuffer(file);\n};\n\nexport default function createWorld(\n  camera,\n  controls,\n  scene,\n  renderer,\n  pointer,\n  partials,\n  loaders,\n  rendererContainer,\n  mixer,\n  selectModel\n) {\n  loaders.FBXLoader = FBXLoader;\n  loaders.GLTFLoader = GLTFLoader;\n  const clock = new THREE.Clock();\n\n  const host = document.getElementById(\"three-map\");\n\n  const generateTerrain = (g /*,m, e*/) => {\n    const pos = g.getAttribute(\"position\");\n    const pa = pos.array;\n\n    for (let j = 2, i = 0; j < pa.length; j += 3, i++) {\n      pa[j] = 0;\n    }\n    pos.needsUpdate = true;\n    g.computeVertexNormals();\n  };\n\n  scene = new THREE.Scene();\n\n  const video = document.getElementsByTagName(\"video\")[0];\n  const texture = new THREE.VideoTexture(video);\n  texture.minFilter = THREE.LinearFilter;\n  texture.magFilter = THREE.LinearFilter;\n  texture.format = THREE.RGBFormat;\n\n  renderer = new THREE.WebGLRenderer();\n  renderer.xr.enabled = true;\n  renderer.physicallyCorrectLights = true;\n  renderer.gammaOutput = true;\n\n  renderer.setPixelRatio(window.devicePixelRatio);\n  renderer.setSize(host.clientWidth, host.clientHeight);\n  renderer.sortObjects = false;\n\n  host.appendChild(renderer.domElement);\n  camera = new THREE.PerspectiveCamera(\n    45,\n    host.clientWidth / host.clientHeight,\n    0.01,\n    1000\n  );\n  camera.setFocalLength = 26;\n  window.mergin_mode.realities = {\n    virtual: () => {\n      renderer.setClearColor(\"#4285f4\", 1);\n      //remove mixed objects\n      scene.background = undefined;\n      // if (!mobileCheck()) {\n      //   camera.position.set(-15.08, +1.7, +52.64);\n      // }\n    },\n    augmented: () => {\n      // scene.background = texture;\n\n      renderer.setClearColor(0x000000, 0);\n      // if (!mobileCheck()) {\n      //   camera.position.set(-15.08, +1.7, +52.64);\n      // }\n    },\n    mixed: () => {\n      scene.background = texture;\n      renderer.setClearColor(0x000000, 0);\n      // if (!mobileCheck()) {\n      //   // scene.position.set(0, 0, 0);\n      //   // camera.position.set(-15.08, +1.7, +52.64);\n      // }\n    },\n  };\n  window.mergin_mode.realities.virtual();\n  // camera.up.set(0, 0, 1);\n  if (mobileCheck()) {\n    controls = new DeviceOrientationControls(camera);\n  } else {\n    controls = new OrbitControls(camera, renderer.domElement);\n  }\n  controls.enableDamping = false; // an animation loop is required when either damping or auto-rotation are enabled\n  controls.dampingFactor = 0.05;\n  controls.screenSpacePanning = false;\n  controls.minDistance = 1;\n  controls.maxDistance = 1000000;\n  // controls.maxPolarAngle = Math.PI / 2;\n  controls.rotateSpeed = 0.8;\n  controls.panSpeed = 0.8;\n  controls.zoomSpeed = 0.8;\n\n  // world\n  const geometry = new THREE.PlaneBufferGeometry(100, 100, 99, 99);\n\n  generateTerrain(geometry);\n\n  const material = new THREE.MeshPhongMaterial({\n    wireframe: true,\n    color: \"#222\",\n    side: THREE.DoubleSide,\n  });\n\n  material.flatShading = true;\n\n  const plane = new THREE.Mesh(geometry, material);\n  plane.position.set(0, 0, 0);\n  plane.castShadow = false;\n  plane.receiveShadow = false;\n  plane.geometry.rotateX(Math.PI / 2);\n\n  // scene.add(plane);\n\n  const gridHelper = new THREE.GridHelper(1000, 100);\n  // gridHelper.geometry.rotateX(Math.PI / 2);\n\n  // // scene.add(gridHelper);\n  const light = new THREE.AmbientLight(0xffffff, 1); // soft white light\n  light.channel = 123;\n  scene.add(light);\n\n  // const hemiLight = new THREE.HemisphereLight(0xffffff, 0xffffff, 1);\n  // hemiLight.color.setHSL(0.6, 0.5, 0.75);\n  // hemiLight.groundColor.setHSL(0.095, 0.5, 0.5);\n  // hemiLight.position.set(0, 0, 50);\n  // scene.add(hemiLight);\n\n  const dirLight = new THREE.DirectionalLight(0xffffff, 1);\n  window.dirLight = dirLight;\n  dirLight.position.set(20, 10, 20);\n  dirLight.name = \"dirlight\";\n  dirLight.shadowCameraVisible = true;\n\n  // const helper = new THREE.DirectionalLightHelper(dirLight, 5);\n  // scene.add(helper);\n  scene.add(dirLight);\n\n  const dirLight1 = new THREE.DirectionalLight(0xffffff, 1);\n  window.dirLight1 = dirLight1;\n  dirLight1.position.set(-17, 10, -31);\n  dirLight1.name = \"dirlight1\";\n  dirLight1.shadowCameraVisible = true;\n  // const helper1 = new THREE.DirectionalLightHelper(dirLight1, 2);\n  // scene.add(helper1);\n  scene.add(dirLight1);\n\n  // dirLight.castShadow = false;\n\n  pointer = new THREE.Mesh(\n    new THREE.SphereGeometry(0.5, 32, 32),\n    new THREE.MeshBasicMaterial({ color: \"red\" })\n  );\n\n  const sky = new THREE.Mesh(\n    new THREE.SphereGeometry(150, 32, 32),\n    new THREE.MeshBasicMaterial({\n      opacity: 0,\n      transparent: true,\n      alphaTest: 0.05,\n      side: THREE.DoubleSide,\n    })\n  );\n  scene.add(sky);\n\n  const raycaster = new THREE.Raycaster();\n  const mouse = new THREE.Vector2();\n  const getParentElement = (object) => {\n    if (\n      !object ||\n      !window.mergin_mode.world[window.mergin_mode.currentWorldId]\n    ) {\n      return false;\n    }\n    const allIds = window.mergin_mode.world[\n      window.mergin_mode.currentWorldId\n    ].map((obj) => obj.id);\n    if (allIds.indexOf(object.uuid) !== -1) {\n      return object;\n    }\n    return getParentElement(object.parent);\n  };\n  const moved = false;\n\n  function onMouseClick(event) {\n    try {\n      if (window.mergin_mode.listeners.mouseMoved) return true;\n      if (window.mergin_mode.selected.object) {\n        scene.remove(window.mergin_mode.selected.objectHelper);\n        // window.mergin_mode.selected.object.traverse(child => {\n        //   if (child.isMesh) {\n        //     child.material.color.setHex(\n        //       window.mergin_mode.selected.material[child.uuid]\n        //     );\n        //     // child.material = window.mergin_mode.selected.material[child.uuid];\n        //   }\n        // });\n        window.mergin_mode.selected.object = null;\n        window.mergin_mode.selected.material = null;\n      }\n      const rect = renderer.domElement.getBoundingClientRect();\n      mouse.x =\n        (((event.clientX || event.changedTouches[0].clientX) - rect.left) /\n          rect.width) *\n          2 -\n        1;\n      mouse.y =\n        -(\n          ((event.clientY || event.changedTouches[0].clientY) - rect.top) /\n          rect.height\n        ) *\n          2 +\n        1;\n      raycaster.setFromCamera(mouse, camera);\n      const intersects = raycaster.intersectObjects(scene.children, true);\n      let obj;\n      for (const record of intersects) {\n        obj = getParentElement(record?.object);\n        if (obj) {\n          //check if obj is selectable\n          const referenceObj = window.mergin_mode.world[\n            window.mergin_mode.currentWorldId\n          ].filter((model) => model.id == obj.uuid)[0];\n          if (referenceObj.selectable !== false) {\n            break;\n          }\n        }\n      }\n      if (!obj) {\n        selectModel(null);\n        return false;\n      }\n      const material = new THREE.MeshPhongMaterial({\n        color: \"#b34f0b\",\n        side: THREE.DoubleSide,\n      });\n      window.mergin_mode.selected.object = obj;\n      window.mergin_mode.selected.objectHelper = new THREE.BoxHelper(obj);\n      window.mergin_mode.selected.objectHelper.material.color.set(0xffffff);\n      scene.add(window.mergin_mode.selected.objectHelper);\n      // obj.traverse(child => {\n      //   if (child.isMesh) {\n      //     window.mergin_mode.selected.material[\n      //       child.uuid\n      //     ] = child.material.color.getHex();\n      //     child.material.color.setHex(0xff0000);\n      //   }\n      // });\n      scene.add(window.mergin_mode.selected.objectHelper);\n      const model = window.mergin_mode.world[\n        window.mergin_mode.currentWorldId\n      ].filter((model) => model.id == obj.uuid)[0];\n      const runtimeInfo = model.selectedRuntimeInfo;\n      if (runtimeInfo) {\n        runtimeInfo.animationIndex = 0;\n        runtimeInfo.pathIndex = 0;\n        runtimeInfo.duration = 0;\n        const mixer = new THREE.AnimationMixer(obj);\n        mixer\n          .clipAction(\n            obj.animations.filter((animation) => {\n              return (\n                animation.name ==\n                model.actions.onSelect.animations[\n                  model.selectedRuntimeInfo.animationIndex\n                ].name\n              );\n            })[0]\n          )\n          .setDuration(\n            (model.actions.onSelect.animations[\n              model.selectedRuntimeInfo.animationIndex\n            ].singleLoopDuration || 1000) / 1000\n          )\n          .play();\n        runtimeInfo.mixer = mixer;\n      }\n      selectModel(obj.uuid);\n    } catch (e) {\n      console.error(e);\n    }\n  }\n\n  function onWindowResize() {\n    camera.aspect = host.clientWidth / host.clientHeight;\n    camera.updateProjectionMatrix();\n    renderer.setSize(host.clientWidth, host.clientHeight);\n  }\n  function animate() {\n    // requestAnimationFrame(animate);\n    renderer.setAnimationLoop(function() {\n      // if (controls.autoRotate) {\n      controls.update(); // only required if controls.enableDamping = true, or if controls.autoRotate = true\n      // }\n      render();\n    });\n  }\n  animate();\n  function render() {\n    // if (!mobileCheck()) {\n    TWEEN.update();\n    // }\n    renderer.render(scene, camera);\n    if (!window.mergin_mode.world[window.mergin_mode.currentWorldId]) {\n      return true;\n    }\n    const delta = clock.getDelta();\n    window.mergin_mode.world[window.mergin_mode.currentWorldId].forEach(\n      (worldModel) => {\n        if (worldModel.actions) {\n          const runtimeInfo =\n            window.mergin_mode.selected.object?.uuid == worldModel.id\n              ? worldModel.selectedRuntimeInfo\n              : worldModel.runtimeInfo;\n          if (runtimeInfo) {\n            runtimeInfo.mixer.update(delta);\n          }\n        }\n      }\n    );\n    window.mergin_mode.world[window.mergin_mode.currentWorldId].forEach(\n      (model) => {\n        if (\n          model.runtimeInfo &&\n          model.actions?.onLoad?.animations &&\n          model.object\n        ) {\n          const transormation = CalculateTransformation(delta, model);\n          if (transormation) {\n            if (transormation.position) {\n              model.object.position.set(...transormation.position);\n            }\n            if (transormation.rotation) {\n              //smooth rotation\n              if (\n                Math.abs(transormation.rotation[1] - model.object.rotation.y) >\n                  Math.PI / 2 ||\n                model.smoothRotation == false\n              ) {\n                model.object.rotation.set(...transormation.rotation);\n              } else {\n                new TWEEN.Tween(model.object.rotation)\n                  .to(\n                    {\n                      x: transormation.rotation[0],\n                      y: transormation.rotation[1],\n                      z: transormation.rotation[2],\n                    },\n                    100\n                  )\n                  .easing(TWEEN.Easing.Quadratic.InOut)\n                  .start();\n              }\n            }\n          }\n        }\n      }\n    );\n    if (window.mergin_mode.selected.object) {\n      window.mergin_mode.selected.objectHelper.update();\n      // window.mergin_mode.selected.objectHelper.position.set(\n      //   window.mergin_mode.selected.object.position\n      // );\n    }\n  }\n\n  window.addEventListener(\"resize\", onWindowResize, false);\n  document.getElementById(\"three-map\").addEventListener(\"click\", onMouseClick);\n\n  // document.getElementById(\"three-map\").addEventListener(\"mousedown\", () => {\n  //   const onMove = () => {\n  //     window.mergin_mode.listeners.mouseMoved = true;\n  //   };\n\n  //   const onUp = e => {\n  //     if (!window.mergin_mode.listeners.mouseMoved) {\n  //       onMouseClick(e);\n  //     }\n  //     window.mergin_mode.listeners.mouseMoved = false;\n  //     document.getElementById(\"three-map\").removeEventListener(\"mouseup\", onUp);\n  //     document\n  //       .getElementById(\"three-map\")\n  //       .removeEventListener(\"mousemove\", onMove);\n  //   };\n\n  //   document.getElementById(\"three-map\").addEventListener(\"mousemove\", onMove);\n  //   document.getElementById(\"three-map\").addEventListener(\"mouseup\", onUp);\n  // });\n\n  // document.getElementById(\"three-map\").partials = {\n  //   plane,\n  //   pointer,\n  //   sky,\n  //   gridHelper\n  // };\n  VRButton.createButton(renderer, window.vrh, \"immersive-vr\");\n  VRButton.createButton(renderer, window.mrh, \"immersive-ar\");\n  // ARButton.createButton(renderer, window.mrh);\n\n  // document.getElementById(\"three-map\").addEventListener(\"mousedown\", event => {\n  //   if (event.which !== 1) return false;\n  //   const mouse = new THREE.Vector2();\n  //   const raycaster = new THREE.Raycaster();\n  //   const rect = renderer.domElement.getBoundingClientRect();\n  //   mouse.x =\n  //     (((event.clientX || event.changedTouches[0].clientX) - rect.left) /\n  //       rect.width) *\n  //       2 -\n  //     1;\n  //   mouse.y =\n  //     -(\n  //       ((event.clientY || event.changedTouches[0].clientY) - rect.top) /\n  //       rect.height\n  //     ) *\n  //       2 +\n  //     1;\n\n  //   raycaster.setFromCamera(mouse, camera);\n  //   const intersects = raycaster.intersectObjects(scene.children, true);\n  //   window.positions = window.positions || [];\n  //   if (!intersects[0]) return;\n  //   window.positions.push([\n  //     (window.mergin_mode.center[0] + intersects[0].point.x).toFixed(2) - 0,\n  //     (window.mergin_mode.center[1] + intersects[0].point.y).toFixed(2) - 0,\n  //     (window.mergin_mode.center[2] + intersects[0].point.z).toFixed(2) - 0\n  //   ]);\n  // });\n  return {\n    plane,\n    camera,\n    controls,\n    scene,\n    renderer,\n    pointer,\n    partials,\n    loaders,\n    onWindowResize,\n  };\n}\n","export const SET_POSITION = \"SET_POSITION\";\nexport const SET_CURRENT_ACTION = \"SET_CURRENT_ACTION\";\nexport const SET_MODAL_DATA = \"SET_MODAL_DATA\";\nexport const SET_DESCRIPTIVE_DATA = \"SET_DESCRIPTIVE_DATA\";\n\nexport const setDescriptiveData = descriptiveData => ({\n  type: \"SET_DESCRIPTIVE_DATA\",\n  descriptiveData\n});\n","import React, { useRef, useState, useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport createWorld from \"../../helpers/createWorld\";\nimport { setDescriptiveData } from \"../../actions\";\nconst World = (props) => {\n  useEffect(() => {\n    if (!navigator.mediaDevices?.getUserMedia) {\n      return false;\n    }\n    const constraints = {\n      video: { width: 1280, height: 720, facingMode: \"environment\" },\n    };\n    navigator.mediaDevices.getUserMedia(constraints).then((response) => {\n      const video = document.getElementById(\"video\");\n      video.srcObject = response;\n      video.play();\n    });\n\n    const {\n      mixers,\n      camera,\n      controls,\n      scene,\n      renderer,\n      pointer,\n      partials,\n      loaders,\n    } = window.mergin_mode;\n    const rendererContainer = document.getElementById(\"three-map\");\n    const newWorld = createWorld(\n      camera,\n      controls,\n      scene,\n      renderer,\n      pointer,\n      partials,\n      loaders,\n      rendererContainer,\n      mixers,\n      (uuid) => {\n        const descriptiveData = uuid\n          ? window.mergin_mode.world[window.mergin_mode.currentWorldId].filter(\n              (o) => o.id == uuid\n            )[0].description\n          : null;\n        window[\"descriptive-data-container\"].classList.add(\"transition\");\n\n        if (!descriptiveData) {\n          window[\"descriptive-data-container\"].style.height = \"0%\";\n        } else {\n          window[\"descriptive-data-container\"].style.height = \"33%\";\n        }\n        setTimeout(() => {\n          window[\"descriptive-data-container\"].classList.remove(\"transition\");\n        }, 1000);\n        props.setDescriptiveData(descriptiveData);\n      }\n    );\n    window.mergin_mode = { ...window.mergin_mode, ...newWorld };\n  }, []);\n\n  return (\n    <div id=\"world\">\n      <video\n        id=\"video\"\n        style={{ display: \"none\" }}\n        autoPlay\n        playsInline\n      ></video>\n      <div\n        id=\"three-map\"\n        style={{\n          position: \"absolute\",\n          width: `100%`,\n          height: `100%`,\n        }}\n      ></div>\n    </div>\n  );\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    api: state.api,\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    setDescriptiveData: (context) => dispatch(setDescriptiveData(context)),\n  };\n};\n\nWorld.propTypes = {};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(World);\n","export const DescriptiveDataListener = (\n  containerRef,\n  sliderHelperRef,\n  fheight\n) => e => {\n  sliderHelperRef.current.style.height = \"100%\";\n\n  const sliderOnClick = e => {\n    containerRef.current.classList.add(\"transition\");\n    if (\n      (containerRef.current.offsetHeight / window.innerHeight).toFixed(2) ==\n      0.33\n    ) {\n      containerRef.current.style.height = \"0%\";\n    } else {\n      containerRef.current.style.height = \"33%\";\n    }\n    window.removeEventListener(\"mousemove\", resize);\n    window.removeEventListener(\"touchmove\", resize);\n\n    window.removeEventListener(\"mouseup\", mouseup);\n    window.removeEventListener(\"touchend\", mouseup);\n    setTimeout(() => {\n      containerRef.current.classList.remove(\"transition\");\n      sliderHelperRef.current.style.height = \"48px\";\n    }, 500);\n  };\n  fheight.current = {\n    height: null,\n    movementY: null,\n    previousTouchY: null,\n    previousHeight: containerRef.current.offsetHeight\n  };\n  const resize = e => {\n    fheight.current.moved = true;\n    if (typeof e.movementY === \"undefined\") {\n      fheight.current.movementY =\n        e.touches[0].pageY -\n        (fheight.current.previousTouchY || e.touches[0].pageY);\n      fheight.current.previousTouchY = e.touches[0].pageY;\n    } else {\n      fheight.current.movementY = e.movementY;\n    }\n    fheight.current.height =\n      containerRef.current.offsetHeight - fheight.current.movementY;\n    containerRef.current.style.height = `${fheight.current.height}px`;\n  };\n\n  window.addEventListener(\"mousemove\", resize);\n  window.addEventListener(\"touchmove\", resize);\n  const mouseup = () => {\n    if (!fheight.current.moved) {\n      return sliderOnClick();\n    }\n    containerRef.current.classList.add(\"transition\");\n    const diff =\n      fheight.current.previousHeight - containerRef.current.offsetHeight;\n    const currentHeight = (\n      containerRef.current.offsetHeight / window.innerHeight\n    ).toFixed(2);\n\n    if (Number(currentHeight) <= 0.33) {\n      if (diff >= 0) {\n        fheight.current.height = \"0%\";\n      } else {\n        fheight.current.height = \"33%\";\n      }\n    } else {\n      if (diff >= 0) {\n        fheight.current.height = \"33%\";\n      } else {\n        fheight.current.height = \"100%\";\n      }\n    }\n    containerRef.current.style.height = `${fheight.current.height}`;\n\n    setTimeout(() => {\n      containerRef.current.classList.remove(\"transition\");\n      sliderHelperRef.current.style.height = \"48px\";\n    }, 500);\n\n    window.removeEventListener(\"mousemove\", resize);\n    window.removeEventListener(\"touchmove\", resize);\n\n    window.removeEventListener(\"mouseup\", mouseup);\n    window.removeEventListener(\"touchend\", mouseup);\n  };\n  window.addEventListener(\"mouseup\", mouseup);\n  window.addEventListener(\"touchend\", mouseup);\n};\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Button from \"@material-ui/core/Button\";\nimport Backdrop from \"@material-ui/core/Backdrop\";\nimport SpeedDial from \"@material-ui/lab/SpeedDial\";\nimport SpeedDialAction from \"@material-ui/lab/SpeedDialAction\";\nimport SpeedDialIcon from \"@material-ui/lab/SpeedDialIcon\";\n\nexport default props => {\n  const useStyles = makeStyles(theme => ({\n    root: {\n      pointerEvents: \"none\",\n      height: 380,\n      transform: \"translateZ(0px)\",\n      flexGrow: 1,\n      flex: 1,\n      zIndex: 10,\n      width: \"100%\",\n      height: \"100%\"\n    },\n    speedDial: {\n      position: \"absolute\",\n      bottom: theme.spacing(2),\n      right: theme.spacing(2),\n      \"& .MuiSpeedDialAction-staticTooltip .MuiSpeedDialAction-staticTooltipLabel\": {\n        whiteSpace: \"nowrap\"\n      },\n      \"& .MuiButtonBase-root.MuiFab-root.MuiSpeedDial-fab.MuiFab-primary\": {\n        width: 48,\n        height: 48,\n        \"& .MuiFab-label\": {\n          display: \"initial\"\n        },\n        \"&:focus\": {\n          outline: \"none\"\n        }\n      }\n    }\n  }));\n\n  const classes = useStyles();\n  const [open, setOpen] = React.useState(false);\n\n  const handleOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  return (\n    <div className={classes.root}>\n      <Backdrop open={open} />\n      <SpeedDial\n        ariaLabel=\"Action Tooltip\"\n        className={classes.speedDial}\n        icon={<SpeedDialIcon />}\n        onClose={handleClose}\n        onOpen={handleOpen}\n        open={open}\n      >\n        {props.actions.map(action => (\n          <SpeedDialAction\n            key={action.name}\n            icon={action.icon}\n            tooltipTitle={action.name}\n            tooltipOpen\n            onClick={handleClose}\n          />\n        ))}\n      </SpeedDial>\n    </div>\n  );\n};\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Modal from \"@material-ui/core/Modal\";\n\nconst useStyles = makeStyles(theme => ({\n  paper: {\n    position: \"absolute\",\n    fontFamily: \"Ubuntu\",\n    width: \"98%\",\n    height: \"98%\",\n    backgroundColor: theme.palette.background.paper,\n    border: \"2px solid #000\",\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n    borderRadius: 20,\n    display: \"flex\",\n    flexFlow: \"column\"\n  }\n}));\n\nexport default props => {\n  const classes = useStyles();\n  const [open, setOpen] = React.useState(false);\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const body = <div className={classes.paper}>{props.data}</div>;\n\n  return (\n    <Modal\n      open={true}\n      onClose={props.onClose}\n      aria-labelledby=\"simple-modal-title\"\n      aria-describedby=\"simple-modal-description\"\n    >\n      {body}\n    </Modal>\n  );\n};\n","import * as THREE from \"three\";\nimport { DRACOLoader } from \"three/examples/jsm/loaders/DRACOLoader.js\";\nimport InstancedGroupMesh from \"three-instanced-group-mesh\";\nexport const loadGLTFModel = (file, record, referenceIndex) => {\n  const {\n    position,\n    rotation,\n    scale,\n    scaleDifferenceXY,\n    scaleDifferenceZ,\n    blending\n  } = record;\n  const { url } = file[0];\n  const { scene, loaders } = window.mergin_mode;\n\n  const loader = new loaders.GLTFLoader();\n  const dracoLoader = new DRACOLoader();\n  loader.setDRACOLoader(dracoLoader);\n  return new Promise((resolve, reject) => {\n    loader.load(\n      url,\n      gltf => {\n        gltf.scene.animations = gltf.animations;\n        const group = new THREE.Group();\n\n        gltf.scene.traverse(child => {\n          if (child.isMesh) {\n            child.material.side = THREE.DoubleSide;\n            child.material.needsUpdate = true;\n            child.frustumCulled = false;\n          }\n        });\n        if (position[0] instanceof Array) {\n          const new_mesh = new InstancedGroupMesh(gltf.scene, position.length);\n          for (let p = 0; p < position.length - 1; p++) {\n            const transform = new THREE.Object3D();\n            transform.frustumCulled = false;\n            const rot = {};\n            rot.x = Number(rotation[0]);\n            rot.y = Number(rotation[1]);\n            rot.z = Number(rotation[2]);\n            const axisX = new THREE.Vector3(1, 0, 0);\n            const axisY = new THREE.Vector3(0, 1, 0);\n            const axisZ = new THREE.Vector3(0, 0, 1);\n            transform.rotateOnWorldAxis(axisX, rot.x);\n            transform.rotateOnWorldAxis(axisZ, rot.z);\n            transform.rotateOnWorldAxis(axisY, Math.random() * 2 * Math.PI);\n\n            const randomXY = Math.random() * scaleDifferenceXY;\n            const randomZ =\n              Math.random() * scaleDifferenceXY +\n              Math.random() * scaleDifferenceZ;\n            const sca = {};\n            sca.x = Number(scale[0]) + randomXY;\n            sca.y = Number(scale[1]) + randomXY;\n            sca.z = Number(scale[2]) + randomZ;\n            transform.scale.set(sca.x, sca.y, sca.z);\n            transform.position.set(\n              ...position[p].reduce(\n                (a, b, i) => [...a, b - window.mergin_mode.center[i]],\n                []\n              )\n            );\n            transform.updateMatrix();\n\n            new_mesh.setMatrixAt(p, transform.matrix);\n          }\n\n          group.add(new_mesh);\n        } else {\n          group.add(gltf.scene);\n          group.position.set(\n            ...position.reduce(\n              (a, b, i) => [...a, b - window.mergin_mode.center[i]],\n              []\n            )\n          );\n          group.scale.set(...scale);\n          group.rotation.set(...rotation);\n        }\n        if (record.type == \"mapped\") {\n          group.renderOrder = 999;\n        }\n        resolve({\n          referenceIndex,\n          uuid: gltf.scene.uuid,\n          object: group\n        });\n      },\n      () => {},\n      e => {\n        reject(e);\n      }\n    );\n  });\n};\nexport const loadFBXModel = (file, record, referenceIndex) => {\n  const {\n    position,\n    rotation,\n    scale,\n    scaleDifferenceXY,\n    scaleDifferenceZ,\n    blending\n  } = record;\n  const { url } = file[0];\n  const { scene, loaders } = window.mergin_mode;\n  const loader = new loaders.FBXLoader();\n  return new Promise((resolve, reject) => {\n    loader.load(\n      url,\n      object => {\n        const group = new THREE.Group();\n        object.scene.traverse(child => {\n          if (child.isMesh) {\n            child.material.side = THREE.DoubleSide;\n            child.material.needsUpdate = true;\n            child.frustumCulled = false;\n          }\n        });\n        if (position[0] instanceof Array) {\n          const new_mesh = new InstancedGroupMesh(object, position.length);\n          for (let p = 0; p < position.length - 1; p++) {\n            const transform = new THREE.Object3D();\n            transform.frustumCulled = false;\n            const rot = {};\n            rot.x = Number(rotation[0]);\n            rot.y = Number(rotation[1]);\n            rot.z = Number(rotation[2]);\n            const axisX = new THREE.Vector3(1, 0, 0);\n            const axisY = new THREE.Vector3(0, 1, 0);\n            const axisZ = new THREE.Vector3(0, 0, 1);\n            transform.rotateOnWorldAxis(axisX, rot.x);\n            transform.rotateOnWorldAxis(axisZ, rot.z);\n            transform.rotateOnWorldAxis(axisY, Math.random() * 2 * Math.PI);\n\n            const randomXY = Math.random() * scaleDifferenceXY;\n            const randomZ =\n              Math.random() * scaleDifferenceXY +\n              Math.random() * scaleDifferenceZ;\n            const sca = {};\n            sca.x = Number(scale[0]) + randomXY;\n            sca.y = Number(scale[1]) + randomXY;\n            sca.z = Number(scale[2]) + randomZ;\n            transform.scale.set(sca.x, sca.y, sca.z);\n            transform.position.set(\n              ...position[p].reduce(\n                (a, b, i) => [...a, b - window.mergin_mode.center[i]],\n                []\n              )\n            );\n            transform.updateMatrix();\n\n            new_mesh.setMatrixAt(p, transform.matrix);\n          }\n\n          group.add(new_mesh);\n        } else {\n          group.add(object);\n          group.position.set(\n            ...position.reduce(\n              (a, b, i) => [...a, b - window.mergin_mode.center[i]],\n              []\n            )\n          );\n          group.scale.set(...scale);\n          group.rotation.set(...rotation);\n        }\n        if (record.type == \"mapped\") {\n          group.renderOrder = 1;\n        }\n        resolve({ referenceIndex, uuid: group.uuid, object: group });\n      },\n      () => {},\n      e => {\n        reject(e);\n      }\n    );\n  });\n};\n","import { fromLonLat } from \"ol/proj.js\";\nimport { loadGLTFModel, loadFBXModel } from \"../helpers/loaders\";\nimport * as THREE from \"three\";\n\nconst loader = {\n  gltf: loadGLTFModel,\n  glb: loadGLTFModel,\n  fbx: loadFBXModel\n};\nexport default async worldId => {\n  const towerlocationConvert = fromLonLat([40.626374, 22.948324, 15.25]);\n  // const treelocationConvert = fromLonLat([40.62626, 22.947929, 15.25]);\n  // const userConvert = fromLonLat([40.626288, 22.947957, 15.25]);\n\n  function get_url_extension(url) {\n    return url\n      .split(/[#?]/)[0]\n      .split(\".\")\n      .pop()\n      .trim();\n  }\n  const readWorldData = world => {\n    window.mergin_mode.center = world.meta.coordinates;\n\n    const data = world.content;\n    //initialize interactions\n    const { renderer, scene, camera } = window.mergin_mode;\n\n    const loadings = [];\n    if (window.mergin_mode.world[world.id]) {\n      return true;\n    }\n    window.mergin_mode.world[world.id] = [];\n    for (const [index, record] of data.entries()) {\n      if ([\"virtual\", \"mapped\"].indexOf(record.type) !== -1) {\n        loadings.push(\n          loader[get_url_extension(record.url)](\n            [{ url: record.url }],\n            record,\n            index\n          )\n        );\n        window.mergin_mode.world[world.id].push(record);\n      }\n    }\n    return Promise.all(loadings)\n      .then(models => {\n        models.forEach(model => {\n          window.mergin_mode.world[window.mergin_mode.currentWorldId][\n            model.referenceIndex\n          ].id = model.uuid;\n          window.mergin_mode.world[window.mergin_mode.currentWorldId][\n            model.referenceIndex\n          ].object = model.object;\n          window.mergin_mode.scene.add(model.object);\n          // if (window.mergin_mode.world[model.referenceIndex].visible == false) {\n          //   model.object.visible = false;\n          // }\n          model.object.traverse(child => {\n            if (child.isMesh) {\n              if (\n                window.mergin_mode.world[window.mergin_mode.currentWorldId][\n                  model.referenceIndex\n                ].visible === false\n              ) {\n                child.material.opacity = 0;\n                child.material.transparent = true;\n              }\n              //hide model visibility is set to false\n\n              child.material.flatShading = false;\n              child.geometry.computeVertexNormals();\n              // child.material = window.mergin_mode.selected.material[child.uuid];\n            }\n          });\n          //check for animations and create the mixers\n          const actions =\n            window.mergin_mode.world[window.mergin_mode.currentWorldId][\n              model.referenceIndex\n            ].actions || {};\n\n          if ((actions.onLoad || {}).animations) {\n            const anim = actions.onLoad.animations[0];\n            const mixer = new THREE.AnimationMixer(model.object);\n            const theAnimation = window.mergin_mode.world[\n              window.mergin_mode.currentWorldId\n            ][model.referenceIndex].object.children[0].animations.filter(\n              animation => {\n                return animation.name === anim.name;\n              }\n            )[0];\n            mixer\n              .clipAction(theAnimation)\n              .setDuration((anim.singleLoopDuration || 1000) / 1000)\n              .play();\n            window.mergin_mode.world[window.mergin_mode.currentWorldId][\n              model.referenceIndex\n            ].runtimeInfo = {\n              animationIndex: 0,\n              pathIndex: 0,\n              duration: 0,\n              lastUpdate: 0,\n              mixer\n            };\n          }\n          if ((actions.onSelect || {}).animations) {\n            const mixer = new THREE.AnimationMixer(model.object);\n            const theAnimation = window.mergin_mode.world[\n              window.mergin_mode.currentWorldId\n            ][model.referenceIndex].object.children[0].animations.filter(\n              animation => {\n                return animation.name === actions.onSelect.animations[0].name;\n              }\n            )[0];\n            mixer\n              .clipAction(theAnimation)\n              .setDuration(\n                (actions.onSelect.animations[0].singleLoopDuration || 1000) /\n                  1000\n              )\n              .play();\n            window.mergin_mode.world[window.mergin_mode.currentWorldId][\n              model.referenceIndex\n            ].selectedRuntimeInfo = {\n              animationIndex: 0,\n              pathIndex: 0,\n              duration: 0,\n              lastUpdate: 0,\n              mixer\n            };\n          }\n        });\n      })\n      .catch(e => {\n        console.error(e);\n      });\n  };\n  readWorldData(window.mergin_mode.worlds.filter(w => w.id === worldId)[0]);\n};\n","import React from \"react\";\nimport Drawer from \"@material-ui/core/Drawer\";\nimport readWorldData from \"../../helpers/readWorldData\";\n\nexport default function WorldItem(props) {\n  const [state, setState] = React.useState({ selectedId: null });\n  return (\n    <React.Fragment>\n      {props.item.map(w => {\n        if (w.id == 0) {\n          return <React.Fragment key={w.id} />;\n        }\n        return (\n          <div\n            key={w.id}\n            className=\"world-item\"\n            style={{\n              border:\n                w.id === state.selectedId\n                  ? \"1px solid #b34f0b\"\n                  : \"1px solid #fff\"\n            }}\n            onClick={() => {\n              setState({ selectedId: w.id });\n              if (\n                window.mergin_mode.currentWorldId &&\n                w.id !== window.mergin_mode.currentWorldId\n              ) {\n                window.mergin_mode.world[window.mergin_mode.currentWorldId].map(\n                  o => {\n                    if (o.object) {\n                      o.object.visible = false;\n                    }\n                  }\n                );\n              }\n              window.mergin_mode.currentWorldId = w.id;\n              window.mergin_mode.center = w.meta.coordinates;\n              if (window.mergin_mode.world.hasOwnProperty(w.id)) {\n                window.mergin_mode.world[window.mergin_mode.currentWorldId].map(\n                  o => {\n                    if (o.object) {\n                      o.object.visible = true;\n                    }\n                  }\n                );\n              } else {\n                (async function() {\n                  await readWorldData(w.id);\n                })();\n              }\n            }}\n          >\n            {w.meta.thumbnail && (\n              <img src={w.meta.thumbnail} sty={{ objectFit: \"contain\" }} />\n            )}\n            <label>{w.name}</label>\n            <p>{w.description}</p>\n          </div>\n        );\n      })}\n    </React.Fragment>\n  );\n}\n","import React, { useRef, useState, useEffect } from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport QrReader from \"react-qr-reader\";\nimport readWorldData from \"../../helpers/readWorldData\";\nimport * as THREE from \"three\";\n\nexport default function QRModal(props) {\n  const [state, setState] = React.useState(true);\n\n  const handleScan = (data) => {\n    //case scan data\n    if (data) {\n      const d = JSON.parse(data);\n      const w = window.mergin_mode.worlds.filter((w) => w.id == d.id)[0];\n      //case the world matches\n      if (w) {\n        if (\n          window.mergin_mode.currentWorldId &&\n          w.id !== window.mergin_mode.currentWorldId\n        ) {\n          window.mergin_mode.world[window.mergin_mode.currentWorldId].map(\n            (o) => {\n              if (o.object) {\n                o.object.visible = false;\n              }\n            }\n          );\n        }\n        window.mergin_mode.currentWorldId = w.id;\n        window.mergin_mode.center = w.meta.coordinates;\n        if (window.mergin_mode.world.hasOwnProperty(w.id)) {\n          window.mergin_mode.world[window.mergin_mode.currentWorldId].map(\n            (o) => {\n              if (o.object) {\n                o.object.visible = true;\n              }\n            }\n          );\n        } else {\n          (async function() {\n            await readWorldData(w.id);\n          })();\n        }\n\n        window.mergin_mode.scene.position.set(\n          window.mergin_mode.center[0] - d.position.x,\n          window.mergin_mode.center[1] - d.position.z,\n          window.mergin_mode.center[2] - d.position.y\n        );\n\n        const dir = new THREE.Vector3();\n        const sph = new THREE.Spherical();\n        window.mergin_mode.camera.getWorldDirection(dir);\n\n        sph.setFromVector3(dir);\n        let heading = (360 - THREE.Math.radToDeg(sph.theta) - 180).toFixed(0);\n        if (heading == 360) {\n          heading = 0;\n        }\n\n        if (\n          heading != d.heading &&\n          typeof window.mergin_mode.controls.alphaOffset !== \"undefined\"\n        ) {\n          window.mergin_mode.controls.alphaOffset -= Number(\n            (((d.heading - heading) * Math.PI) / 180).toFixed(4)\n          );\n        }\n        window.mergin_mode.controls.update();\n        props.onClose();\n      }\n    }\n  };\n  const handleScanError = (err) => {};\n  return (\n    <React.Fragment>\n      <div\n        style={{\n          display: \"flex\",\n          alignItems: \"center\",\n          justifyContent: \"center\",\n          marginBottom: 25,\n        }}\n      >\n        <i style={{ fontSize: 70 }} className=\"fas fa-qrcode\"></i>\n        <h2\n          style={{\n            marginLeft: 24,\n            fontWeight: 900,\n            textTransform: \"uppercase\",\n            color: \"#606059\",\n            letterSpacing: 5,\n          }}\n          id=\"simple-modal-title\"\n        >\n          QR Code Scanner\n        </h2>\n      </div>\n      <p id=\"simple-modal-description\" style={{ flex: 1 }}>\n        <div style={{ height: \"calc(100% - 110px)\", position: \"relative\" }}>\n          <div className=\"scan-tip\">\n            <QrReader\n              delay={300}\n              onError={handleScanError}\n              onScan={handleScan}\n              style={{ width: \"100%\" }}\n            />\n          </div>\n        </div>\n        <div style={{ textAlign: \"center\" }}>\n          <p>or type the id of the observation point</p>\n          <input\n            onChange={(e) =>\n              setState({ ...state, observationId: e.target.value })\n            }\n          />\n          <div\n            style={{\n              textAlign: \"center\",\n            }}\n          >\n            <Button\n              style={{\n                fontSize: \"18px\",\n                // background: \"#2f72e8\",\n                color: \"#313129\",\n                fontWeight: 600,\n              }}\n              onClick={() => {\n                const observationId = state.observationId;\n                const data = (window.mergin_mode.worlds?.filter(\n                  (w) => w.id == window.mergin_mode.currentWorldId\n                ) || [])[0].meta.observationPoints.filter((op) => {\n                  return op.pointId == observationId;\n                });\n                handleScan(JSON.stringify(data[0]));\n              }}\n            >\n              Submit\n            </Button>\n          </div>\n        </div>\n        <div\n          style={{\n            textAlign: \"center\",\n          }}\n        >\n          <Button\n            style={{\n              fontSize: \"18px\",\n              // background: \"#2f72e8\",\n              color: \"#313129\",\n              fontWeight: 600,\n            }}\n            onClick={props.onClose}\n          >\n            Close\n          </Button>\n        </div>\n      </p>\n    </React.Fragment>\n  );\n}\n","import React, { useRef, useState, useEffect } from \"react\";\nimport { connect } from \"react-redux\";\n\nimport { DescriptiveDataListener } from \"../../helpers/listeners\";\nimport * as THREE from \"three\";\nimport { fromLonLat } from \"ol/proj.js\";\nimport ActionButton from \"../_layout/ActionButton\";\nimport Modal from \"../_layout/Modal\";\nimport WorldItem from \"../_layout/WorldItem\";\nimport GpsFixedIcon from \"@material-ui/icons/GpsFixed\";\nimport CropFreeIcon from \"@material-ui/icons/CropFree\";\nimport QRModal from \"../_layout/QRModal\";\nimport Button from \"@material-ui/core/Button\";\nimport { Box } from \"@material-ui/core\";\nimport ControlCameraIcon from \"@material-ui/icons/ControlCamera\";\n// import ArrowUpwardIcon from \"@material-ui/icons/ArrowUpward\";\n// import ArrowDownwardIcon from \"@material-ui/icons/ArrowDownward\";\n// import ArrowBackIcon from \"@material-ui/icons/ArrowBack\";\n// import ArrowForwardIcon from \"@material-ui/icons/ArrowForward\";\nimport { Joystick } from \"react-joystick-component\";\nconst direction = new THREE.Vector3();\n\nconst Controls = (props) => {\n  const sliderHelperRef = useRef();\n  const containerRef = useRef();\n  const [state, setState] = useState({\n    geolocation: false,\n    calibration: false,\n  });\n  const [modalData, setModalData] = useState(null);\n  const [infoState, setInfoState] = useState({\n    position: { x: 0, y: 0, z: 0 },\n    heading: [0],\n  });\n\n  const fheight = useRef({\n    height: null,\n    movementY: null,\n    previousTouchY: null,\n    moved: false,\n  });\n\n  const [showInfo, setShowInfo] = useState(true);\n\n  const toggleFullscreen = () => {\n    if (!document.fullscreenElement) {\n      window.document.body.requestFullscreen().catch((err) => {\n        alert(\n          `Error attempting to enable full-screen mode: ${err.message} (${err.name})`\n        );\n      });\n    } else {\n      document.exitFullscreen();\n    }\n  };\n\n  const worldActions =\n    window.mergin_mode.currentWorldId !== 0 &&\n    window.mergin_mode.worlds.filter(\n      (world) => window.mergin_mode.currentWorldId === world.id\n    )[0]?.actions;\n  React.useEffect(() => {\n    if (state.geolocation) {\n      let id, target, options;\n\n      function success(position) {\n        if (!window.mergin_mode.camera.position) return false;\n        const latitude = position.coords.latitude;\n        const longitude = position.coords.longitude;\n        const newPos = fromLonLat([latitude, longitude, 0]);\n        const cameraX = Number(\n          (newPos[0] - window.mergin_mode.center[0]).toFixed(4)\n        );\n        const cameraZ = Number(window.mergin_mode.camera.position.y.toFixed(4));\n        const cameraY = Number(\n          (newPos[1] - window.mergin_mode.center[2]).toFixed(4)\n        );\n        if (Math.abs(cameraX) > 1000 || Math.abs(cameraY) > 1000) {\n          const distance = Math.sqrt(\n            Math.pow(cameraX, 2) + Math.pow(cameraY, 2)\n          );\n          alert(\n            `Your location is to far from the virtual world. You are ${distance.toFixed(\n              2\n            )} meter far away.`\n          );\n          setState({ ...state, geolocation: false });\n          navigator.geolocation.clearWatch(id);\n          return true;\n        }\n        window.mergin_mode.camera.position.set(cameraX, cameraZ, cameraY);\n      }\n\n      function error(err) {\n        console.warn(\"ERROR(\" + err.code + \"): \" + err.message);\n      }\n\n      target = {\n        latitude: 0,\n        longitude: 0,\n      };\n\n      options = {\n        enableHighAccuracy: false,\n        timeout: 5000,\n        maximumAge: 0,\n      };\n\n      id = navigator.geolocation.watchPosition(success, error, options);\n    }\n  }, [state.geolocation]);\n  React.useEffect(() => {\n    // if (typeof window.mergin_mode.controls.alphaOffset !== \"undefined\") {\n    //   window.mergin_mode.controls.alphaOffset = -Math.PI / 2;\n    // }\n\n    setInterval(() => {\n      if (!window.mergin_mode.camera.position) return false;\n      const { x, y, z } = window.mergin_mode.camera.position;\n      const dir = new THREE.Vector3();\n      const sph = new THREE.Spherical();\n      window.mergin_mode.camera.getWorldDirection(dir);\n\n      sph.setFromVector3(dir);\n      let heading = (360 - THREE.Math.radToDeg(sph.theta) - 180).toFixed(0);\n      if (heading == 360) {\n        heading = 0;\n      }\n      const [cx, cy, cz] = window.mergin_mode.center;\n      setInfoState({\n        position: {\n          x: (cx + x).toFixed(2) + \"m\",\n          y: (cz + z).toFixed(2) + \"m\",\n          z: (cy + y).toFixed(2) + \"m\",\n        },\n        heading: heading + \"deg\",\n      });\n    }, 1000);\n  }, []);\n  const [locomotionMode, setLocomotionMode] = useState(\"Adjust\");\n  const move = useRef();\n  const moveInterval = useRef();\n  const handleMove = (data) => {\n    if (locomotionMode == \"Adjust\") {\n      window.mergin_mode.controls.alphaOffset -= (0.001 * data.x) / 50;\n    } else {\n      if (move.current !== \"FORWARDS\" && data.y > 0) {\n        move.current = \"FORWARDS\";\n        clearInterval(moveInterval.current);\n        moveInterval.current = setInterval(() => {\n          eventOrLoopOrSomething(0.1);\n        }, 60);\n      }\n      if (move.current !== \"BACKWARDS\" && data.y < 0) {\n        move.current = \"BACKWARDS\";\n        clearInterval(moveInterval.current);\n        moveInterval.current = setInterval(() => {\n          eventOrLoopOrSomething(-0.1);\n        }, 60);\n      }\n    }\n  };\n  function eventOrLoopOrSomething(speed) {\n    window.mergin_mode.camera.getWorldDirection(direction);\n    window.mergin_mode.camera.position.addScaledVector(direction, speed);\n  }\n  const handleStop = () => {\n    clearInterval(moveInterval.current);\n  };\n  // const boxStyle = {\n  //   background: \"rgba(0,0,0,0.7)\",\n  //   color: \"white\",\n  //   padding: \"12px\",\n  //   borderRadius: \"100%\",\n  //   display: \"flex\",\n  //   alignItems: \"center\",\n  //   justifyContent: \"center\",\n  //   cursor: \"pointer\",\n  // };\n\n  return (\n    <div id=\"controls\">\n      <img\n        id=\"logo\"\n        width={120}\n        height={(120 * 469) / 640}\n        src={process.env.PUBLIC_URL + \"/logo-transparent.png\"}\n      />\n\n      <div id=\"actions-menu\">\n        <ActionButton\n          actions={[\n            {\n              icon: (\n                <div\n                  onClick={() =>\n                    setModalData(\n                      <QRModal\n                        onClose={(data) => {\n                          setModalData(null);\n                        }}\n                      />\n                    )\n                  }\n                >\n                  <i style={{ fontSize: 18 }} className=\"fas fa-qrcode\"></i>\n                </div>\n              ),\n              name: \"QR Scan\",\n            },\n            {\n              icon: (\n                <span\n                  onClick={() => {\n                    setState({ ...state, calibration: !state.calibration });\n                  }}\n                  id=\"calibration\"\n                >\n                  <ControlCameraIcon />\n                </span>\n              ),\n              name: \"Calibrate\",\n            },\n            {\n              icon: <CropFreeIcon onClick={() => toggleFullscreen()} />,\n              name: \"Full Screen\",\n            },\n            {\n              icon: (\n                <span\n                  onClick={() => {\n                    window.mergin_mode.realities.virtual();\n                  }}\n                >\n                  VR\n                </span>\n              ),\n              name: \"Virtual Reality\",\n            },\n            {\n              icon: (\n                <span\n                  onClick={() => {\n                    window.mergin_mode.realities.mixed();\n                  }}\n                >\n                  MR\n                </span>\n              ),\n              name: \"Mixed Reality\",\n            },\n            {\n              icon: (\n                <span\n                  onClick={() => {\n                    window.mergin_mode.realities.mixed();\n                  }}\n                  id=\"vrh\"\n                >\n                  VRH\n                </span>\n              ),\n              name: \"VR Headset\",\n            },\n            {\n              icon: (\n                <span\n                  onClick={() => {\n                    window.mergin_mode.realities.mixed();\n                  }}\n                  id=\"mrh\"\n                >\n                  MRH\n                </span>\n              ),\n              name: \"MR Headset\",\n            },\n            {\n              icon: (\n                <span\n                  onClick={() => {\n                    setShowInfo(!showInfo);\n                  }}\n                  id=\"shi\"\n                >\n                  <i className=\"fas fa-info-circle\"></i>\n                </span>\n              ),\n              name: \"Show/Hide Info\",\n            },\n            {\n              icon: (\n                <span\n                  onClick={() => {\n                    setState({ ...state, geolocation: !state.geolocation });\n                  }}\n                  id=\"geolocation\"\n                >\n                  <GpsFixedIcon />\n                </span>\n              ),\n              name: \"Geolocate\",\n            },\n          ]}\n        />\n        {state.calibration && (\n          <Box\n            style={{\n              position: \"absolute\",\n              width: \"100%\",\n              height: \"100%\",\n              top: \"0px\",\n              left: \"0px\",\n              zIndex: 100,\n              background: \"rgba(0,0,0,0.4)\",\n              display: \"flex\",\n              gap: \"12px\",\n              pointerEvents: \"auto\",\n              alignItems: \"flex-end\",\n              justifyContent: \"space-between\",\n              padding: \"50px\",\n            }}\n          >\n            <Box\n              style={{\n                background: \"rgba(0,0,0,0.7)\",\n                color: \"white\",\n                padding: \"8px 12px\",\n                borderRadius: \"6px\",\n                cursor: \"pointer\",\n              }}\n              onClick={() =>\n                setLocomotionMode(\n                  locomotionMode === \"Adjust\" ? \"Move\" : \"Adjust\"\n                )\n              }\n            >\n              {locomotionMode}\n            </Box>\n            <Joystick\n              size={100}\n              baseColor=\"#323229\"\n              stickColor=\"#b64f0c\"\n              move={handleMove}\n              stop={handleStop}\n            ></Joystick>\n            <Box\n              style={{\n                background: \"rgba(0,0,0,0.7)\",\n                color: \"white\",\n                padding: \"8px 12px\",\n                borderRadius: \"6px\",\n                cursor: \"pointer\",\n              }}\n              onClick={() => setState({ ...state, calibration: false })}\n            >\n              Close\n            </Box>\n            {/*\n\n            <Box\n              style={{\n                display: \"flex\",\n                alignItems: \"center\",\n                justifyContent: \"center\",\n                gap: \"50px\",\n              }}\n            >\n              <Box\n                style={boxStyle}\n                onClick={() => {\n\n                }}\n              >\n                <ArrowBackIcon />\n              </Box>\n              <Box\n                style={boxStyle}\n                onClick={() => {\n                  window.mergin_mode.controls.alphaOffset += 0.1;\n                }}\n              >\n                <ArrowForwardIcon />\n              </Box>\n            </Box> */}\n          </Box>\n        )}\n        {showInfo && (\n          <React.Fragment>\n            <div id=\"info-panel\">\n              <div className=\"info-group\">\n                <label>Position</label>\n                <div>{`${infoState.position.x},${infoState.position.y},${infoState.position.z}`}</div>\n              </div>\n              <div className=\"info-group\">\n                <label>Heading</label>\n                <div>{infoState.heading}</div>\n              </div>\n            </div>\n            <div id=\"available-worlds\">\n              <WorldItem item={window.mergin_mode.worlds} />\n            </div>\n          </React.Fragment>\n        )}\n\n        <div\n          id=\"descriptive-data-container\"\n          ref={(elem) => (containerRef.current = elem)}\n        >\n          <Button\n            id=\"slider-helper\"\n            onMouseDown={DescriptiveDataListener(\n              containerRef,\n              sliderHelperRef,\n              fheight\n            )}\n            onTouchStart={DescriptiveDataListener(\n              containerRef,\n              sliderHelperRef,\n              fheight\n            )}\n            ref={(elem) => (sliderHelperRef.current = elem)}\n          ></Button>\n          <div id=\"slider\"></div>\n          {worldActions && (\n            <div className=\"world-actions\">\n              {worldActions.map((action) => (\n                <div\n                  key={action.name}\n                  className=\"world-action\"\n                  onClick={action.run}\n                >\n                  {action.name}\n                </div>\n              ))}\n            </div>\n          )}\n          {props.descriptiveData ? (\n            <div\n              id=\"descriptive-data\"\n              dangerouslySetInnerHTML={{ __html: props.descriptiveData }}\n            ></div>\n          ) : (\n            <div id=\"descriptive-data\" style={{ overflowY: \"auto\" }}>\n              <i className=\"mm-icons far fa-comment-dots\"></i>\n              <p>Please select an object to reveal descriptive data</p>\n            </div>\n          )}\n        </div>\n        {modalData && (\n          <Modal\n            data={modalData}\n            onClose={() => {\n              setModalData(null);\n            }}\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    descriptiveData: state.api.descriptiveData,\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {};\n};\n\nControls.propTypes = {};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Controls);\n","import React from \"react\";\nimport \"./App.css\";\nimport { ThemeProvider } from \"@material-ui/core\";\nimport World from \"../components/world\";\nimport Controls from \"../components/controls\";\n\nimport { createMuiTheme } from \"@material-ui/core/styles\";\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: \"#b34f0b\"\n    },\n    secondary: {\n      main: \"#323228\"\n    }\n  }\n});\n\nfunction App() {\n  return (\n    <ThemeProvider theme={theme}>\n      <div className=\"App\">\n        <World />\n        <Controls />\n      </div>\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import { SET_DESCRIPTIVE_DATA } from \"../actions\";\nconst initialState = {\n  currentAction: \"immerse\",\n  descriptiveData: null\n};\nconst api = (state = initialState, action) => {\n  switch (action.type) {\n    case SET_DESCRIPTIVE_DATA:\n      const { descriptiveData } = action;\n      return Object.assign({}, state, { descriptiveData });\n    default: {\n      return state;\n    }\n  }\n};\n\nexport default api;\n","import * as THREE from \"three\";\nexport default {\n  id: \"006cb9aE-F316\",\n  name: \"White Tower Of Thessaloniki\",\n  description: \"A simple overview of the area near the tower of thessaloniki.\",\n  actions: [\n    {\n      name: \"Show/Hide Virtual\",\n      run: () => {\n        window.mergin_mode.world[window.mergin_mode.currentWorldId].map(\n          (item) => {\n            if (item.type === \"virtual\") {\n              item.object.visible = !item.object.visible;\n            }\n          }\n        );\n      },\n    },\n    {\n      name: \"Show/Hide Mapped Textured\",\n      run: () => {\n        window.mergin_mode.world[window.mergin_mode.currentWorldId].map(\n          (item) => {\n            if (item.type === \"mapped\") {\n              item.object.visible = !item.object.visible;\n              item.object.traverse((child) => {\n                if (child.isMesh) {\n                  child.material.blending = THREE[\"NormalBlending\"];\n                  child.material.color = new THREE.Color(\"#fff\");\n                  child.material.wireframe = false;\n                  child.material.needsUpdate = true;\n                }\n              });\n            }\n          }\n        );\n      },\n    },\n    {\n      name: \"Show/Hide Mapped Black\",\n      run: () => {\n        window.mergin_mode.world[window.mergin_mode.currentWorldId].map(\n          (item) => {\n            if (item.type === \"mapped\") {\n              item.object.visible = !item.object.visible;\n              item.object.renderOrder = 999;\n              item.object.traverse((child) => {\n                if (child.isMesh) {\n                  child.material.wireframe = false;\n                  child.material.blending = THREE[\"NormalBlending\"];\n                  child.material.color = new THREE.Color(\"#000\");\n                  child.material.needsUpdate = true;\n                }\n              });\n            }\n          }\n        );\n      },\n    },\n    {\n      name: \"Show/Hide Mixed Objects Semi Transparent\",\n      run: () => {\n        window.mergin_mode.world[window.mergin_mode.currentWorldId].map(\n          (item) => {\n            if (item.type === \"mapped\") {\n              item.object.visible = !item.object.visible;\n              item.object.renderOrder = 999;\n              item.object.traverse((child) => {\n                if (child.isMesh) {\n                  child.material.wireframe = false;\n                  child.material.blending = THREE[\"AdditiveBlending\"];\n                  child.material.color = new THREE.Color(\"#fff\");\n                  child.material.needsUpdate = true;\n                }\n              });\n            }\n          }\n        );\n      },\n    },\n    {\n      name: \"Show/Hide Mixed Objects Transparent\",\n      run: () => {\n        window.mergin_mode.world[window.mergin_mode.currentWorldId].map(\n          (item) => {\n            if (item.type === \"mapped\") {\n              item.object.visible = !item.object.visible;\n              item.object.renderOrder = 999;\n              item.object.traverse((child) => {\n                if (child.isMesh) {\n                  child.material.wireframe = false;\n                  child.material.blending = THREE[\"AdditiveBlending\"];\n                  child.material.color = new THREE.Color(\"#000\");\n                  child.material.needsUpdate = true;\n                }\n              });\n            }\n          }\n        );\n      },\n    },\n    {\n      name: \"Change FoV\",\n      run: () => {\n        window.mergin_mode.camera.fov += 5;\n\n        if (window.mergin_mode.camera.fov > 130) {\n          window.mergin_mode.camera.fov = 50;\n        }\n        window.mergin_mode.camera.updateProjectionMatrix();\n      },\n    },\n  ],\n  content: [\n    {\n      refId: \"white_tower\",\n      type: \"virtual\",\n      url: process.env.PUBLIC_URL + \"/white-tower.gltf\",\n      position: [4522513.2664, 15.25, 2625771.4946],\n      rotation: [0, 0, 0],\n      scale: [1.1, 1.1, 1.1],\n      selectable: true,\n      actions: [],\n      description: `<iframe\n          style=\"\n            width: 100%;\n            height: 100%;\n            border:none;\"\n          src=\"${process.env.PUBLIC_URL}/templates/white-tower.html\"></iframe>`,\n    },\n    {\n      type: \"mapped\",\n      ground: true,\n      selectable: false,\n      //visible: false,\n      url: process.env.PUBLIC_URL + \"/white-tower-area.glb\",\n      position: [4522507.2664, 15.25, 2625770.4946],\n      rotation: [0, -Math.PI / 2, 0],\n      scale: [1, 1, 1],\n      description: ``,\n    },\n    {\n      type: \"virtual\",\n      //visible: false,\n      url: process.env.PUBLIC_URL + \"/helicopter.glb\",\n      position: [4522532.38, 40, 2625794],\n      rotation: [0, Math.PI / 2, 0],\n      scale: [1.1, 1.1, 1.1],\n      actions: {\n        onLoad: {\n          animations: [\n            {\n              name: \"CINEMA_4D_Main\",\n              singleLoopDuration: 1000,\n              path: [\n                [4522532.38, 40, 2625794],\n                [4522542.11, 40, 2625783.32],\n                [4522545.73, 40, 2625767.83],\n                [4522544.29, 40, 2625755.49],\n                [4522533.2, 40, 2625739.59],\n                [4522517.22, 40, 2625728.5],\n                [4522490.18, 40, 2625722.84],\n                [4522469.34, 40, 2625740.86],\n                [4522461.2, 40, 2625769.94],\n                [4522476.58, 40, 2625796.28],\n                [4522503.64, 40, 2625804.17],\n                [4522532.38, 40, 2625794],\n              ],\n              speed: 45,\n              speedUnit: \"km/h\",\n            },\n          ],\n        },\n      },\n      description: `<iframe\n          style=\"\n            width: 100%;\n            height: 100%;\n            border:none;\"\n          src=\"${process.env.PUBLIC_URL}/templates/soldier.html\"></iframe>`,\n    },\n    {\n      type: \"virtual\",\n      //visible: false,\n      url: process.env.PUBLIC_URL + \"/man.glb\",\n      selectable: false,\n      position: [4522519.65, 15.58, 2625805.5],\n      rotation: [0, 0, 0],\n      scale: [2, 2, 2],\n      smoothRotation: false,\n      selectable: true,\n      actions: {\n        onLoad: {\n          animations: [\n            {\n              name: \"Take 001\",\n              singleLoopDuration: 1000,\n              path: [\n                [4522519.65, 15.58, 2625805.5],\n                [4522524.24, 15.7, 2625800.43],\n                [4522530.28, 16.05, 2625794.24],\n                [4522534.54, 16.24, 2625790.12],\n                [4522540.35, 16.26, 2625784.5],\n                [4522542.02, 16.46, 2625778.88],\n                [4522539.23, 16.56, 2625769.28],\n                [4522537.11, 16.58, 2625763.71],\n                [4522533.94, 16.73, 2625759.93],\n                [4522531.36, 16.61, 2625757.23],\n                [4522530.56, 16.62, 2625755.17],\n                [4522528.4, 16.64, 2625752.29],\n                [4522523.42, 16.64, 2625748.53],\n                [4522517.18, 16.59, 2625744],\n                [4522511.25, 16.61, 2625740.3],\n                [4522506.57, 16.48, 2625737.46],\n                [4522503.06, 16.46, 2625737.66],\n                [4522498.91, 16.3, 2625739.57],\n                [4522493.38, 15.89, 2625740.6],\n                [4522486.96, 15.57, 2625743.43],\n                [4522479.19, 15.23, 2625749.28],\n                [4522478.52, 15.13, 2625752.2],\n                [4522474.53, 15, 2625758.14],\n                [4522474.4, 14.93, 2625767.36],\n                [4522477.27, 15.25, 2625774.56],\n                [4522477.27, 15.25, 2625781.59],\n                [4522480.91, 14.73, 2625793.36],\n                [4522489.27, 14.88, 2625796.78],\n                [4522501.6, 15.05, 2625802.34],\n                [4522514.55, 15.29, 2625811.76],\n                [4522519.65, 15.58, 2625805.5],\n              ],\n              speed: 8,\n              speedUnit: \"km/h\",\n              // dynamicHeight: true\n            },\n          ],\n        },\n      },\n      description: `<iframe\n          style=\"\n            width: 100%;\n            height: 100%;\n            border:none;\"\n          src=\"${process.env.PUBLIC_URL}/templates/soldier.html\"></iframe>`,\n    },\n    {\n      type: \"virtual\",\n      //visible: false,\n      url: process.env.PUBLIC_URL + \"/man.glb\",\n      selectable: false,\n      position: [4522476.11, 15.03, 2625758.52],\n      rotation: [0, 0, 0],\n      scale: [2, 2, 2],\n      smoothRotation: false,\n      actions: {\n        onLoad: {\n          animations: [\n            {\n              name: \"Take 001\",\n              singleLoopDuration: 1200,\n              path: [\n                [4522476.11, 15.03, 2625758.52],\n                [4522482.1, 14.77, 2625793.26],\n                [4522476.11, 15.03, 2625758.52],\n              ],\n              speed: 6,\n              speedUnit: \"km/h\",\n              //dynamicHeight: true\n            },\n          ],\n        },\n      },\n    },\n    {\n      type: \"virtual\",\n      //visible: false,\n      url: process.env.PUBLIC_URL + \"/man.glb\",\n      selectable: false,\n      position: [4522513.55, 15.18, 2625816.88],\n      rotation: [0, 0, 0],\n      scale: [2, 2, 2],\n      smoothRotation: false,\n      actions: {\n        onLoad: {\n          animations: [\n            {\n              name: \"Take 001\",\n              singleLoopDuration: 1400,\n              path: [\n                [4522513.55, 15.18, 2625816.88],\n                [4522529.4, 16.04, 2625795.93],\n                [4522513.55, 15.18, 2625816.88],\n              ],\n              speed: 4,\n              speedUnit: \"km/h\",\n              //dynamicHeight: true\n            },\n          ],\n        },\n      },\n      description: `<iframe\n          style=\"\n            width: 100%;\n            height: 100%;\n            border:none;\"\n          src=\"${process.env.PUBLIC_URL}/templates/soldier.html\"></iframe>`,\n    },\n    {\n      type: \"virtual\",\n      //visible: false,\n      url: process.env.PUBLIC_URL + \"/man.glb\",\n      selectable: false,\n      position: [4522512.53, 15.27, 2625812.8],\n      rotation: [0, 0, 0],\n      scale: [2, 2, 2],\n      smoothRotation: false,\n      actions: {\n        onLoad: {\n          animations: [\n            {\n              name: \"Take 001\",\n              singleLoopDuration: 1000,\n              path: [\n                [4522512.53, 15.27, 2625812.8],\n                [4522525.04, 15.8, 2625798.98],\n                [4522512.53, 15.27, 2625812.8],\n              ],\n              speed: 8,\n              speedUnit: \"km/h\",\n              //dynamicHeight: true\n            },\n          ],\n        },\n      },\n      description: `<iframe\n          style=\"\n            width: 100%;\n            height: 100%;\n            border:none;\"\n          src=\"${process.env.PUBLIC_URL}/templates/soldier.html\"></iframe>`,\n    },\n    {\n      type: \"virtual\",\n      url: process.env.PUBLIC_URL + \"/Soldier.glb\",\n      position: [4522519.65, 15.58, 2625805.5],\n      rotation: [0, Math.PI, 0],\n      scale: [1.5, 1.5, 1.5],\n      smoothRotation: false,\n      actions: {\n        onLoad: {\n          animations: [\n            {\n              name: \"Run\",\n              path: [\n                [4522519.65, 15.58, 2625805.5],\n                [4522524.24, 15.7, 2625800.43],\n                [4522530.28, 16.05, 2625794.24],\n                [4522534.54, 16.24, 2625790.12],\n                [4522540.35, 16.26, 2625784.5],\n                [4522542.02, 16.46, 2625778.88],\n                [4522539.23, 16.56, 2625769.28],\n                [4522537.11, 16.58, 2625763.71],\n                [4522533.94, 16.73, 2625759.93],\n                [4522531.36, 16.61, 2625757.23],\n                [4522530.56, 16.62, 2625755.17],\n                [4522528.4, 16.64, 2625752.29],\n                [4522523.42, 16.64, 2625748.53],\n                [4522517.18, 16.59, 2625744],\n                [4522511.25, 16.61, 2625740.3],\n                [4522506.57, 16.48, 2625737.46],\n                [4522503.06, 16.46, 2625737.66],\n                [4522498.91, 16.3, 2625739.57],\n                [4522493.38, 15.89, 2625740.6],\n                [4522486.96, 15.57, 2625743.43],\n                [4522479.19, 15.23, 2625749.28],\n                [4522478.52, 15.13, 2625752.2],\n                [4522474.53, 15, 2625758.14],\n                [4522474.4, 14.93, 2625767.36],\n                [4522477.27, 15.25, 2625774.56],\n                [4522477.27, 15.25, 2625781.59],\n                [4522480.91, 14.73, 2625793.36],\n                [4522489.27, 14.88, 2625796.78],\n                [4522501.6, 15.05, 2625802.34],\n                [4522514.55, 15.29, 2625811.76],\n              ],\n              speed: 13,\n              speedUnit: \"km/h\",\n            },\n          ],\n        },\n        onSelect: {\n          animations: [\n            {\n              name: \"Idle\",\n              duration: Infinity,\n              path: [[30, 0, 30]],\n              lookAt: \"camera\",\n            },\n          ],\n        },\n      },\n      description: `<iframe\n          style=\"\n            width: 100%;\n            height: 100%;\n            border:none;\"\n          src=\"${process.env.PUBLIC_URL}/templates/soldier.html\"></iframe>`,\n    },\n    {\n      type: \"virtual\",\n      //visible: false,\n      url: process.env.PUBLIC_URL + \"/man.glb\",\n      selectable: false,\n      position: [4522524.93, 16.66, 2625749.88],\n      rotation: [0, 0, 0],\n      scale: [2, 2, 2],\n      smoothRotation: false,\n      actions: {\n        onLoad: {\n          animations: [\n            {\n              name: \"Take 001\",\n              singleLoopDuration: 1400,\n              path: [\n                [4522524.93, 16.66, 2625749.88],\n                [4522503, 16.45, 2625736.87],\n                [4522524.93, 16.66, 2625749.88],\n              ],\n              speed: 4,\n              speedUnit: \"km/h\",\n              //dynamicHeight: true\n            },\n          ],\n        },\n      },\n      description: `<iframe\n          style=\"\n            width: 100%;\n            height: 100%;\n            border:none;\"\n          src=\"${process.env.PUBLIC_URL}/templates/soldier.html\"></iframe>`,\n    },\n    // {\n    //   type: \"virtual\",\n    //   //visible: false,\n    //   url: process.env.PUBLIC_URL + \"/trees.glb\",\n    //   rotation: [-Math.PI / 2, 0, 0],\n    //   position: [\n    //     [4522489.53, 15.29, 2625782.71],\n    //     [4522488.77, 15.72, 2625773],\n    //     [4522489.97, 15.92, 2625763.99],\n    //     [4522493.06, 15.91, 2625756.79],\n    //     [4522499.14, 16.14, 2625750.56],\n    //     [4522530.58, 16.51, 2625771.71],\n    //     [4522527.9, 15.99, 2625787.42]\n    //   ],\n    //   scale: [0.5, 0.5, 0.5],\n    //   scaleDifferenceXY: 0.1,\n    //   scaleDifferenceZ: 0.2,\n    //   description: `<iframe\n    //         style=\"\n    //           width: 100%;\n    //           height: 100%;\n    //           border:none;\"\n    //         src=\"https://en.wikipedia.org/wiki/Tree\"></iframe>`\n    // }\n  ],\n  meta: {\n    authors: [\n      { firstName: \"Konstantinos\", lastName: \"Evanggelidis\" },\n      { firstName: \"Theofilos\", lastName: \"Papadopoulos\" },\n    ],\n    thumbnail: `${process.env.PUBLIC_URL}/worldOne-Thumbnail.png`,\n    coordinates: [4522507.2664, 15.25, 2625770.4946],\n    observationPoints: [\n      {\n        id: \"006cb9aE-F316\",\n        pointId: 1,\n        position: {\n          x: 4522473.81,\n          y: 2625774.06,\n          z: 16.7,\n        },\n        heading: 85,\n      },\n      {\n        id: \"006cb9aE-F316\",\n        pointId: 2,\n        position: {\n          x: 4522516.39,\n          y: 2625740.93,\n          z: 18.6,\n        },\n        heading: 190,\n      },\n      {\n        id: \"006cb9aE-F316\",\n        pointId: 3,\n        position: {\n          x: 4522523.05,\n          y: 2625809.84,\n          z: 17.5,\n        },\n        heading: 348,\n      },\n    ],\n  },\n};\n","export default {\n  id: \"006cb9aE-S322\",\n  name: \"14th Century Great Wall\",\n  description: \"A simple overview of the area near the tower of thessaloniki.\",\n  content: [\n    {\n      type: \"mapped\",\n      url: process.env.PUBLIC_URL + \"/14th_century_great_wall.glb\",\n      position: [0, 0, 0],\n      rotation: [0, 0, 0],\n      scale: [1, 1, 1],\n      ground: true,\n      actions: [],\n      description: `<iframe\n          style=\"\n            width: 100%;\n            height: 100%;\n            border:none;\"\n          src=\"${process.env.PUBLIC_URL}/templates/white-tower.html\"></iframe>`\n    },\n    {\n      type: \"virtual\",\n      url: process.env.PUBLIC_URL + \"/animated_dragon.glb\",\n      position: [1.5, 13, 3],\n      rotation: [0, 0, 0],\n      scale: [20, 20, 20],\n      actions: {\n        onLoad: {\n          animations: [\n            {\n              name: \"idle\",\n              duration: Infinity,\n              singleLoopDuration: 5000,\n              path: [[1.5, 13, 3]]\n            }\n          ]\n        },\n        onSelect: {\n          animations: [\n            {\n              name: \"flying\",\n              duration: Infinity,\n              singleLoopDuration: 6000,\n              path: [[1.5, 15, 3]],\n              lookAt: \"camera\"\n            }\n          ]\n        }\n      },\n      description: `<iframe\n          style=\"\n            width: 100%;\n            height: 100%;\n            border:none;\"\n          src=\"${process.env.PUBLIC_URL}/templates/soldier.html\"></iframe>`\n    }\n  ],\n  meta: {\n    authors: [\n      { firstName: \"Konstantinos\", lastName: \"Evanggelidis\" },\n      { firstName: \"Theofilos\", lastName: \"Papadopoulos\" }\n    ],\n    thumbnail: `${process.env.PUBLIC_URL}/worldTwo-Thumbnail.png`,\n    coordinates: [0, 0, 0]\n  }\n};\n","import * as THREE from \"three\";\nexport default {\n  id: \"006cb9aE-S324\",\n  name: \"Apollonia Bath\",\n  description: \"Simulation of the Otoman Bath in Apollonia.\",\n  actions: [\n    {\n      name: \"Show/Hide Ground\",\n      run: () => {\n        window.mergin_mode.world[window.mergin_mode.currentWorldId].map(\n          (item) => {\n            if (item.ground) {\n              item.object.visible = !item.object.visible;\n            }\n          }\n        );\n      },\n    },\n    {\n      name: \"Change Virtual Transparency\",\n      run: () => {\n        window.mergin_mode.world[window.mergin_mode.currentWorldId].map(\n          (item) => {\n            if (item.type === \"virtual\") {\n              item.object.traverse((child) => {\n                if (child.isMesh) {\n                  child.material.transparent = true;\n                  if (child.material.opacity === 0.3)\n                    child.material.opacity = 1;\n                  else child.material.opacity = 0.3;\n                  child.material.needsUpdate = true;\n                }\n              });\n            }\n          }\n        );\n      },\n    },\n    {\n      name: \"Change FoV\",\n      run: () => {\n        window.mergin_mode.camera.fov += 5;\n\n        if (window.mergin_mode.camera.fov > 130) {\n          window.mergin_mode.camera.fov = 50;\n        }\n        window.mergin_mode.camera.updateProjectionMatrix();\n      },\n    },\n  ],\n  content: [\n    {\n      type: \"virtual\",\n      ground: true,\n      selectable: false,\n      //visible: false,\n      url: process.env.PUBLIC_URL + \"/testworld/ground.glb\",\n      position: [0, 0, 0],\n      rotation: [0, 0, 0],\n      scale: [1, 1, 1],\n      description: ``,\n    },\n    {\n      type: \"virtual\",\n      selectable: false,\n      //visible: false,\n      url: process.env.PUBLIC_URL + \"/testworld/hamam.glb\",\n      position: [0, 0, 0],\n      rotation: [0, 0, 0],\n      scale: [1, 1, 1],\n      description: ``,\n    },\n    {\n      type: \"virtual\",\n      url: process.env.PUBLIC_URL + \"/testworld/taksidiotisS2.glb\",\n      selectable: false,\n      position: [0, 0, 0],\n      rotation: [0, 0, 0],\n      scale: [1, 1, 1],\n      description: ``,\n      actions: {\n        onLoad: {\n          animations: [\n            {\n              // man entering\n              // starts 0\n              name: \"Bip01|Take 001|BaseLayer.002\",\n              duration: 33000,\n              singleLoopDuration: 33000,\n              path: [[0, 0, 0]],\n            },\n          ],\n        },\n      },\n    },\n    {\n      type: \"virtual\",\n      url: process.env.PUBLIC_URL + \"/testworld/taksidiotis.glb\",\n      selectable: false,\n      position: [0, 0, 0],\n      rotation: [0, 0, 0],\n      scale: [1, 1, 1],\n      description: ``,\n      actions: {\n        onLoad: {\n          animations: [\n            {\n              // man entering\n              // starts 0\n              name: \"Bip MAN 1|Take 001|BaseLayer\",\n              duration: 33000,\n              singleLoopDuration: 33000,\n              path: [[0, 0, 0]],\n            },\n          ],\n        },\n      },\n    },\n    {\n      type: \"virtual\",\n      url: process.env.PUBLIC_URL + \"/testworld/loutraris.glb\",\n      selectable: false,\n      position: [0, 0, 0],\n      rotation: [0, 0, 0],\n      scale: [1, 1, 1],\n      description: ``,\n      actions: {\n        onLoad: {\n          animations: [\n            {\n              // man entering\n              // starts 0\n              name: \"Bip MAN L|Take 001|BaseLayer.001\",\n              duration: 33000,\n              singleLoopDuration: 33000,\n              path: [[0, 0, 0]],\n            },\n          ],\n        },\n      },\n    },\n    {\n      type: \"virtual\",\n      url: process.env.PUBLIC_URL + \"/testworld/petseta.glb\",\n      selectable: false,\n      position: [0, 0, 0],\n      rotation: [0, 0, 0],\n      scale: [1, 1, 1],\n      description: ``,\n      actions: {\n        onLoad: {\n          animations: [\n            {\n              // man entering\n              // starts 0\n              name: \"3D PESHTEMAL|Take 001|BaseLayer\",\n              duration: 33000,\n              singleLoopDuration: 33000,\n              path: [[0, 0, 0]],\n            },\n          ],\n        },\n      },\n    },\n  ],\n  meta: {\n    authors: [\n      { firstName: \"Konstantinos\", lastName: \"Evanggelidis\" },\n      { firstName: \"Theofilos\", lastName: \"Papadopoulos\" },\n    ],\n    thumbnail: `${process.env.PUBLIC_URL}/worldThree-Thumbnail.png`,\n    coordinates: [0, 0, 0],\n  },\n};\n","import { combineReducers } from \"redux\";\nimport api from \"./api\";\nimport worldDataOne from \"../testFiles/worldOne.js\";\nimport worldDataTwo from \"../testFiles/worldTwo.js\";\nimport worldDataThree from \"../testFiles/worldThree.js\";\nimport { fromLonLat } from \"ol/proj.js\";\nconst startWorld = {\n  id: \"0\",\n  name: \"Start World\",\n  description: \"Start World\",\n  content: [],\n  meta: {\n    authors: [\n      { firstName: \"Konstantinos\", lastName: \"Evanggelidis\" },\n      { firstName: \"Theofilos\", lastName: \"Papadopoulos\" },\n    ],\n    coordinates: [0, 0, 0],\n  },\n};\n\nwindow.mergin_mode = {\n  modelLayer: [],\n  vectors: [],\n  plane: {},\n  sky: {},\n  mixers: [],\n  camera: {},\n  controls: {},\n  scene: {},\n  renderer: {},\n  pointer: {},\n  partials: {},\n  loaders: {},\n  selected: {\n    object: null,\n    material: null,\n  },\n  listeners: {\n    mouseMoved: false,\n  },\n  center: [0, 0, 0],\n  onWindowResize: () => {},\n  world: {},\n  currentWorldId: 0,\n  worlds: [startWorld, worldDataOne, worldDataTwo, worldDataThree],\n};\n\nconst rootReducer = combineReducers({\n  api,\n});\n\nexport default rootReducer;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport \"bootstrap/dist/css/bootstrap.css\";\nimport App from \"./components/App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport { Provider } from \"react-redux\";\nimport { applyMiddleware, createStore } from \"redux\";\nimport { createLogger } from \"redux-logger\";\nimport thunkMiddleware from \"redux-thunk\";\n\nimport reducer from \"./reducers\";\n// import { fromLonLat } from \"ol/proj.js\";\n// const towerlocationConvert = fromLonLat([40.626374, 22.948324, 15.25]);\n// const treelocationConvert = fromLonLat([40.62626, 22.947929, 15.25]);\n// const userConvert = fromLonLat([40.626288, 22.947957, 15.25]);\n//\nconst rootElement = document.getElementById(\"root\");\n\nconst loggerMiddleware = createLogger({\n  // ...options\n});\n\nconst store = createStore(\n  reducer,\n  window.__REDUX_DEVTOOLS_EXTENSION__ &&\n    window.__REDUX_DEVTOOLS_EXTENSION__() /*,\n  applyMiddleware(thunkMiddleware, loggerMiddleware)*/\n);\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  rootElement\n);\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}