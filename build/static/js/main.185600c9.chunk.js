(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{105:function(e,n,t){"use strict";t.r(n);var i=t(0),o=t.n(i),r=t(8),a=t.n(r),d=(t(89),t(90),t(91),t(25)),c=t(31),l=t(16),m=t(45),s=t(1),u=t(65),w=t(66),p=t(56),g=t(55),f=function(e,n,t,i){return{Xb:e+t*Math.sin(i/63.6619772367581),Yb:n+t*Math.cos(i/63.6619772367581)}},h=function(e,n,t,i){var o,r=Math.abs(t-e),a=Math.abs(i-n),d=Math.sqrt(Math.pow(r,2)+Math.pow(a,2)),c=t-e,l=i-n,m=63.6619772367581*Math.atan(r/a);return c>0&&l>0?o=m:c>0&&l<0?o=200-m:c<0&&l<0?o=200+m:c<0&&l>0?o=400-m:0===c&&l>0?o=0:0===c&&l<0?o=200:c>0&&0===l?o=100:c<0&&0===l?o=300:0===c&&0===l&&(o=0),{Gab:o.toFixed(4),Sab:d.toFixed(4)}},v=function(e,n,t){var i=new s.Vector3(e.x,e.y+t,e.z);return((new s.Raycaster(i,new s.Vector3(0,-1,0)).intersectObjects(n.children,!0)[0]||{}).point||{}).y||0},b=function(e,n){function t(){n.style.textDecoration="line-through ",n.style.pointerEvents="none",n.onclick=null,n.style.textDecoration="line-through",n.style.pointerEvents="none"}if("xr"in navigator)return navigator.xr.isSessionSupported("immersive-vr").then((function(i){i?function(){var t=null;function i(n){n.addEventListener("end",o),e.xr.setSession(n),t=n}function o(){t.removeEventListener("end",o),n.textContent="ENTER VR",t=null}n.onclick=function(){if(null===t){navigator.xr.requestSession("immersive-vr",{optionalFeatures:["local-floor","bounded-floor"]}).then(i)}else t.end()}}():t()})),n;var i=document.createElement("a");return i.href="https://immersiveweb.dev/",!1===window.isSecureContext?i.innerHTML="WEBXR NEEDS HTTPS":i.innerHTML="WEBXR NOT AVAILABLE",i.style.left="calc(50% - 90px)",i.style.width="180px",i.style.textDecoration="none",i};Math.PI;function x(e,n,t,i,o,r,a,d,c,x){a.FBXLoader=p.a,a.GLTFLoader=g.a;var y=new s.Clock,_=document.getElementById("three-map");t=new s.Scene;var E=document.getElementsByTagName("video")[0],I=new s.VideoTexture(E);I.minFilter=s.LinearFilter,I.magFilter=s.LinearFilter,I.format=s.RGBFormat,(i=new s.WebGLRenderer({antialias:!0,logarithmicDepthBuffer:!0})).xr.enabled=!0,i.setPixelRatio(window.devicePixelRatio),i.setSize(_.clientWidth,_.clientHeight),i.sortObjects=!1,_.appendChild(i.domElement),e=new s.PerspectiveCamera(60,_.clientWidth/_.clientHeight,1,1e6),window.mergin_mode.realities={virtual:function(){i.setClearColor("#4285f4",1),t.background=void 0,t.position.set(0,0,0),e.position.set(-15.08,1.7,52.64)},augmented:function(){t.background=I,i.setClearColor(0,0),t.position.set(0,0,0),e.position.set(-15.08,1.7,52.64)},mixed:function(){t.background=I,i.setClearColor(0,0),t.position.set(0,0,0),e.position.set(-15.08,1.7,52.64)}},window.mergin_mode.realities.virtual(),(n=function(){var e,n=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(n=!0),n}()?new w.a(e):new u.a(e,i.domElement)).enableDamping=!1,n.dampingFactor=.05,n.screenSpacePanning=!1,n.minDistance=1,n.maxDistance=1e6,n.rotateSpeed=.8,n.panSpeed=.8,n.zoomSpeed=.8;var j=new s.PlaneBufferGeometry(100,100,99,99);!function(e){for(var n=e.getAttribute("position"),t=n.array,i=2,o=0;i<t.length;i+=3,o++)t[i]=0;n.needsUpdate=!0,e.computeVertexNormals()}(j);var O=new s.MeshPhongMaterial({wireframe:!0,color:"#222",side:s.DoubleSide});O.flatShading=!0;var S=new s.Mesh(j,O);S.position.set(0,0,0),S.castShadow=!1,S.receiveShadow=!1,S.geometry.rotateX(Math.PI/2);var k=new s.GridHelper(1e3,100);t.add(k);var M=new s.AmbientLight(16777215,2);M.channel=123,t.add(M),o=new s.Mesh(new s.SphereGeometry(.5,32,32),new s.MeshBasicMaterial({color:"red"}));var L=new s.Mesh(new s.SphereGeometry(150,32,32),new s.MeshBasicMaterial({opacity:0,transparent:!0,alphaTest:.05,side:s.DoubleSide}));t.add(L);var D=new s.Raycaster,T=new s.Vector2,W=function e(n){return!(!n||!window.mergin_mode.world[window.mergin_mode.currentWorldId])&&(-1!==window.mergin_mode.world[window.mergin_mode.currentWorldId].map((function(e){return e.id})).indexOf(n.uuid)?n:e(n.parent))};function N(){e.aspect=_.clientWidth/_.clientHeight,e.updateProjectionMatrix(),i.setSize(_.clientWidth,_.clientHeight)}return i.setAnimationLoop((function(){n.update(),function(){if(i.render(t,e),!window.mergin_mode.world[window.mergin_mode.currentWorldId])return!0;var n=y.getDelta();window.mergin_mode.world[window.mergin_mode.currentWorldId].forEach((function(e){if(e.actions){var t,i=(null===(t=window.mergin_mode.selected.object)||void 0===t?void 0:t.uuid)==e.id?e.selectedRuntimeInfo:e.runtimeInfo;i&&i.mixer.update(n)}})),window.mergin_mode.world[window.mergin_mode.currentWorldId].forEach((function(e){var t,i;if(e.runtimeInfo&&(null===(t=e.actions)||void 0===t||null===(i=t.onLoad)||void 0===i?void 0:i.animations)&&e.object){var o,r,a=function(e,n){var t,i,o=Number(n.object.position.x.toFixed(4)),r=Number(n.object.position.z.toFixed(4)),a=(null===(t=window.mergin_mode.selected.object)||void 0===t?void 0:t.uuid)==n.id?n.actions.onSelect:n.actions.onLoad,d=(null===(i=window.mergin_mode.selected.object)||void 0===i?void 0:i.uuid)==n.id?n.selectedRuntimeInfo:n.runtimeInfo;if(n.actions.onSelect===a){var c=Number(h(n.object.position.x,n.object.position.z,window.mergin_mode.camera.position.x,window.mergin_mode.camera.position.z).Gab),m=c?c/63.661977236758:0;n.object.rotation.set(n.rotation[0],n.rotation[1]+m,n.rotation[2])}var u=a.animations[d.animationIndex];if(d.duration+=e,u.duration){if(d.duration>=u.duration/1e3)if(d.duration=0,a.animations.length-1>d.animationIndex){d.animationIndex++,d.pathIndex=0;var w=new s.AnimationMixer(n.object);w.clipAction(n.object.animations.filter((function(e){return e.name==a.animations[d.animationIndex].name}))[0]).setDuration(1).play(),d.mixer=w}else{d.animationIndex=0,d.pathIndex=0;var p=new s.AnimationMixer(n.object);p.clipAction(n.object.animations.filter((function(e){return e.name==a.animations[d.animationIndex].name}))[0]).setDuration(1).play(),d.mixer=p}return!1}var g=u.path[d.pathIndex],b=Number((g[0]-window.mergin_mode.center[0]).toFixed(4)),x=Number((g[2]-window.mergin_mode.center[2]).toFixed(4)),y=e*u.speed/60/60*1e3,_=u.path[d.pathIndex-1]?u.path[d.pathIndex-1]:u.path[d.pathIndex],E=Number(h(_[0]-window.mergin_mode.center[0],_[2]-window.mergin_mode.center[2],b,x).Gab);if(E<=100&&o>=b&&r>=x||E>100&&E<=200&&o>=b&&r<=x||E>200&&E<=300&&o<=b&&r<=x||E>300&&o<=b&&r>=x){if(u.path.length-1>d.pathIndex)d.pathIndex++,d.duration=0;else if(a.animations.length-1>d.animationIndex){d.animationIndex++,d.pathIndex=0,d.duration=0;var I=new s.AnimationMixer(n.object);I.clipAction(n.object.animations.filter((function(e){return e.name==a.animations[d.animationIndex].name}))[0]).setDuration(1).play(),d.mixer=I}else{d.animationIndex=0,d.pathIndex=0,d.duration=0;var j=new s.AnimationMixer(n.object);j.clipAction(n.object.animations.filter((function(e){return e.name==a.animations[d.animationIndex].name}))[0]).setDuration(1).play(),d.mixer=j}var O=a.animations[d.animationIndex].path[d.pathIndex-1]?a.animations[d.animationIndex].path[d.pathIndex-1]:a.animations[d.animationIndex].path[d.pathIndex];return v({x:O[0],z:O[1],y:O[2]},window.mergin_mode.world[window.mergin_mode.currentWorldId].filter((function(e){return 1==e.ground}))[0].object,3),{position:O.reduce((function(e,n,t){return[].concat(Object(l.a)(e),[n-window.mergin_mode.center[t]])}),[])}}var S=f(o,r,y,E),k=v({x:S.Xb,z:S.Yb,y:n.object.position.y},window.mergin_mode.world[window.mergin_mode.currentWorldId].filter((function(e){return 1==e.ground}))[0].object,3),M=E?E/63.661977236758:0;return{position:[S.Xb,k,S.Yb],rotation:[n.rotation[0],n.rotation[1]+M,n.rotation[2]]}}(n,e);if(a)a.position&&(o=e.object.position).set.apply(o,Object(l.a)(a.position)),a.rotation&&(r=e.object.rotation).set.apply(r,Object(l.a)(a.rotation))}})),window.mergin_mode.selected.object&&window.mergin_mode.selected.objectHelper.update()}()})),window.addEventListener("resize",N,!1),document.getElementById("three-map").addEventListener("mousedown",(function(){var n=function(){window.mergin_mode.listeners.mouseMoved=!0};document.getElementById("three-map").addEventListener("mousemove",n),document.getElementById("three-map").addEventListener("mouseup",(function o(r){window.mergin_mode.listeners.mouseMoved||function(n){if(window.mergin_mode.listeners.mouseMoved)return!0;window.mergin_mode.selected.object&&(t.remove(window.mergin_mode.selected.objectHelper),window.mergin_mode.selected.object=null,window.mergin_mode.selected.material=null);var o=i.domElement.getBoundingClientRect();T.x=((n.clientX||n.changedTouches[0].clientX)-o.left)/o.width*2-1,T.y=-((n.clientY||n.changedTouches[0].clientY)-o.top)/o.height*2+1,D.setFromCamera(T,e);var r,a,d=D.intersectObjects(t.children,!0),c=Object(m.a)(d);try{for(c.s();!(a=c.n()).done;){var l=a.value;if(r=W(null===l||void 0===l?void 0:l.object))if(!1!==window.mergin_mode.world[window.mergin_mode.currentWorldId].filter((function(e){return e.id==r.uuid}))[0].selectable)break}}catch(g){c.e(g)}finally{c.f()}if(!r)return x(null),!1;new s.MeshPhongMaterial({color:"#b34f0b",side:s.DoubleSide}),window.mergin_mode.selected.object=r,window.mergin_mode.selected.objectHelper=new s.BoxHelper(r),window.mergin_mode.selected.objectHelper.material.color.set(16777215),t.add(window.mergin_mode.selected.objectHelper),t.add(window.mergin_mode.selected.objectHelper);var u=window.mergin_mode.world[window.mergin_mode.currentWorldId].filter((function(e){return e.id==r.uuid}))[0],w=u.selectedRuntimeInfo;if(w){w.animationIndex=0,w.pathIndex=0,w.duration=0;var p=new s.AnimationMixer(r);p.clipAction(r.animations.filter((function(e){return e.name==u.actions.onSelect.animations[u.selectedRuntimeInfo.animationIndex].name}))[0]).setDuration((u.actions.onSelect.animations[u.selectedRuntimeInfo.animationIndex].singleLoopDuration||1e3)/1e3).play(),w.mixer=p}x(r.uuid)}(r),window.mergin_mode.listeners.mouseMoved=!1,document.getElementById("three-map").removeEventListener("mouseup",o),document.getElementById("three-map").removeEventListener("mousemove",n)}))})),b(i,window.vrh),b(i,window.mrh),{plane:S,camera:e,controls:n,scene:t,renderer:i,pointer:o,partials:r,loaders:a,onWindowResize:N}}g.a.prototype.load2=function(e,n){var t=this,i=e[0],o=new FileReader;o.onload=function(e){2!==e.target.readyState&&0!==e.target.status||t.parse(e.target.result||e.target.responseText,"",n)},o.readAsArrayBuffer(i)},p.a.prototype.load2=function(e,n){var t=this,i=e[0],o=new FileReader;o.onload=function(e){if(2===e.target.readyState||0===e.target.status){var i=t.parse(e.target.result||e.target.responseText);n&&n(i)}},o.readAsArrayBuffer(i)};var y=Object(c.b)((function(e){return{api:e.api}}),(function(e){return{setDescriptiveData:function(n){return e({type:"SET_DESCRIPTIVE_DATA",descriptiveData:n})}}}))((function(e){return Object(i.useEffect)((function(){var n;if(!(null===(n=navigator.mediaDevices)||void 0===n?void 0:n.getUserMedia))return!1;navigator.mediaDevices.getUserMedia({video:{width:1280,height:720,facingMode:"environment"}}).then((function(e){var n=document.getElementById("video");n.srcObject=e,n.play()}));var t=window.mergin_mode,i=(t.mixers,t.camera),o=t.controls,r=t.scene,a=t.renderer,c=t.pointer,l=t.partials,m=t.loaders,s=(document.getElementById("three-map"),x(i,o,r,a,c,l,m,0,0,(function(n){var t=n?window.mergin_mode.world[window.mergin_mode.currentWorldId].filter((function(e){return e.id==n}))[0].description:null;window["descriptive-data-container"].classList.add("transition"),window["descriptive-data-container"].style.height=t?"33%":"0%",setTimeout((function(){window["descriptive-data-container"].classList.remove("transition")}),1e3),e.setDescriptiveData(t)})));window.mergin_mode=Object(d.a)(Object(d.a)({},window.mergin_mode),s)}),[]),o.a.createElement("div",{id:"world"},o.a.createElement("video",{id:"video",style:{display:"none"},autoPlay:!0,playsInline:!0}),o.a.createElement("div",{id:"three-map",style:{position:"absolute",width:"100%",height:"100%"}}))})),_=t(11),E=t(4),I=t(132),j=t(143),O=t(142),S=t(140),k=t(141),M=function(e){var n=Object(I.a)((function(e){return{root:Object(E.a)({pointerEvents:"none",height:380,transform:"translateZ(0px)",flexGrow:1,flex:1,zIndex:10,width:"100%"},"height","100%"),speedDial:{position:"absolute",bottom:e.spacing(2),right:e.spacing(2),"& .MuiSpeedDialAction-staticTooltip .MuiSpeedDialAction-staticTooltipLabel":{whiteSpace:"nowrap"},"& .MuiButtonBase-root.MuiFab-root.MuiSpeedDial-fab.MuiFab-primary":{width:48,height:48,"& .MuiFab-label":{display:"initial"},"&:focus":{outline:"none"}}}}}))(),t=o.a.useState(!1),i=Object(_.a)(t,2),r=i[0],a=i[1],d=function(){a(!1)};return o.a.createElement("div",{className:n.root},o.a.createElement(j.a,{open:r}),o.a.createElement(O.a,{ariaLabel:"Action Tooltip",className:n.speedDial,icon:o.a.createElement(k.a,null),onClose:d,onOpen:function(){a(!0)},open:r},e.actions.map((function(e){return o.a.createElement(S.a,{key:e.name,icon:e.icon,tooltipTitle:e.name,tooltipOpen:!0,onClick:d})}))))},L=t(139),D=Object(I.a)((function(e){return{paper:{position:"absolute",fontFamily:"Ubuntu",width:"98%",height:"98%",backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3),borderRadius:20,display:"flex",flexFlow:"column"}}})),T=function(e){var n=D(),t=o.a.useState(!1),i=Object(_.a)(t,2),r=(i[0],i[1],o.a.createElement("div",{className:n.paper},e.data));return o.a.createElement(L.a,{open:!0,onClose:e.onClose,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},r)},W=t(22),N=t.n(W),F=t(30),A=t(51),R=t(68),C=function(e,n,t,i,o,r){var a=e[0],d=(a.name,a.size,a.url),c=window.mergin_mode,m=(c.scene,new c.loaders.GLTFLoader),u=new R.a;return m.setDRACOLoader(u),new Promise((function(e,a){m.load(d,(function(a){var d,c,m,u;(d=a.scene.position).set.apply(d,Object(l.a)(n.reduce((function(e,n,t){return[].concat(Object(l.a)(e),[n-window.mergin_mode.center[t]])}),[]))),(c=a.scene.scale).set.apply(c,Object(l.a)(i)),(m=a.scene.rotation).set.apply(m,Object(l.a)(t)),a.scene.animations=a.animations,r&&(u=new s.MeshPhongMaterial({color:0,blending:s[r]}),a.scene.renderOrder=999),a.scene.traverse((function(e){e.isMesh&&r&&(e.material=u,e.renderOrder=999)})),e({referenceIndex:o,uuid:a.scene.uuid,object:a.scene})}),(function(){}),(function(e){a(e)}))}))},z={id:"006cb9aE-F316",name:"White Tower Of Thessaloniki",description:"A simple overview of the area near the tower of thessaloniki.",content:[{refId:"white_tower",type:"model",url:"/white-tower.gltf",position:[4522507.2664,15.25,2625770.4946],rotation:[0,0,0],scale:[1.1,1.1,1.1],visible:!1,actions:[],description:'<iframe\n          style="\n            width: 100%;\n            height: 100%;\n            border:none;"\n          src="'.concat("",'/templates/white-tower.html"></iframe>')},{type:"model",url:"/tree-green.fbx",rotation:[0,0,0],position:[4522507.2664,15.25,2625790.4946],scale:[.1,.1,.1],description:'<iframe\n            style="\n              width: 100%;\n              height: 100%;\n              border:none;"\n            src="https://en.wikipedia.org/wiki/Tree"></iframe>'},{type:"model",ground:!0,selectable:!1,url:"/white-tower-area.gltf",position:[4522507.2664,15.25,2625770.4946],rotation:[0,-Math.PI/2,0],scale:[1,1,1],description:""},{type:"model",url:"/Soldier.glb",position:[4522505.2664,15.75,2625790.4946],rotation:[0,Math.PI,0],scale:[.8,.8,.8],actions:{onLoad:{animations:[{name:"Idle",duration:5e3,path:[[4522505.2664,15.75,2625790.4946]]}]},onSelect:{animations:[{name:"Idle",duration:1/0,path:[[4522505.2664,15.75,2625790.4946]],lookAt:"camera"}]}},description:'<iframe\n          style="\n            width: 100%;\n            height: 100%;\n            border:none;"\n          src="'.concat("",'/templates/soldier.html"></iframe>')},{type:"model",url:"/Soldier.glb",position:[4522483.8164,15.37,2625795.6245999997],rotation:[0,Math.PI,0],scale:[.8,.8,.8],actions:{onLoad:{animations:[{name:"Idle",duration:5e3,path:[[4522483.8164,15.37,2625795.6245999997]]},{name:"Walk",path:[[4522483.8164,15.37,2625795.6245999997],[4522502.1864,14.97,2625803.1346],[4522526.1564,14.8,2625798.6346],[4522538.4964000005,14.98,2625779.0245999997],[4522539.5864,15.74,2625755.2446],[4522520.8964,16.24,2625733.8046],[4522498.0364,16.66,2625742.6846],[4522486.8464,16.66,2625751.4446],[4522480.1764,16.61,2625760.8145999997],[4522474.7964,16.53,2625770.7545999996],[4522476.7164,16.41,2625776.9546],[4522481.2364,15.51,2625791.9646],[4522483.8164,15.37,2625795.6245999997]],speed:5,speedUnit:"km/h"},{name:"Run",path:[[4522483.8164,15.37,2625795.6245999997],[4522502.1864,14.97,2625803.1346],[4522526.1564,14.8,2625798.6346],[4522538.4964000005,14.98,2625779.0245999997],[4522539.5864,15.74,2625755.2446],[4522520.8964,16.24,2625733.8046],[4522498.0364,16.66,2625742.6846],[4522486.8464,16.66,2625751.4446],[4522480.1764,16.61,2625760.8145999997],[4522474.7964,16.53,2625770.7545999996],[4522476.7164,16.41,2625776.9546],[4522481.2364,15.51,2625791.9646],[4522483.8164,15.37,2625795.6245999997]],speed:10,speedUnit:"km/h"}]},onSelect:{animations:[{name:"Idle",duration:1/0,path:[[30,0,30]],lookAt:"camera"}]}},description:'<iframe\n          style="\n            width: 100%;\n            height: 100%;\n            border:none;"\n          src="'.concat("",'/templates/soldier.html"></iframe>')}],meta:{authors:[{firstName:"Konstantinos",lastName:"Evanggelidis"},{firstName:"Theofilos",lastName:"Papadopoulos"}],thumbnail:"".concat("","/worldOne-Thumbnail.png"),coordinates:[4522507.2664,15.25,2625770.4946]}},P={id:"006cb9aE-S322",name:"14th Century Great Wall",description:"A simple overview of the area near the tower of thessaloniki.",content:[{type:"model",url:"/14th_century_great_wall.glb",position:[0,0,0],rotation:[0,0,0],scale:[1,1,1],ground:!0,actions:[],description:'<iframe\n          style="\n            width: 100%;\n            height: 100%;\n            border:none;"\n          src="'.concat("",'/templates/white-tower.html"></iframe>')},{type:"model",url:"/animated_dragon.glb",position:[1.5,13,3],rotation:[0,0,0],scale:[20,20,20],actions:{onLoad:{animations:[{name:"idle",duration:1/0,singleLoopDuration:5e3,path:[[1.5,13,3]]}]},onSelect:{animations:[{name:"flying",duration:1/0,singleLoopDuration:6e3,path:[[1.5,15,3]],lookAt:"camera"}]}},description:'<iframe\n          style="\n            width: 100%;\n            height: 100%;\n            border:none;"\n          src="'.concat("",'/templates/soldier.html"></iframe>')}],meta:{authors:[{firstName:"Konstantinos",lastName:"Evanggelidis"},{firstName:"Theofilos",lastName:"Papadopoulos"}],thumbnail:"".concat("","/worldTwo-Thumbnail.png"),coordinates:[0,0,0]}},H=[z,P],B={gltf:C,glb:C,fbx:function(e,n,t,i,o,r){var a=e[0],d=(a.name,a.size,a.url),c=window.mergin_mode,m=(c.scene,new c.loaders.FBXLoader);return new Promise((function(e,a){m.load(d,(function(a){var d,c,m;a.traverse((function(e){e.isMesh&&r&&(e.material.blending=s[r],e.material.needsUpdate=!0)})),(d=a.position).set.apply(d,Object(l.a)(n.reduce((function(e,n,t){return[].concat(Object(l.a)(e),[n-window.mergin_mode.center[t]])}),[]))),(c=a.scale).set.apply(c,Object(l.a)(i)),(m=a.rotation).set.apply(m,Object(l.a)(t)),e({referenceIndex:o,uuid:a.uuid,object:a})}),(function(){}),(function(e){a(e)}))}))}},Y=function(){var e=Object(F.a)(N.a.mark((function e(n){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=function(e){return e.split(/[#?]/)[0].split(".").pop().trim()},Object(A.a)([40.626374,22.948324,15.25]),function(e){window.mergin_mode.center=e.meta.coordinates;var n=e.content,i=window.mergin_mode,o=(i.renderer,i.scene,i.camera,[]);if(window.mergin_mode.world[e.id])return!0;window.mergin_mode.world[e.id]=[];var r,a=Object(m.a)(n.entries());try{for(a.s();!(r=a.n()).done;){var d=Object(_.a)(r.value,2),c=d[0],l=d[1];"model"===l.type&&(o.push(B[t(l.url)]([{url:l.url}],l.position,l.rotation,l.scale,c,l.blending)),window.mergin_mode.world[e.id].push(l))}}catch(u){a.e(u)}finally{a.f()}return Promise.all(o).then((function(e){e.forEach((function(e){window.mergin_mode.world[window.mergin_mode.currentWorldId][e.referenceIndex].id=e.uuid,window.mergin_mode.world[window.mergin_mode.currentWorldId][e.referenceIndex].object=e.object,window.mergin_mode.scene.add(e.object),e.object.traverse((function(n){n.isMesh&&(0==window.mergin_mode.world[window.mergin_mode.currentWorldId][e.referenceIndex].visible&&(n.material.opacity=0,n.material.transparent=!0),n.material.flatShading=!1,n.geometry.computeVertexNormals())}));var n=window.mergin_mode.world[window.mergin_mode.currentWorldId][e.referenceIndex].actions||{};if((n.onLoad||{}).animations){var t=new s.AnimationMixer(e.object),i=window.mergin_mode.world[window.mergin_mode.currentWorldId][e.referenceIndex].object.animations.filter((function(e){return e.name==n.onLoad.animations[0].name}))[0];t.clipAction(i).setDuration((n.onLoad.animations[0].singleLoopDuration||1e3)/1e3).play(),window.mergin_mode.world[window.mergin_mode.currentWorldId][e.referenceIndex].runtimeInfo={animationIndex:0,pathIndex:0,duration:0,mixer:t}}if((n.onSelect||{}).animations){var o=new s.AnimationMixer(e.object),r=window.mergin_mode.world[window.mergin_mode.currentWorldId][e.referenceIndex].object.animations.filter((function(e){return e.name==n.onSelect.animations[0].name}))[0];o.clipAction(r).setDuration((n.onSelect.animations[0].singleLoopDuration||1e3)/1e3).play(),window.mergin_mode.world[window.mergin_mode.currentWorldId][e.referenceIndex].selectedRuntimeInfo={animationIndex:0,pathIndex:0,duration:0,mixer:o}}}))})).catch((function(e){console.error(e)}))}(H.filter((function(e){return e.id==n}))[0]);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();function V(e){var n=o.a.useState({selectedId:null}),t=Object(_.a)(n,2),i=t[0],r=t[1];return o.a.createElement(o.a.Fragment,null,e.item.map((function(e){return o.a.createElement("div",{key:e.id,className:"world-item",style:{border:e.id===i.selectedId?"1px solid #b34f0b":"1px solid #fff"},onClick:function(){r({selectedId:e.id}),window.mergin_mode.currentWorldId&&e.id!==window.mergin_mode.currentWorldId&&window.mergin_mode.world[window.mergin_mode.currentWorldId].map((function(e){e.object&&(e.object.visible=!1)})),window.mergin_mode.currentWorldId=e.id,window.mergin_mode.center=e.meta.coordinates,window.mergin_mode.world.hasOwnProperty(e.id)?window.mergin_mode.world[window.mergin_mode.currentWorldId].map((function(e){e.object&&(e.object.visible=!0)})):Object(F.a)(N.a.mark((function n(){return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Y(e.id);case 2:case"end":return n.stop()}}),n)})))()}},e.meta.thumbnail&&o.a.createElement("img",{src:e.meta.thumbnail}),o.a.createElement("label",null,e.name),o.a.createElement("p",null,e.description))})))}t(97);var G=t(72),X=t.n(G),q=t(71),U=t.n(q),J=t(137),K=t(69),Q=t.n(K),Z=function(e){var n=o.a.useState(!0),t=Object(_.a)(n,2);t[0],t[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:25}},o.a.createElement("i",{style:{fontSize:70},className:"fas fa-qrcode"}),o.a.createElement("h2",{style:{marginLeft:24,fontWeight:900,textTransform:"uppercase",color:"#606059",letterSpacing:5},id:"simple-modal-title"},"QR Code Scanner")),o.a.createElement("p",{id:"simple-modal-description",style:{flex:1}},o.a.createElement("div",{style:{height:"calc(100% - 30px)",position:"relative"}},o.a.createElement("div",{className:"scan-tip"},o.a.createElement(Q.a,{delay:300,onError:function(e){},onScan:function(n){if(n){var t=JSON.parse(n),i=window.mergin_mode.worlds.filter((function(e){return e.id==t.id}))[0];if(i){window.mergin_mode.currentWorldId&&i.id!==window.mergin_mode.currentWorldId&&window.mergin_mode.world[window.mergin_mode.currentWorldId].map((function(e){e.object&&(e.object.visible=!1)})),window.mergin_mode.currentWorldId=i.id,window.mergin_mode.center=i.meta.coordinates,window.mergin_mode.world.hasOwnProperty(i.id)?window.mergin_mode.world[window.mergin_mode.currentWorldId].map((function(e){e.object&&(e.object.visible=!0)})):Object(F.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y(i.id);case 2:case"end":return e.stop()}}),e)})))(),window.mergin_mode.camera.position.set(t.position.x-window.mergin_mode.center[0],t.position.z-window.mergin_mode.center[1],t.position.y-window.mergin_mode.center[2]);var o=new s.Vector3,r=new s.Spherical;window.mergin_mode.camera.getWorldDirection(o),r.setFromVector3(o);var a=(360-s.Math.radToDeg(r.theta)-180).toFixed(0);360==a&&(a=0),a!=t.heading&&(window.mergin_mode.controls.alphaOffset=Number(((t.heading-a)*Math.PI/180).toFixed(4))),window.mergin_mode.controls.update(),e.onClose()}}},style:{width:"100%"}}))),o.a.createElement("div",{style:{textAlign:"center"}},o.a.createElement(J.a,{style:{fontSize:"18px",color:"#313129",fontWeight:600},onClick:e.onClose},"Close"))))},$=function(e,n,t){return function(i){n.current.style.height="100%";var o=function(t){e.current.classList.add("transition"),.33==(e.current.offsetHeight/window.innerHeight).toFixed(2)?e.current.style.height="0%":e.current.style.height="33%",window.removeEventListener("mousemove",r),window.removeEventListener("touchmove",r),window.removeEventListener("mouseup",a),window.removeEventListener("touchend",a),setTimeout((function(){e.current.classList.remove("transition"),n.current.style.height="48px"}),500)};t.current={height:null,movementY:null,previousTouchY:null,previousHeight:e.current.offsetHeight};var r=function(n){t.current.moved=!0,"undefined"===typeof n.movementY?(t.current.movementY=n.touches[0].pageY-(t.current.previousTouchY||n.touches[0].pageY),t.current.previousTouchY=n.touches[0].pageY):t.current.movementY=n.movementY,t.current.height=e.current.offsetHeight-t.current.movementY,e.current.style.height="".concat(t.current.height,"px")};window.addEventListener("mousemove",r),window.addEventListener("touchmove",r);var a=function i(){if(!t.current.moved)return o();e.current.classList.add("transition");var a=t.current.previousHeight-e.current.offsetHeight,d=(e.current.offsetHeight/window.innerHeight).toFixed(2);Number(d)<=.33?t.current.height=a>=0?"0%":"33%":t.current.height=a>=0?"33%":"100%",e.current.style.height="".concat(t.current.height),setTimeout((function(){e.current.classList.remove("transition"),n.current.style.height="48px"}),500),window.removeEventListener("mousemove",r),window.removeEventListener("touchmove",r),window.removeEventListener("mouseup",i),window.removeEventListener("touchend",i)};window.addEventListener("mouseup",a),window.addEventListener("touchend",a)}},ee=Object(c.b)((function(e){return{descriptiveData:e.api.descriptiveData}}),(function(e){return{}}))((function(e){var n=Object(i.useRef)(),t=Object(i.useRef)(),r=Object(i.useState)({geolocation:!1}),a=Object(_.a)(r,2),c=a[0],l=a[1],m=Object(i.useState)(null),u=Object(_.a)(m,2),w=u[0],p=u[1],g=Object(i.useState)({position:{x:0,y:0,z:0},heading:[0]}),f=Object(_.a)(g,2),h=f[0],v=f[1],b=Object(i.useRef)({height:null,movementY:null,previousTouchY:null,moved:!1}),x=Object(i.useState)(!0),y=Object(_.a)(x,2),E=y[0],I=y[1];return o.a.useEffect((function(){if(c.geolocation){var e,n;({latitude:0,longitude:0}),n={enableHighAccuracy:!1,timeout:5e3,maximumAge:0},e=navigator.geolocation.watchPosition((function(n){if(!window.mergin_mode.camera.position)return!1;var t=n.coords.latitude,i=n.coords.longitude,o=Object(A.a)([t,i,0]),r=Number((o[0]-window.mergin_mode.center[0]).toFixed(4)),a=Number(window.mergin_mode.camera.position.y.toFixed(4)),m=Number((o[1]-window.mergin_mode.center[2]).toFixed(4));if(Math.abs(r)>1e3||Math.abs(m)>1e3){var s=Math.sqrt(Math.pow(r,2)+Math.pow(m,2));return alert("Your location is to far from the virtual world. You are ".concat(s.toFixed(2)," meter far away.")),l(Object(d.a)(Object(d.a)({},c),{},{geolocation:!1})),navigator.geolocation.clearWatch(e),!0}window.mergin_mode.camera.position.set(r,a,m)}),(function(e){console.warn("ERROR("+e.code+"): "+e.message)}),n)}}),[c.geolocation]),o.a.useEffect((function(){setInterval((function(){if(!window.mergin_mode.camera.position)return!1;var e=window.mergin_mode.camera.position,n=e.x,t=e.y,i=e.z,o=new s.Vector3,r=new s.Spherical;window.mergin_mode.camera.getWorldDirection(o),r.setFromVector3(o);var a=(360-s.Math.radToDeg(r.theta)-180).toFixed(0);360==a&&(a=0);var d=Object(_.a)(window.mergin_mode.center,3),c=d[0],l=d[1],m=d[2];v({position:{x:(c+n).toFixed(2)+"m",y:(m+i).toFixed(2)+"m",z:(l+t).toFixed(2)+"m"},heading:a+"deg"})}),1e3)}),[]),o.a.createElement("div",{id:"controls"},o.a.createElement("img",{id:"logo",width:120,height:87.9375,src:"/logo-transparent.png"}),o.a.createElement("div",{id:"actions-menu"},o.a.createElement(M,{actions:[{icon:o.a.createElement("div",{onClick:function(){return p(o.a.createElement(Z,{onClose:function(e){p(null)}}))}},o.a.createElement("i",{style:{fontSize:18},className:"fas fa-qrcode"})),name:"QR Scan"},{icon:o.a.createElement(U.a,{onClick:function(){document.fullscreenElement?document.exitFullscreen():window.document.body.requestFullscreen().catch((function(e){alert("Error attempting to enable full-screen mode: ".concat(e.message," (").concat(e.name,")"))}))}}),name:"Full Screen"},{icon:o.a.createElement("span",{onClick:function(){window.mergin_mode.realities.virtual()}},"VR"),name:"Virtual Reality"},{icon:o.a.createElement("span",{onClick:function(){window.mergin_mode.realities.mixed()}},"MR"),name:"Mixed Reality"},{icon:o.a.createElement("span",{onClick:function(){window.mergin_mode.realities.mixed()},id:"vrh"},"VRH"),name:"VR Headset"},{icon:o.a.createElement("span",{onClick:function(){window.mergin_mode.realities.mixed()},id:"mrh"},"MRH"),name:"MR Headset"},{icon:o.a.createElement("span",{onClick:function(){I(!E)},id:"shi"},o.a.createElement("i",{className:"fas fa-info-circle"})),name:"Show/Hide Info"},{icon:o.a.createElement("span",{onClick:function(){l(Object(d.a)(Object(d.a)({},c),{},{geolocation:!c.geolocation}))},id:"geolocation"},o.a.createElement(X.a,null)),name:"Geolocate"}]}),E&&o.a.createElement("div",{id:"info-panel"},o.a.createElement("div",{className:"info-group"},o.a.createElement("label",null,"Position"),o.a.createElement("div",null,"".concat(h.position.x,",").concat(h.position.y,",").concat(h.position.z))),o.a.createElement("div",{className:"info-group"},o.a.createElement("label",null,"Heading"),o.a.createElement("div",null,h.heading))),o.a.createElement("div",{id:"available-worlds"},o.a.createElement(V,{item:window.mergin_mode.worlds})),o.a.createElement("div",{id:"descriptive-data-container",ref:function(e){return t.current=e}},o.a.createElement(J.a,{id:"slider-helper",onMouseDown:$(t,n,b),onTouchStart:$(t,n,b),ref:function(e){return n.current=e}}),o.a.createElement("div",{id:"slider"}),e.descriptiveData?o.a.createElement("div",{id:"descriptive-data",dangerouslySetInnerHTML:{__html:e.descriptiveData}}):o.a.createElement("div",{id:"descriptive-data",style:{overflowY:"auto"}},o.a.createElement("i",{className:"mm-icons far fa-comment-dots"}),o.a.createElement("p",null,"Please select an object to reveal descriptive data"))),w&&o.a.createElement(T,{data:w,onClose:function(){p(null)}})))})),ne=t(74),te=t(138),ie=Object(ne.a)({palette:{primary:{main:"#b34f0b"},secondary:{main:"#323228"}}});var oe=function(){return o.a.createElement(te.a,{theme:ie},o.a.createElement("div",{className:"App"},o.a.createElement(y,null),o.a.createElement(ee,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var re=t(27),ae=t(73),de=(t(104),{currentAction:"immerse",descriptiveData:null}),ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"SET_DESCRIPTIVE_DATA":var t=n.descriptiveData;return Object.assign({},e,{descriptiveData:t});default:return e}};window.mergin_mode={modelLayer:[],vectors:[],plane:{},sky:{},mixers:[],camera:{},controls:{},scene:{},renderer:{},pointer:{},partials:{},loaders:{},selected:{object:null,material:null},listeners:{mouseMoved:!1},center:[0,0,0],onWindowResize:function(){},world:{},currentWorldId:0,worlds:[{id:"0",name:"Start World",description:"Start World",content:[],meta:{authors:[{firstName:"Konstantinos",lastName:"Evanggelidis"},{firstName:"Theofilos",lastName:"Papadopoulos"}],coordinates:[0,0,0]}},z,P]};var le=Object(re.b)({api:ce}),me=document.getElementById("root"),se=(Object(ae.createLogger)({}),Object(re.c)(le,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));a.a.render(o.a.createElement(c.a,{store:se},o.a.createElement(oe,null)),me),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},84:function(e,n,t){e.exports=t(105)},89:function(e,n,t){},91:function(e,n,t){},97:function(e,n,t){"use strict";(function(e){t(11),t(0),t(108),e.browser&&/iPad|iPhone|iPod/.test(navigator.userAgent)}).call(this,t(98))}},[[84,1,2]]]);
//# sourceMappingURL=main.185600c9.chunk.js.map